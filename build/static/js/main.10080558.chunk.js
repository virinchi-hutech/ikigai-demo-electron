(this["webpackJsonpikigai-frontend"]=this["webpackJsonpikigai-frontend"]||[]).push([[0],{1036:function(e,t,a){},1037:function(e,t,a){},1059:function(e,t,a){},1064:function(e,t,a){e.exports={"error-message":"ProjectPage_error-message__WOF1C","icon-variant":"ProjectPage_icon-variant__2htd4",snackbar:"ProjectPage_snackbar__3TZQp","error-snackbar":"ProjectPage_error-snackbar__3bUdr","main-container":"ProjectPage_main-container__34vB9","back-to-dashboard":"ProjectPage_back-to-dashboard__1vCJd","MuiIconButton-root":"ProjectPage_MuiIconButton-root__ycIRC","page-header-title":"ProjectPage_page-header-title__qdE1v","page-header-subtitle":"ProjectPage_page-header-subtitle__3fVso","project-name":"ProjectPage_project-name__19vzw","page-header":"ProjectPage_page-header__qHOmS","page-header-buttons":"ProjectPage_page-header-buttons__3EMqR","more-button":"ProjectPage_more-button__2iVy5",cardbox:"ProjectPage_cardbox__3kTXv","flow-box":"ProjectPage_flow-box__3am1i",dataset:"ProjectPage_dataset__24w1G","cardbox-header":"ProjectPage_cardbox-header__3FEM8","flow-text":"ProjectPage_flow-text__1rtuv","MuiSvgIcon-root":"ProjectPage_MuiSvgIcon-root__123V5","flow-menu":"ProjectPage_flow-menu__1hgLs",content:"ProjectPage_content__24-26","MuiTypography-caption":"ProjectPage_MuiTypography-caption__3skT-","flow-tab-container":"ProjectPage_flow-tab-container__2_zKB","flows-control-wrap":"ProjectPage_flows-control-wrap__2Hgl2","flows-filter-holder":"ProjectPage_flows-filter-holder__K6YBp","project-filters-textfield":"ProjectPage_project-filters-textfield__1nXtR","MuiFormControl-marginNormal":"ProjectPage_MuiFormControl-marginNormal__4nT3P","flows-filter-box":"ProjectPage_flows-filter-box__39QXa",show:"ProjectPage_show__3UcF0","flows-pagination":"ProjectPage_flows-pagination__SRgSg","filter-toggle-button":"ProjectPage_filter-toggle-button__3JTNQ",selected:"ProjectPage_selected__q91Za",uploading:"ProjectPage_uploading__XhKcr","uploading-databox":"ProjectPage_uploading-databox__1_GvB","linear-progress-val":"ProjectPage_linear-progress-val__1odsv"}},1065:function(e,t,a){},1067:function(e,t,a){},1068:function(e,t,a){},1069:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(24),o=a.n(s),i=(a(601),a(6)),l=a(7),c=a(10),u=a(11),d=a(36),p=window&&window.location&&window.location.hostname,m=p.indexOf("dev-ui.ikigailabs.io")>-1||p.indexOf("localhost")>-1,h=m?"https://dev-pypr.ikigailabs.io/pypr":"https://api.ikigailabs.io/pypr",f=m?"https://dev-ui.ikigailabs.io/metabase-login/navigate?url=":"https://beta.ikigailabs.io/metabase-login/navigate?url=",g=a(135),b=a.n(g),v="Check for login cookie start",_="Check for login cookie complete",E="Check for login cookie fail",S="Authenticate",y="Authentication complete",w="logout",k="Adding a flow",j="Adding a flow complete",D="delete a flow",O="Deleting a flow complete",N="restore a flow",C="restore a flow complete",P="Get flows",I="Get flows request complete",x="Get flows request fail",F="Delete node",T="Sending app data",A="Sending app data complete",L="Saving flows",M="Saving flows complete",z="Update flow data start",R="Update flow data complete",V="Get facet doc start",U="Get facet doc complete",W="Get facet doc fail",B="Get projects request start",Y="Get projects request complete",q="Get projects request fail",H="Create project request start",G="Create project request complete",K="Create project request fail",Q="Duplicate project request start",J="Duplicate project request complete",X="Duplicate project request fail",Z="Delete project request start",$="Delete project request complete",ee="Delete project request fail",te="Rename project request start",ae="Rename project request complete",ne="Rename project request fail",re="Create dataset request start",se="Create dataset request complete",oe="Create dataset request fail",ie="Upload dataset requeest start",le="Get datasets request start",ce="Get datasets request complete",ue="Get datasets request fail",de="delete dataset request start",pe="delete dataset request complete",me="delete dataset request fail",he="edit dataset request start",fe="edit dataset request complete",ge="upload dataset request progress updated",be="edit dataset request fail",ve="Login to Metabase request start",_e="Login to Metabase request complete",Ee="Login to Metabase request fail",Se="Soft logout",ye="Reset flow state",we="Reset user state",ke="start get suggestions",je="completed action get suggestions",De="Create dashboard request start",Oe="Create dashboard request complete",Ne="Create dashboard request fail",Ce="Get dashboards request start",Pe="Get dashboards request complete",Ie="Get dashboards request fail",xe="edit dashboard request start",Fe="edit dashboard request complete",Te="upload dashboard start",Ae="upload dashboard complete",Le="edit upload dashboard start",Me="edit upload dashboard complete",ze="delete dashboard request start",Re="delete dashboard request complete",Ve="delete dashboard request fail",Ue="Handle project return",We="Handle fill session",Be="Handle clean session",Ye=b.a.create({baseURL:h,headers:{Accept:"application/json",withCredentials:!0}}),qe=function(){return{type:w,payload:null}},He=function(e){return{type:y,payload:e}},Ge=function(e){return{type:A,payload:e}},Ke=function(e){return{type:j,payload:e}},Qe=function(e){return{type:x,payload:e}},Je=function(e){return{type:M,payload:e}},Xe=function(e){return{type:z,payload:e}},Ze=function(){return{type:B,payload:null}},$e=function(e){return{type:Y,payload:e}},et=function(e,t,a){return{type:Q,payload:{projectId:e,name:t,targetUser:a}}},tt=function(e){return{type:Z,payload:e}},at=function(e,t){return{type:te,payload:{projectId:e,newName:t}}},nt=function(e,t){return{type:ae,payload:{projectId:e,newName:t}}},rt=function(){return{type:we,payload:null}},st=function(){return{type:ye,payload:null}},ot=function(e){return{type:le,payload:e}},it=function(e){return{type:ue,payload:e}},lt=function(e){return{type:Ce,payload:e}},ct=function(e,t,a){return{type:re,payload:{datasetName:t,projectId:e,file:a}}},ut=function(e){return{type:se,payload:e}},dt=function(e){return{type:Oe,payload:e}},pt=function(e){return{type:Ne,payload:e}},mt=function(e){return{type:de,payload:e}},ht=function(e){return{type:pe,payload:e}},ft=function(e){return{type:Re,payload:e}},gt=function(e,t,a,n){return{type:he,payload:{projectId:e,datasetId:t,datasetName:a,file:n}}},bt=function(e){return{type:fe,payload:e}},vt=function(e,t,a,n,r,s){return{type:ge,payload:{percent:e,datasetId:t,datasetName:a,status:n,retry:r,cancel:s}}},_t=function(e){return{type:Fe,payload:e}},Et=function(e){return{type:ve,payload:e}},St=function(e){return{type:ke,payload:{data:e}}},yt=function(e){return{type:Ue,payload:e}},wt=function(){return{type:Be,payload:null}},kt=function(e,t){return{type:We,payload:{projectSess:e,projectId:t}}},jt=a(39),Dt=a(33),Ot=a(2),Nt=a(41),Ct=a(133),Pt=a(1158),It=a(1126),xt=a(522),Ft=a(344),Tt=a(1127),At=a(1076),Lt=a(35),Mt=a.n(Lt),zt=a(532),Rt=a.n(zt),Vt=a(531),Ut=a.n(Vt),Wt=(a(635),a(146)),Bt=a.n(Wt),Yt=a(48),qt=a.n(Yt),Ht=a(13),Gt=a(1151),Kt=a(1115),Qt=a(1116),Jt=a(163),Xt=a.n(Jt);function Zt(e){var t=e.helpText,a=Object(n.useState)(0),s=Object(Ht.a)(a,2),o=s[0],i=s[1],l=Object(n.useState)(!1),c=Object(Ht.a)(l,2),u=c[0],d=c[1],p=function(e,t){i(t)};return r.a.createElement(Qt.a,{open:u,arrow:!0,interactive:!0,title:function(e){var t=e.split("[").join("").split("[").join("").split("Example:\n");return 1===e.length?r.a.createElement(n.Fragment,null,r.a.createElement(Xt.a,{source:t[0],escapeHtml:!1})):r.a.createElement("div",{className:"help-dialog-popup"},r.a.createElement(Gt.a,{value:o,onChange:p,indicatorColor:"primary",className:"help-tabs"},r.a.createElement(Kt.a,{label:"Info",id:"tab-0"}),r.a.createElement(Kt.a,{label:"Example",id:"tab-1"})),r.a.createElement("div",{hidden:0!==o,className:"info-block"},r.a.createElement(Xt.a,{source:t[0],escapeHtml:!1})),r.a.createElement("div",{hidden:1!==o,className:"info-example-block"},r.a.createElement("img",{src:t[1].trim(),alt:"example"})))}(t),leaveDelay:500,placement:"right-end",className:"tooltip-holder",onClose:function(e){var t="false";if(""!==e.target.className){var a=e.target.className+"";if("MuiTab-wrapper"===a||"MuiTab-root"===a)t="true";else a.split(" ").map((function(e){return"MuiTab-wrapper"!==e&&"MuiTab-root"!==e||(t="true"),""}))}d("true"===t)},onOpen:function(e){d(!0)}},r.a.createElement("span",{className:"form-help-icon"},"?"))}var $t=a(1153),ea=a(187),ta=a.n(ea),aa=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.alertType,t=this.props.alertContent,a=this.props.alertButtons;return r.a.createElement($t.a,{severity:e,className:ta.a.alert},r.a.createElement("div",{className:ta.a.title},e),r.a.createElement(Pt.a,{className:ta.a.descr},t),r.a.createElement(Pt.a,{className:ta.a.buttons},a))}}]),a}(n.Component),na=a(526),ra=a.n(na),sa=(a(778),a(779),a(780),a(781),a(40)),oa=a.n(sa),ia=a(527),la=a.n(ia),ca=oa.a.bind(la.a),ua=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e._label,a=e._variant,n=e._type,s=e._color,o=e._disabled,i=e._fullWidth,l=e._loading,c=this.props._startIcon?this.props._startIcon:"",u=this.props._onClick?this.props._onClick:null,d=!!this.props._isDanger&&this.props._isDanger,p=!!this.props._isWarning&&this.props._isWarning,m=this.props._align?this.props._align:"center",h="";h="warning"===s?"inherit":s;var f=ca({button:!0,left:"left"===m,warning:p}),g=ca({btnSpinner:!0,"on-error":d,alternate:o});return r.a.createElement(r.a.Fragment,null,r.a.createElement(At.a,{type:n,variant:a,color:h,fullWidth:i,disabled:o,className:f,onClick:null!==u?this.props._onClick:function(){}},l?r.a.createElement("span",{className:g}):""!==c&&c,r.a.createElement("span",null,t)))}}]),a}(n.Component),da=a(528),pa=a.n(da),ma=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props._text?this.props._text:"";return r.a.createElement("div",{className:pa.a.textDivider},""!==e&&r.a.createElement("span",null,e))}}]),a}(n.Component),ha=a(1118),fa=a(251),ga=a(341),ba=a(1119),va=a(1159),_a=(a(782),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.error,t=this.props.currentLength,a=this.props.maxLength;return r.a.createElement("div",{className:"cCounter-holder "+e},r.a.createElement("span",{className:"left"},t),r.a.createElement("span",{className:"middle"}," / "),r.a.createElement("span",{className:"right"},a))}}]),a}(n.Component)),Ea=a(274),Sa=a.n(Ea),ya=a(34),wa=a.n(ya),ka=function(){return wa()().format("DD/MM/YYYY, H:mm")},ja=function(e){return e.split("_").map((function(e){return"".concat(e[0].toUpperCase()).concat(e.slice(1).toLowerCase())})).join(" ")},Da=function(e){if(e)return JSON.parse(JSON.stringify(e))},Oa=oa.a.bind(Sa.a),Na=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).constructStartIconProps=function(){var t=e.props._startIcon?e.props._startIcon:"";return t._withButton?r.a.createElement(ha.a,{position:t._position,className:Sa.a.startIcon},r.a.createElement(fa.a,{edge:t._edge,onClick:t._onClick,onMouseDown:function(e){e.preventDefault()},size:t._size},t._icon)):r.a.createElement(ha.a,{position:t._position,className:Sa.a.startIcon},t._icon)},e.constructEndIconProps=function(){var t=e.props._endIcon?e.props._endIcon:"";return t._withButton?r.a.createElement(ha.a,{position:t._position},r.a.createElement(fa.a,{edge:t._edge,onClick:t._onClick,onMouseDown:function(e){e.preventDefault()},size:t._size},t._icon)):r.a.createElement(ha.a,{position:t._position},t._icon)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e._label,a=e._placeholder,n=e._value,s=e._type,o={},i={},l={},c=this.props._error?this.props._error:"",u=!!this.props._required&&this.props._required,d=!!this.props._disabled&&this.props._disabled,p=!!this.props._fullWidth&&this.props._fullWidth,m=!!this.props._autoFocus&&this.props._autoFocus,h=this.props._size?this.props._size:"medium",f=this.props._margin?this.props._margin:"normal",g=!!this.props._filterType&&this.props._filterType,b=this.props._endIcon?this.props._endIcon:"",v=this.props._startIcon?this.props._startIcon:"",_=this.props._characterCounter?this.props._characterCounter:"",E=!!this.props._isSelect&&this.props._isSelect,S=this.props._selectOptions?this.props._selectOptions:null,y=this.props._selectOptionsKeyForVal?this.props._selectOptionsKeyForVal:"",w=this.props._selectOptionsKeyForTxt?this.props._selectOptionsKeyForTxt:"",k=!!this.props._multiline&&this.props._multiline,j=this.props._rows?this.props._rows:1,D="";""!==c?D=c:u&&""===n&&(D="Required"),""!==_&&(o={maxLength:_}),""!==v&&(i.startAdornment=this.constructStartIconProps()),""!==b&&(i.endAdornment=this.constructEndIconProps()),""!==E&&(l.value=n);var O=Oa({inputHolder:!0,"has-counter":""!==_}),N=Oa({input:!0,"has-startIcon":""!==v,"of-filter-type":g});return r.a.createElement(r.a.Fragment,null,r.a.createElement(ga.a,{fullWidth:p,error:""!==c,className:O,disabled:d},r.a.createElement(ba.a,{disabled:d,className:N,margin:f,variant:"outlined",fullWidth:p,label:t,placeholder:a,type:s,select:E,autoComplete:"new-username",value:n,onChange:this.props._onChange,required:u,autoFocus:m,error:""!==c,size:h,multiline:k,rows:j,inputProps:o,InputProps:i,InputLabelProps:{shrink:!0},SelectProps:l},E&&S.map((function(e){return""===y&&""===w?r.a.createElement(va.a,{key:e.toString(),value:e},ja(e)):r.a.createElement(va.a,{key:e[w],value:e[y]},e[w])}))),""!==_&&r.a.createElement(_a,{currentLength:n?n.length:0,maxLength:_,error:""!==c}),""!==c&&r.a.createElement(Ft.a,{className:"input-error",error:!0},r.a.createElement(Mt.a,null),r.a.createElement("span",null,D))))}}]),a}(n.Component),Ca=a(529),Pa=a.n(Ca),Ia=a(275),xa=a.n(Ia),Fa=oa.a.bind(xa.a),Ta=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).constructStartIconProps=function(){var t=e.props._startIcon?e.props._startIcon:"";return t._withButton?r.a.createElement(ha.a,{position:t._position,className:xa.a.startIcon},r.a.createElement(fa.a,{edge:t._edge,onClick:t._onClick,onMouseDown:function(e){e.preventDefault()},size:t._size},t._icon)):r.a.createElement(ha.a,{position:t._position,className:xa.a.startIcon},t._icon)},e.constructEndIconProps=function(){var t=e.props._endIcon?e.props._endIcon:"";return t._withButton?r.a.createElement(ha.a,{position:t._position},r.a.createElement(fa.a,{edge:t._edge,onClick:t._onClick,onMouseDown:function(e){e.preventDefault()},size:t._size},t._icon)):r.a.createElement(ha.a,{position:t._position},t._icon)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t._label,n=t._placeholder,s=t._value,o=(t._type,{}),i=this.props._error?this.props._error:"",l=!!this.props._required&&this.props._required,c=!!this.props._fullWidth&&this.props._fullWidth,u=(!!this.props._autoFocus&&this.props._autoFocus,this.props._margin?this.props._margin:"normal"),d=this.props._endIcon?this.props._endIcon:"",p=this.props._startIcon?this.props._startIcon:"",m="";""!==i?m=i:l&&""===s&&(m="Required"),""!==p&&(o.startAdornment=this.constructStartIconProps()),""!==d&&(o.endAdornment=this.constructEndIconProps());var h=Fa({inputChipHolder:!0}),f=Fa({inputChip:!0,"has-startIcon":""!==p});return r.a.createElement(r.a.Fragment,null,r.a.createElement(ga.a,{fullWidth:c,error:""!==i,className:h},r.a.createElement(Pa.a,{className:f,key:"chipinput-"+a,required:l,error:i,onAdd:function(t,a,n){e.props._addChip(t,a,n)},onDelete:function(t,a){e.props._deleteChip(t,a)},value:s||[],fullWidth:!0,label:a,placeholder:n,margin:u,variant:"outlined",InputLabelProps:{shrink:!0}}),""!==i&&r.a.createElement(Ft.a,{className:"input-error",error:!0},r.a.createElement(Mt.a,null),r.a.createElement("span",null,m))))}}]),a}(n.Component),Aa=a(1122),La=a(1123),Ma=a(1124),za=a(1125),Ra=a(147),Va=a.n(Ra),Ua=oa.a.bind(Va.a),Wa=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e._open,a=e._onClose,n=e._type,s=e._title,o=e._subtitle,i=e._size,l=e._content,c=e._actions,u=this.props._align?this.props._align:"left",d=this.props._onEnter?this.props._onEnter:null,p=Ua({dialog:!0,center:"center"===u,delete:"delete"===n});return r.a.createElement(r.a.Fragment,null,r.a.createElement(Aa.a,{open:t,onEnter:d,onClose:a,className:p,fullWidth:!0,maxWidth:i,disableBackdropClick:!0},""!==s&&r.a.createElement(La.a,{className:Va.a.header},""!==o&&r.a.createElement("div",{className:Va.a.subtitle},o),""!==s&&r.a.createElement("div",{className:Va.a.title},s)),""!==l&&r.a.createElement(Ma.a,{className:Va.a.content},l),r.a.createElement(za.a,{className:Va.a.footer},c)))}}]),a}(n.Component),Ba=a(1156),Ya=a(530),qa=a.n(Ya),Ha=oa.a.bind(qa.a),Ga=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleSelection=function(e,t){var a=n.props._index?n.props._index:0,r=n.props._keyValue?n.props._keyValue:"",s=n.props._nameValue?n.props._nameValue:"",o=n.props._selectOptions?n.props._selectOptions:null,i=0;o.forEach((function(e){e[s]===t&&(i=e[r])})),n.props._onChange(e,a,i)},n.prepareComponent=function(){var e=n.props,t=e._label,a=e._placeholder,s=e._value,o=(e._index,!!n.props._error&&n.props._error),i=!!n.props._required&&n.props._required,l=!!n.props._fullWidth&&n.props._fullWidth,c=(!!n.props._autoFocus&&n.props._autoFocus,n.props._size&&n.props._size,n.props._margin&&n.props._margin,!!n.props._isMultiple&&n.props._isMultiple),u=n.props._selectOptions?n.props._selectOptions:[],d=(n.props._noSelectOptionsTxt&&n.props._noSelectOptionsTxt,n.props._keyValue?n.props._keyValue:""),p=n.props._nameValue?n.props._nameValue:"",m=n.props._groupByValue?n.props._groupByValue:"",h="";""!==o?h=o:i&&""===s&&(h="Required");var f=[],g="";u&&u.forEach((function(e,t){if(""===d&&""===p)f.push(e);else if(""!==m){var a;f[t]=(a={},Object(Dt.a)(a,m,e[m]),Object(Dt.a)(a,d,e[d]),Object(Dt.a)(a,p,e[p]),a)}else f.push(e[p]),e[d]===s&&(g=e[p])})),""!==m?(u.sort((function(e,t){return-t[m].localeCompare(e[m])})),f.sort((function(e,t){return-t[m].localeCompare(e[m])}))):(u.sort(),f.sort());var b=Ha({autocompleteHolder:!0}),v=Ha({autocomplete:!0});return c?r.a.createElement(r.a.Fragment,null,r.a.createElement(ga.a,{fullWidth:l,error:""!==o,className:b},r.a.createElement(Ba.a,{multiple:!0,className:v,options:u,getOptionLabel:function(e){return ja(e)},value:""!==s?s:[],inputValue:n.state.inptVal,onChange:function(e,a){n.props._onChange(t,a),n.setState({inptVal:""})},renderInput:function(e){return r.a.createElement(ba.a,Object.assign({},e,{variant:"outlined",label:t,placeholder:a,InputLabelProps:{shrink:!0},inputProps:Object(Ot.a)(Object(Ot.a)({},e.inputProps),{},{autoComplete:"new-password"}),onChange:function(e){return n.setState({inptVal:e.target.value})}}))}}))):""!==m?r.a.createElement(r.a.Fragment,null,r.a.createElement(ga.a,{fullWidth:l,error:""!==o,className:b},r.a.createElement(Ba.a,{className:v,options:f,groupBy:""!==m?function(e){return e[m]}:function(){},getOptionLabel:function(e){return e[p]},renderInput:function(e){return r.a.createElement(ba.a,Object.assign({},e,{variant:"outlined",label:t,placeholder:a,InputLabelProps:{shrink:!0},inputProps:Object(Ot.a)(Object(Ot.a)({},e.inputProps),{},{autoComplete:"new-password"})}))},defaultValue:s,onChange:function(e,t){return n.props._onChange(e,t)}}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(ga.a,{fullWidth:l,error:o&&""!==h,className:b},r.a.createElement(Ba.a,{className:v,options:f,getOptionLabel:function(e){return e},defaultValue:""!==g?g:"",onChange:function(e,a){return n.props._onChange(t,a)},renderInput:function(e){return r.a.createElement(ba.a,Object.assign({},e,{error:o&&""!==h,variant:"outlined",label:t,placeholder:a,InputLabelProps:{shrink:!0},inputProps:Object(Ot.a)(Object(Ot.a)({},e.inputProps),{},{autoComplete:"new-password"})}))}}),o&&""!==h&&r.a.createElement(Ft.a,{className:"input-error",error:!0},r.a.createElement(Mt.a,null),r.a.createElement("span",null,h))))},n.state={inptVal:""},n}return Object(l.a)(a,[{key:"render",value:function(){return this.prepareComponent()}}]),a}(n.Component),Ka=a(109),Qa=a(573),Ja=a(71),Xa=Object(Ja.a)(),Za=a(438),$a={flows:[],flowsLoaded:!1,flowsLoadedError:"",projects:[],datasets:[],dashboards:[],projectsLoaded:!1,uploadStatus:"idle",dashUploadStatus:"idle",creatingFlow:!1,projectsLoadedError:"",datasetsLoaded:!1,datasetsLoadedError:"",dashboardsLoaded:!1,dashboardsLoadedError:"",uploadProgress:[],metabaseLogin:!1,metabaseLoginId:"",activeProjectId:"",activePageType:"",activePipelineId:""},en=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Un(e,t.payload);case k:return tn(e,t.payload);case j:return Vn(e,t.payload);case P:return jn(e,t.payload);case I:return zn(e,t.payload);case x:return Rn(e,t.payload);case M:return Mn(e,t.payload);case R:return Ln(e,t.payload);case O:return An(e,t.payload);case C:return Tn(e,t.payload);case Y:return Fn(e,t.payload);case q:return xn(e,t.payload);case G:return Nn(e,t.payload);case K:return In(e,t.payload);case J:return Pn(e,t.payload);case X:return Cn(e,t.payload);case $:return Dn(e,t.payload);case ee:return On(e,t.payload);case ae:return kn(e,t.payload);case ne:return wn(e,t.payload);case ye:return yn(e,t.payload);case le:return En(e,t.payload);case ce:return vn(e,t.payload);case ue:return gn(e,t.payload);case pe:return pn(e,t.payload);case me:return mn(e,t.payload);case Re:return hn(e,t.payload);case Ve:return fn(e,t.payload);case se:return on(e,t.payload);case re:return sn(e,t.payload);case he:return an(e,t.payload);case fe:return nn(e,t.payload);case ge:return rn(e,t.payload);case Ce:return Sn(e,t.payload);case Pe:return _n(e,t.payload);case Ie:return bn(e,t.payload);case Te:return ln(e,t.payload);case Ae:return dn(e,t.payload);case Le:return ln(e,t.payload);case Me:return dn(e,t.payload);case xe:return un(e,t.payload);case Fe:return cn(e,t.payload);case Oe:return dn(e,t.payload);case _e:return Wn(e,t.payload);case Ee:return Bn(e,t.payload);case Ue:return Yn(e,t.payload);case Be:return Hn(e);case We:return qn(e,t.payload)}return e},tn=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{creatingFlow:!0})},an=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{uploadStatus:"pending"})},nn=function(e,t){var a=e.datasets.filter((function(e){return e.dataset_id!==t.dataset.dataset_id}));return Object(Ot.a)(Object(Ot.a)({},e),{},{datasets:[].concat(Object(jt.a)(a),[t.dataset]),uploadStatus:"complete"})},rn=function(e,t){var a=t.percent,n=t.status,r=t.datasetId,s=t.datasetName,o=t.retry,i=t.cancel,l=[];if("deleted"!==n){var c={percentCompleted:a,status:n,datasetId:r,datasetName:s,onRetry:o,onCancel:i};return l=e.uploadProgress?e.uploadProgress.filter((function(e){return e.datasetId!==r&&100!==e.percentCompleted})):[],Object(Ot.a)(Object(Ot.a)({},e),{},{uploadProgress:[].concat(Object(jt.a)(l),[c])})}return l=e.uploadProgress?e.uploadProgress.filter((function(e){return e.datasetId!==r})):[],Object(Ot.a)(Object(Ot.a)({},e),{},{uploadProgress:Object(jt.a)(l)})},sn=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{uploadStatus:"pending"})},on=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{datasets:[].concat(Object(jt.a)(e.datasets),[t.dataset]),uploadStatus:"complete"})},ln=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{dashUploadStatus:"pending"})},cn=function(e,t){var a=e.dashboards.filter((function(e){return e.dashboard_id!==t.dashboard.dashboard_id}));return Object(Ot.a)(Object(Ot.a)({},e),{},{dashUploadStatus:"complete",dashboards:[].concat(Object(jt.a)(a),[t.dashboard])})},un=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{dashUploadStatus:"pending"})},dn=function(e,t){var a=e.dashboards.filter((function(e){return e.dashboard_id!==t.dashboard.dashboard_id}));return Object(Ot.a)(Object(Ot.a)({},e),{},{dashboards:[].concat(Object(jt.a)(a),[t.dashboard]),dashUploadStatus:"complete"})},pn=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{datasets:e.datasets.filter((function(e){return e.dataset_id!==t}))})},mn=function(e,t){return e},hn=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{dashboards:e.dashboards.filter((function(e){return e.dashboard_id!==t}))})},fn=function(e,t){return e},gn=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{datasetsLoaded:!0,datasetsLoadedError:"Unable to load datasets"})},bn=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{dashboardsLoaded:!0,dashboardsLoadedError:"Unable to load dashboards"})},vn=function(e,t){var a=t.datasets,n=t.projectId;if(a.length>0){var r=e.datasets.filter((function(e){return e.project_id!==n}));return Object(Ot.a)(Object(Ot.a)({},e),{},{datasets:[].concat(Object(jt.a)(r),Object(jt.a)(a)),datasetsLoaded:!0,datasetsLoadedError:""})}return Object(Ot.a)(Object(Ot.a)({},e),{},{datasetsLoaded:!0,datasetsLoadedError:""})},_n=function(e,t){var a=t.dashboards,n=t.projectId;if(a.length>0){var r=e.dashboards.filter((function(e){return e.project_id!==n}));return Object(Ot.a)(Object(Ot.a)({},e),{},{dashboards:[].concat(Object(jt.a)(r),Object(jt.a)(a)),dashboardsLoaded:!0,dashboardsLoadedError:""})}return Object(Ot.a)(Object(Ot.a)({},e),{},{dashboardsLoaded:!0,dashboardsLoadedError:""})},En=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{datasetsLoaded:!1})},Sn=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{dashboardsLoaded:!1})},yn=function(e,t){return Object(Ot.a)({},$a)},wn=function(e,t){return e},kn=function(e,t){var a=t.projectId,n=t.newName,r=e.projects.filter((function(e){return e.project_id===a}));if(r.length>0){(r=r[0]).name=n;var s=e.projects.filter((function(e){return e.project_id!==a}));return Object(Ot.a)(Object(Ot.a)({},e),{},{projects:[].concat(Object(jt.a)(s),[r])})}return e},jn=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{flowsLoaded:!1})},Dn=function(e,t){var a=e.projects.filter((function(e){return e.project_id!==t}));return Object(Ot.a)(Object(Ot.a)({},e),{},{projects:a})},On=function(e,t){return e},Nn=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{projects:[].concat(Object(jt.a)(e.projects),[Object(Ot.a)(Object(Ot.a)({},t),{},{project:t})])})},Cn=function(e,t){return e},Pn=function(e,t){return t.owner!==t.user?e:Object(Ot.a)(Object(Ot.a)({},e),{},{projects:[].concat(Object(jt.a)(e.projects),[Object(Ot.a)(Object(Ot.a)({},t),{},{project:t})])})},In=function(e,t){return e},xn=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{projectsLoaded:!1,projectsLoadedError:t})},Fn=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{projects:t,projectsLoaded:!0,projectsLoadedError:""})},Tn=function(e,t){var a=e.flows.filter((function(e){return e.id===t}))[0];a.isDeleted=!1;var n=e.flows.filter((function(e){return e.id!==t}));return n.push(a),Object(Ot.a)(Object(Ot.a)({},e),{},{flows:n})},An=function(e,t){if(e.flows[t.project_id]){var a=e.flows[t.project_id].filter((function(e){return e.pipeline_id!==t.pipeline_id}));return Object(Ot.a)(Object(Ot.a)({},e),{},{flows:Object(Ot.a)(Object(Ot.a)({},a),{},Object(Dt.a)({},t.project_id,a))})}return e},Ln=function(e,t){var a=e.flows.filter((function(e){return e.id!==t.id}));return a.push(t),Object(Ot.a)(Object(Ot.a)({},e),{},{flows:a})},Mn=function(e,t){return e},zn=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{flows:Object(Ot.a)(Object(Ot.a)({},e.flows),{},Object(Dt.a)({},t.projectId,t.flowsData)),flowsLoaded:!0,flowsLoadedError:""})},Rn=function(e,t){var a="";return a=401===t.status?"Unauthorized. You don't have access to visit this page":404===t.status?"Error 404: Something went wrong":"Error: Something went wrong",Object(Ot.a)(Object(Ot.a)({},e),{},{flowsLoaded:!1,flowsLoadedError:a})},Vn=function(e,t){var a=[].concat(Object(jt.a)(e.flows[t.pipeline.project_id]),[t]);return Object(Ot.a)(Object(Ot.a)({},e),{},{creatingFlow:!1,flows:Object(Ot.a)(Object(Ot.a)({},e.flows),{},Object(Dt.a)({},t.pipeline.project_id,a))})},Un=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{response:t})},Wn=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{metabaseLoginId:t.session_id,metabaseLogin:!0})},Bn=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{metabaseLoginId:"",metabaseLogin:!1})},Yn=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{activePageType:t})},qn=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{metabaseLoginId:t.projectSess,metabaseLogin:!0,activeProjectId:t.projectId})},Hn=function(e){return Object(Ot.a)(Object(Ot.a)({},e),{},{metabaseLoginId:"",metabaseLogin:!1,activeProjectId:""})},Gn=new(a(574).a),Kn=function(e){Gn.remove(e)},Qn=a(348),Jn=a.n(Qn),Xn={email:"",idToken:"",refreshToken:"",accessToken:"",checkForLoginCookieComplete:!1,loginResponse:"",isLoggedIn:!1},Zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return ar(e,t.payload);case _:return er(e,t.payload);case E:return tr(e,t.payload);case we:return $n(e,t.payload)}return e},$n=function(e,t){return Object(Ot.a)(Object(Ot.a)({},Xn),{},{checkForLoginCookieComplete:!0})},er=function(e,t){var a=Jn()(t.idToken).email;return Ye.defaults.headers.common["Id-token"]=t.idToken,Ye.defaults.headers.common["Refresh-token"]=t.refreshToken,Ye.defaults.headers.common["Access-token"]=t.accessToken,Ye.defaults.headers.common.User=a,Object(Ot.a)(Object(Ot.a)(Object(Ot.a)({},e),t),{},{email:a,checkForLoginCookieComplete:!0,isLoggedIn:!0})},tr=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{checkForLoginCookieComplete:!0,isLoggedIn:!1})},ar=function(e,t){if(200===t.status){var a=t.data.tokens,n={idToken:a.id_token,refreshToken:a.refresh_token,accessToken:a.access_token},r=Jn()(a.id_token).email,s=JSON.stringify(n);return Ye.defaults.headers.common["Id-token"]=a.id_token,Ye.defaults.headers.common["Refresh-token"]=a.refresh_token,Ye.defaults.headers.common["Access-token"]=a.access_token,Ye.defaults.headers.common.User=r,o="tokens",i=s,Gn.set(o,i),Object(Ot.a)(Object(Ot.a)(Object(Ot.a)({},e),n),{},{email:r,loginResponse:"",isLoggedIn:!0})}return 401===t.status?Object(Ot.a)(Object(Ot.a)({},e),{},{loginResponse:"You have entered an invalid username or password",isLoggedIn:!1}):404===t.status?Object(Ot.a)(Object(Ot.a)({},e),{},{loginResponse:"Error 404: Something went wrong!",isLoggedIn:!1}):Object(Ot.a)(Object(Ot.a)({},e),{},{loginResponse:"Error 404: Something else!",isLoggedIn:!1});var o,i},nr={componentList:[],facetDocLoaded:!1,facetDocError:!1,facetDocErrorMessage:""},rr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return sr(e,t.payload);case W:return or(e,t.payload);default:return e}},sr=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{componentList:t,facetDocLoaded:!0,facetDocError:!1,facetDocErrorMessage:""})},or=function(e,t){return Object(Ot.a)(Object(Ot.a)({},e),{},{facetDocErrorMessage:t,facetDocError:!0})},ir=a(157),lr=a(12),cr=a.n(lr),ur=a(8),dr=function(e){var t={user:{email:e.email,password:e.password}};return Ye.post("/authenticate",t)};function pr(e,t){var a={user:{email:e,password:t}};return Ye.post("/register",a)}function mr(e,t){var a={user:{email:e,confirmation_code:t}};return Ye.post("/confirm-sign-up",a)}function hr(e){var t={user:{email:e}};return Ye.post("/initiate-forgot-password",t)}function fr(e,t,a){var n={user:{email:e,confirmation_code:t,password:a}};return Ye.post("/confirm-forgot-password",n)}function gr(e,t,a){var n={user:{email:e,previous_password:t,proposed_password:a}};return Ye.post("/change-password",n)}var br=function(){return new Promise((function(e,t){return Ye.post("/log-out").then((function(a){200===a.status?(e(a.data),vr()):(t(a.status),vr())}))}))},vr=function(){return new Promise((function(e,t){return Ye.post("/purge-sessions",{}).then((function(a){200===a.status?e(a.data):t(a.status)}))}))},_r=a(61),Er=cr.a.mark(Ds),Sr=cr.a.mark(Os),yr=cr.a.mark(Ns),wr=cr.a.mark(Cs),kr=cr.a.mark(Ps),jr=cr.a.mark(Is),Dr=cr.a.mark(xs),Or=cr.a.mark(Fs),Nr=cr.a.mark(Ts),Cr=cr.a.mark(As),Pr=cr.a.mark(Ls),Ir=cr.a.mark(Ms),xr=cr.a.mark(zs),Fr=cr.a.mark(Rs),Tr=cr.a.mark(Vs),Ar=cr.a.mark(Us),Lr=cr.a.mark(Ws),Mr=cr.a.mark(Bs),zr=cr.a.mark(Ys),Rr=cr.a.mark(qs),Vr=cr.a.mark(Hs),Ur=cr.a.mark(Gs),Wr=cr.a.mark(Ks),Br=cr.a.mark(Qs),Yr=cr.a.mark(Js),qr=cr.a.mark(Xs),Hr=cr.a.mark(Zs),Gr=cr.a.mark($s),Kr=cr.a.mark(eo),Qr=cr.a.mark(to),Jr=cr.a.mark(ao),Xr=cr.a.mark(no),Zr=cr.a.mark(ro),$r=cr.a.mark(so),es=cr.a.mark(oo),ts=cr.a.mark(io),as=cr.a.mark(lo),ns=cr.a.mark(co),rs=cr.a.mark(uo),ss=cr.a.mark(po),os=cr.a.mark(mo),is=cr.a.mark(ho),ls=cr.a.mark(fo),cs=cr.a.mark(go),us=cr.a.mark(bo),ds=cr.a.mark(vo),ps=cr.a.mark(_o),ms=cr.a.mark(Eo),hs=cr.a.mark(So),fs=cr.a.mark(yo),gs=cr.a.mark(wo),bs=cr.a.mark(ko),vs=cr.a.mark(jo),_s=cr.a.mark(Do),Es=cr.a.mark(Oo),Ss=cr.a.mark(No),ys=cr.a.mark(Co),ws=cr.a.mark(Po),ks=function(e){return e.userReducerState},js=cr.a.mark((function e(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.a)([Object(ur.c)(Qs),Object(ur.c)(Js),Object(ur.c)(Xs),Object(ur.c)(Zs),Object(ur.c)($s),Object(ur.c)(Ks),Object(ur.c)(Gs),Object(ur.c)(Hs),Object(ur.c)(qs),Object(ur.c)(Ys),Object(ur.c)(Bs),Object(ur.c)(Ws),Object(ur.c)(Vs),Object(ur.c)(Rs),Object(ur.c)(Us),Object(ur.c)(zs),Object(ur.c)(Ms),Object(ur.c)(As),Object(ur.c)(Ls),Object(ur.c)(xs),Object(ur.c)(Fs),Object(ur.c)(Os),Object(ur.c)(Ds),Object(ur.c)(Is),Object(ur.c)(Cs),Object(ur.c)(Ts),Object(ur.c)(Ns),Object(ur.c)(eo),Object(ur.c)(Ps)]);case 2:case"end":return e.stop()}}),e)}));function Ds(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(he,Oo);case 2:case"end":return e.stop()}}),Er)}function Os(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(xe,No);case 2:case"end":return e.stop()}}),Sr)}function Ns(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(ve,Co);case 2:case"end":return e.stop()}}),yr)}function Cs(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(de,jo);case 2:case"end":return e.stop()}}),wr)}function Ps(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(ze,Do);case 2:case"end":return e.stop()}}),kr)}function Is(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(ie,ko);case 2:case"end":return e.stop()}}),jr)}function xs(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(re,So);case 2:case"end":return e.stop()}}),Dr)}function Fs(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(De,wo);case 2:case"end":return e.stop()}}),Or)}function Ts(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(Te,yo);case 2:case"end":return e.stop()}}),Nr)}function As(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(le,_o);case 2:case"end":return e.stop()}}),Cr)}function Ls(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(Ce,Eo);case 2:case"end":return e.stop()}}),Pr)}function Ms(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(Se,vo);case 2:case"end":return e.stop()}}),Ir)}function zs(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(te,bo);case 2:case"end":return e.stop()}}),xr)}function Rs(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(Z,fo);case 2:case"end":return e.stop()}}),Fr)}function Vs(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(H,ho);case 2:case"end":return e.stop()}}),Tr)}function Us(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(Q,go);case 2:case"end":return e.stop()}}),Ar)}function Ws(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(B,mo);case 2:case"end":return e.stop()}}),Lr)}function Bs(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(V,po);case 2:case"end":return e.stop()}}),Mr)}function Ys(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(w,uo);case 2:case"end":return e.stop()}}),zr)}function qs(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(v,co);case 2:case"end":return e.stop()}}),Rr)}function Hs(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(S,lo);case 2:case"end":return e.stop()}}),Vr)}function Gs(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(N,ro);case 2:case"end":return e.stop()}}),Ur)}function Ks(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(D,so);case 2:case"end":return e.stop()}}),Wr)}function Qs(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(T,io);case 2:case"end":return e.stop()}}),Br)}function Js(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(k,oo);case 2:case"end":return e.stop()}}),Yr)}function Xs(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(P,no);case 2:case"end":return e.stop()}}),qr)}function Zs(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(L,ao);case 2:case"end":return e.stop()}}),Hr)}function $s(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(z,to);case 2:case"end":return e.stop()}}),Gr)}function eo(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ur.f)(ke,Po);case 2:case"end":return e.stop()}}),Kr)}function to(e){return cr.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(ur.d)((a=e.payload,{type:L,payload:a}));case 2:case"end":return t.stop()}var a}),Qr)}function ao(e){var t;return cr.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(ur.b)(Wo,e.payload);case 2:return t=a.sent,a.next=5,Object(ur.d)(Je(t));case 5:case"end":return a.stop()}}),Jr)}function no(e){var t,a,n;return cr.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=e.payload,r.next=4,Object(ur.b)(Vo,e.payload);case 4:if(200!==(a=r.sent).status){r.next=11;break}return n=a.data.pipelines,r.next=9,Object(ur.d)({type:I,payload:{projectId:t,flowsData:n}});case 9:r.next=13;break;case 11:return r.next=13,Object(ur.d)(Qe(a));case 13:r.next=19;break;case 15:return r.prev=15,r.t0=r.catch(0),r.next=19,Object(ur.d)(Qe(r.t0.response));case 19:case"end":return r.stop()}}),Xr,null,[[0,15]])}function ro(e){return cr.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(ur.d)((a=e.payload,{type:C,payload:a}));case 2:case"end":return t.stop()}var a}),Zr)}function so(e){return cr.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(ur.b)(Uo,e.payload.pipeline_id);case 2:return t.next=4,Object(ur.d)((a=e.payload,{type:O,payload:a}));case 4:case"end":return t.stop()}var a}),$r)}function oo(e){var t,a;return cr.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(ur.b)(Lo,e.payload);case 2:return t=n.sent,n.next=5,Object(ur.b)(Mo,t);case 5:return a=n.sent,n.next=8,Object(ur.d)(Ke(a));case 8:case"end":return n.stop()}}),es)}function io(e){var t;return cr.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(ur.b)(Ro,e.payload);case 2:return t=a.sent,a.next=5,Object(ur.d)(Ge(t));case 5:case"end":return a.stop()}}),ts)}function lo(e){var t;return cr.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(ur.b)(dr,e.payload);case 3:return t=a.sent,a.next=6,Object(ur.d)(He(t));case 6:return a.next=8,Object(ur.d)(Ze());case 8:return a.next=10,Object(ur.d)(Object(_r.d)("/dashboard"));case 10:a.next=16;break;case 12:return a.prev=12,a.t0=a.catch(0),a.next=16,Object(ur.d)(He(a.t0.response));case 16:case"end":return a.stop()}}),as,null,[[0,12]])}function co(){var e;return cr.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a="tokens",!(e=Gn.get(a))){t.next=8;break}return t.next=4,Object(ur.d)({type:_,payload:e});case 4:return t.next=6,Object(ur.d)(Ze());case 6:t.next=10;break;case 8:return t.next=10,Object(ur.d)({type:E,payload:null});case 10:case"end":return t.stop()}var a}),ns)}function uo(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kn("tokens"),e.prev=1,e.next=4,Object(ur.d)(st());case 4:return e.next=6,Object(ur.d)(rt());case 6:return e.next=8,Object(ur.b)(br);case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:return e.next=14,Object(ur.d)(Object(_r.d)("/"));case 14:case"end":return e.stop()}}),rs,null,[[1,10]])}function po(){var e;return cr.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ur.b)(Ao);case 3:return e=t.sent,t.next=6,Object(ur.d)({type:U,payload:e});case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(ur.d)((a=t.t0,{type:W,payload:a}));case 12:case"end":return t.stop()}var a}),ss,null,[[0,8]])}function mo(){var e;return cr.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ur.b)(Bo);case 3:return e=t.sent,t.next=6,Object(ur.d)($e(e));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(ur.d)((a=t.t0,{type:q,payload:a}));case 12:case"end":return t.stop()}var a}),os,null,[[0,8]])}function ho(e){var t,a,n;return cr.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=e.payload,r.next=4,Object(ur.b)(qo,t);case 4:return a=r.sent,r.next=7,Object(ur.e)(ks);case 7:return n=r.sent,r.next=10,Object(ur.d)((o={name:t,project_id:a,owner:n.email},{type:G,payload:o}));case 10:r.next=16;break;case 12:return r.prev=12,r.t0=r.catch(0),r.next=16,Object(ur.d)((s=r.t0,{type:K,payload:s}));case 16:case"end":return r.stop()}var s,o}),is,null,[[0,12]])}function fo(e){var t;return cr.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(ur.b)(Go,e.payload);case 3:return t=a.sent,a.next=6,Object(ur.d)(Object(_r.d)("/dashboard"));case 6:return a.next=8,Object(ur.d)({type:$,payload:t});case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(0),a.next=14,Object(ur.d)((n=a.t0,{type:ee,payload:n}));case 14:case"end":return a.stop()}var n}),ls,null,[[0,10]])}function go(e){var t,a,n,r,s,o,i,l;return cr.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,t=e.payload,a=t.projectId,n=t.name,r=t.targetUser,c.next=4,Object(ur.e)(ks);case 4:return s=c.sent,o=s.email,i=""!==r?r:o,c.next=9,Object(ur.b)(Ho,a,n,r);case 9:return l=c.sent,c.next=12,Object(ur.d)({type:J,payload:{name:n,project_id:l,owner:i,user:o}});case 12:c.next=18;break;case 14:return c.prev=14,c.t0=c.catch(0),c.next=18,Object(ur.d)((u=c.t0,{type:X,payload:u}));case 18:case"end":return c.stop()}var u}),cs,null,[[0,14]])}function bo(e){var t,a,n,r;return cr.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,a=t.projectId,n=t.newName,s.prev=1,s.next=4,Object(ur.b)(Ko,a,n);case 4:return r=s.sent,s.next=7,Object(ur.d)(nt(r,n));case 7:s.next=13;break;case 9:return s.prev=9,s.t0=s.catch(1),s.next=13,Object(ur.d)((o=s.t0,{type:ne,payload:o}));case 13:case"end":return s.stop()}var o}),us,null,[[1,9]])}function vo(){return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kn("tokens"),e.next=3,Object(ur.d)(st());case 3:return e.next=5,Object(ur.d)(rt());case 5:return e.next=7,Object(ur.d)(Object(_r.d)("/"));case 7:case"end":return e.stop()}}),ds)}function _o(e){var t,a,n;return cr.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,r.next=4,Object(ur.b)(Jo,t);case 4:return a=r.sent,n=a,r.next=8,Object(ur.d)({type:ce,payload:{projectId:t,datasets:n}});case 8:r.next=14;break;case 10:return r.prev=10,r.t0=r.catch(1),r.next=14,Object(ur.d)(it(r.t0));case 14:case"end":return r.stop()}}),ps,null,[[1,10]])}function Eo(e){var t,a,n;return cr.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,r.next=4,Object(ur.b)(Xo,t);case 4:return a=r.sent,n=a,r.next=8,Object(ur.d)({type:Pe,payload:{projectId:t,dashboards:n}});case 8:r.next=14;break;case 10:return r.prev=10,r.t0=r.catch(1),r.next=14,Object(ur.d)(it(r.t0));case 14:case"end":return r.stop()}}),ms,null,[[1,10]])}function So(e){var t,a,n,r,s,o,i;return cr.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,a=t.datasetName,n=t.projectId,r=t.file,l.prev=1,l.next=4,Object(ur.b)($o,a,n);case 4:if(s=l.sent,o=s.dataset_id,!r){l.next=10;break}return!1,l.next=10,Object(ur.b)(ei,o,a,n,r,!1);case 10:return l.next=12,Object(ur.b)(pi,o);case 12:return i=l.sent,l.next=15,Object(ur.d)(ut(i));case 15:l.next=21;break;case 17:return l.prev=17,l.t0=l.catch(1),l.next=21,Object(ur.d)((c=l.t0,{type:oe,payload:c}));case 21:case"end":return l.stop()}var c}),hs,null,[[1,17]])}function yo(e){var t,a,n,r,s,o,i;return cr.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,a=t.name,n=t.project_id,r=t.dataset_id,s=t.file,l.prev=1,l.next=4,Object(ur.b)(Zo,a,n,r);case 4:if(o=l.sent,!s){l.next=9;break}return!1,l.next=9,Object(ur.b)(ri,o.dashboard_id,s,!1);case 9:return l.next=11,Object(ur.b)(mi,o.dashboard_id);case 11:return i=l.sent,l.next=14,Object(ur.d)(dt(i));case 14:l.next=20;break;case 16:return l.prev=16,l.t0=l.catch(1),l.next=20,Object(ur.d)(pt(l.t0));case 20:case"end":return l.stop()}}),fs,null,[[1,16]])}function wo(e){var t,a,n,r,s,o;return cr.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,a=t.name,n=t.project_id,r=t.dataset_id,i.prev=1,i.next=4,Object(ur.b)(Zo,a,n,r);case 4:return s=i.sent,i.next=7,Object(ur.b)(mi,s);case 7:return o=i.sent,i.next=10,Object(ur.d)(dt(o));case 10:i.next=16;break;case 12:return i.prev=12,i.t0=i.catch(1),i.next=16,Object(ur.d)(pt(i.t0));case 16:case"end":return i.stop()}}),gs,null,[[1,12]])}function ko(e){var t,a,n,r,s,o,i;return cr.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,a=t.datasetId,n=t.projectId,r=t.file,s=t.datasetName,o=t.datasetOverwrite,l.prev=1,l.next=4,Object(ur.b)(ei,a,s,n,r,o);case 4:return l.next=6,Object(ur.b)(pi,a);case 6:return i=l.sent,l.next=9,Object(ur.d)(bt(i));case 9:l.next=15;break;case 11:return l.prev=11,l.t0=l.catch(1),l.next=15,Object(ur.d)((c=l.t0,{type:be,payload:c}));case 15:case"end":return l.stop()}var c}),bs,null,[[1,11]])}function jo(e){var t;return cr.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.prev=1,a.next=4,Object(ur.b)(li,t);case 4:return a.next=6,Object(ur.d)(ht(t));case 6:a.next=12;break;case 8:return a.prev=8,a.t0=a.catch(1),a.next=12,Object(ur.d)({type:me,payload:t});case 12:case"end":return a.stop()}}),vs,null,[[1,8]])}function Do(e){var t;return cr.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.prev=1,a.next=4,Object(ur.b)(ci,t);case 4:return a.next=6,Object(ur.d)(ft(t));case 6:a.next=12;break;case 8:return a.prev=8,a.t0=a.catch(1),a.next=12,Object(ur.d)({type:Ve,payload:t});case 12:case"end":return a.stop()}}),_s,null,[[1,8]])}function Oo(e){var t,a,n,r,s,o;return cr.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,a=t.datasetName,n=t.datasetId,r=t.projectId,s=t.file,i.prev=1,i.next=4,Object(ur.b)(ui,n,a,r);case 4:if(!s){i.next=8;break}return!0,i.next=8,Object(ur.b)(ei,n,a,r,s,!0);case 8:return i.next=10,Object(ur.b)(pi,n);case 10:return o=i.sent,i.next=13,Object(ur.d)(bt(o));case 13:i.next=19;break;case 15:return i.prev=15,i.t0=i.catch(1),i.next=19,Object(ur.d)(bt(i.t0));case 19:case"end":return i.stop()}}),Es,null,[[1,15]])}function No(e){var t,a,n,r,s,o,i;return cr.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,a=t.name,n=t.dataset_id,r=t.project_id,s=t.dashboard_id,o=t.file,l.prev=1,"",l.next=5,Object(ur.b)(di,n,a,r,s,"");case 5:if(!o){l.next=9;break}return!0,l.next=9,Object(ur.b)(ri,s,o,!0);case 9:return l.next=11,Object(ur.b)(mi,s);case 11:return i=l.sent,l.next=14,Object(ur.d)(_t(i));case 14:l.next=20;break;case 16:return l.prev=16,l.t0=l.catch(1),l.next=20,Object(ur.d)(_t(l.t0));case 20:case"end":return l.stop()}}),Ss,null,[[1,16]])}function Co(e){var t,a;return cr.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.payload,n.next=4,Object(ur.b)(Ei,t);case 4:return a=n.sent,n.next=7,Object(ur.d)({type:_e,payload:{session_id:a}});case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(0),n.next=13,Object(ur.d)((r=n.t0,{type:Ee,payload:r}));case 13:case"end":return n.stop()}var r}),ys,null,[[0,9]])}function Po(e){return cr.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ur.d)(St(e));case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),t.next=9,Object(ur.d)((a=t.t0,{type:je,payload:a}));case 9:case"end":return t.stop()}var a}),ws,null,[[0,5]])}var Io,xo=Object(Qa.a)(),Fo=Object(Ka.e)((Io=Xa,Object(Ka.c)({flowReducerState:en,userReducerState:Zn,facetReducerState:rr,router:Object(ir.b)(Io)})),{},Object(Ka.d)(Object(Ka.a)(Object(Za.a)(Xa),xo)));xo.run(js);var To=b.a.CancelToken.source(),Ao=function(){var e="".concat(h,"/get-facet-specs");return new Promise((function(t,a){Ye.get(e).then((function(e){if(200===e.status){var n=[];(function(){var e="".concat(h,"/get-facet-documentations");return new Promise((function(t,a){Ye.get(e).then((function(e){if(200===e.status){var n=e.data;t(n)}else a("Can not load facet data")}))}))})().then((function(a){n=a;var r=e.data;console.log(r),Object.keys(r).forEach((function(e){Object.keys(r[e]).forEach((function(t){Object.keys(r[e][t]).forEach((function(a){var n={};Object.keys(r[e][t][a].facet_arguments).forEach((function(s){n[r[e][t][a].facet_arguments[s].name]=r[e][t][a].facet_arguments[s]})),r[e][t][a].facet_arguments=n}))}))}));var s="",o="",i="";Object.keys(r).map((function(e){s=e,Object.keys(r[e]).map((function(t){o=t,Object.keys(r[e][t]).map((function(e){if(i=e,n[s][o][i]){var t="";Object.keys(n[s][o][i].facet_documentation).map((function(e){t+=n[s][o][i].facet_documentation[e][0],t+=" "+n[s][o][i].facet_documentation[e][1]+"\n"})),r[s][o][i].documentation=t;var a="";Object.keys(n[s][o][i].facet_examples).map((function(e){a+=n[s][o][i].facet_examples[e][1]+"\n"})),r[s][o][i].documentation=t+"Example:\n"+a}}))})),"INPUT"===s&&(r[s]=Object(Ot.a)(Object(Ot.a)({},r[s]),{},{CONNECTOR:{API:{facet_arguments:{api_template:{argument_type:"TEXT",children:{},have_options:!0,is_list:!1,is_required:!0,name:"api_template",options:["Custom","Google Sheets","Connector"]},url:{argument_type:"TEXT",children:{},have_options:!1,is_list:!1,is_required:!1,name:"url"},worksheet_index:{argument_type:"NUMBER",children:{},have_options:!1,is_list:!1,is_required:!1,name:"worksheet_index"},dataset:{argument_type:"TEXT",children:{},have_options:!1,is_list:!1,is_required:!1,name:"dataset"},columns:{argument_type:"TEXT",children:{},have_options:!1,is_list:!0,is_required:!1,name:"columns"},limit:{argument_type:"NUMBER",children:{},have_options:!1,is_list:!1,is_required:!1,name:"limit"},libraries:{argument_type:"TEXT",children:{},have_options:!1,is_list:!0,is_required:!1,name:"libraries"},script:{argument_type:"TEXT",children:{},have_options:!1,is_list:!1,is_required:!1,name:"script"}},facet_info:{chain_group:"INPUT",facet_group:"CUSTOM",facet_type:"PYTHON_SCRIPT",custom_chain_group:"INPUT",custom_facet_group:"CONNECTOR",custom_facet_type:"API"},facet_requirement:{max_child_count:1,max_parent_count:0,min_child_count:1,min_parent_count:0},in_arrow_arguments:[],out_arrow_arguments:[],documentation:"# API CONNECTOR\n> ...\n## How To Set Arguments\n### Facet Arguments\n> ...\nExample:\nhttp://d18f1dd5shmawi.cloudfront.net/images/image_input_python_script_4.png\n"}}}))})),t(r)}))}else a("Can not load facet data")}))}))},Lo=function(e){var t=e.name,a=e.projectId,n=e.definition,r={pipeline:{name:t,project_id:a,schedule:{name:"",cron:"",start_time:"",end_time:""},definition:n||{}}};return new Promise((function(e){Ye.post("".concat(h,"/create-pipeline"),r).then((function(t){e(t.data.pipeline_id)}))}))},Mo=function(e){return new Promise((function(t,a){Ye.get("".concat(h,"/get-pipeline"),{params:{pipeline_id:e}}).then((function(n){200===n.status?t(n.data):a("Could not get pipeline with id: "+e)})).catch((function(t){a("Could not get pipeline with id: "+e)}))}))},zo=function(e){return new Promise((function(t,a){Ye.post("".concat(h,"/browse-header"),e).then((function(e){200===e.status?t(e.data):a("Could not get pipeline with id: ")})).catch((function(e){e&&""!==e&&e.response&&""!==e.response?a(e.response.status):a(504)}))}))},Ro=function(e){var t={pipeline:{pipeline_id:e}};return new Promise((function(e){Ye.post("/run-pipeline",t).then((function(t){e(t.data)}))}))},Vo=function(e){var t={project_id:e};return Ye.get("/get-pipelines-for-project",{params:t})},Uo=function(e){var t={pipeline:{pipeline_id:e}};return new Promise((function(e){Ye.post("/delete-pipeline",t).then((function(t){e(t.data)}))}))},Wo=function(e){return new Promise((function(t){Ye.post("/edit-pipeline",{pipeline:e}).then((function(e){t(e.data)}))}))},Bo=function(){return new Promise((function(e,t){Ye.get("/get-projects-for-user").then((function(a){200===a.status?e(a.data.projects):t("Error loading projects")}))}))},Yo=function(e){var t={project_id:e};return new Promise((function(e,a){Ye.get("/get-project",{params:t}).then((function(t){200===t.status?e(t.data):a("Error loading projects")}))}))},qo=function(e){var t={project:{name:e}};return new Promise((function(e,a){Ye.post("/create-project",t).then((function(t){200===t.status?e(t.data.project_id):a("Error creating project.")}))}))},Ho=function(e,t,a){var n=Fo.getState(),r={project:{project_id:e,name:t},user:{email:""!==a?a:n.userReducerState.email}};return new Promise((function(e,t){Ye.post("/duplicate-project",r).then((function(a){200===a.status?e(a.data.project_id):t("Error duplicating project.")})).catch((function(e){t(e.response.status)}))}))},Go=function(e){var t={project:{project_id:e}};return new Promise((function(e,a){Ye.post("/delete-project",t).then((function(t){200===t.status?e(t.data.project_id):a("Error deleting project.")}))}))},Ko=function(e,t){var a={project:{project_id:e,name:t,owner:Fo.getState().userReducerState.email}};return new Promise((function(e,t){Ye.post("/edit-project",a).then((function(a){200===a.status?e(a.data.project_id):t("Error renaming project.")}))}))},Qo=function(e,t){var a={project:{project_id:e},user:{email:t}};return new Promise((function(e,t){Ye.post("/share-project",a).then((function(a){200===a.status?e(a):t("Error: Unable to share project!")})).catch((function(e){t(e.response.status)}))}))},Jo=function(e){var t={project_id:e};return new Promise((function(e,a){Ye.get("/get-datasets-for-project",{params:t}).then((function(t){200===t.status?e(t.data.datasets):a("Erorr: Unable to get datasets for project!")}))}))},Xo=function(e){var t={project_id:e};return new Promise((function(e,a){Ye.get("/get-dashboards-for-project",{params:t}).then((function(t){200===t.status?e(t.data.dashboards):a("Erorr: Unable to get dashboards for project!")}))}))},Zo=function(e,t,a){var n={dashboard:{dataset_id:a,name:e,project_id:t}};return new Promise((function(e,t){Ye.post("/create-dashboard",n).then((function(a){200===a.status?e(a.data):t("Unable to create dashboard")}))}))},$o=function(e,t){var a={dataset:{name:e,project_id:t}};return new Promise((function(e,t){Ye.post("/create-dataset",a).then((function(a){200===a.status?e(a.data):t("Unable to create dataset")}))}))},ei=function(e,t,a,n,r){var s=function(){Fo.dispatch(gt(a,e,t,n))},o=function(){Fo.dispatch(mt(e))};Fo.dispatch(vt(0,e,t,"uploading",s,o)),ti(e,n.name).then((function(a){Fo.dispatch(vt(0,e,t,"uploading",s,o));ai(a.url,a.content_type,n,(function(a){Fo.dispatch(vt(a,e,t,"uploading",s,o))})).then((function(a){Fo.dispatch(vt(100,e,t,"Processing",s,o)),ni(e,n.name).then((function(a){Fo.dispatch(vt(100,e,t,"complete",s,o))})).catch((function(a){Fo.dispatch(vt(0,e,t,"failed",s,o))}))})).catch((function(a){Fo.dispatch(vt(0,e,t,"failed",s,o))}))})).catch((function(a){Fo.dispatch(vt(0,e,t,"failed",s,o))}))},ti=function(e,t){var a={dataset_id:e,filename:t};return new Promise((function(e,t){Ye.get("/get-dataset-upload-url",{params:a}).then((function(a){200===a.status?e(a.data):t("Erorr: Unable to get getDatasetUploadUrl!")}))}))},ai=function(e,t,a,n){var r={headers:{"Content-Type":t},onUploadProgress:function(e){var t=100*e.loaded/e.total;n(t)}};return new Promise((function(t,n){b.a.put(e,a,r).then((function(e){200===e.status?t(e.data):n("Erorr: Unable to upload Dataset file!")})).catch((function(e){n("Erorr: Unable to upload Dataset file!")}))}))},ni=function(e,t){var a={dataset_id:e,filename:t};return new Promise((function(e,t){Ye.get("/confirm-dataset-upload",{params:a}).then((function(a){200===a.status?e(a.data):t("Erorr: Unable to get confirmDatasetUpload!")})).catch((function(e){t("Erorr: Unable to get confirmDatasetUpload!")}))}))},ri=function(e,t,a){si(e,t.name).then((function(a){oi(a.url,a.content_type,t).then((function(a){ii(e,t.name).then((function(e){}))}))}))},si=function(e,t){var a={dashboard_id:e,filename:t};return new Promise((function(e,t){Ye.get("/get-dashboard-upload-url",{params:a}).then((function(a){200===a.status?e(a.data):t("Erorr: Unable to get Dashboard upload link!")}))}))},oi=function(e,t,a){var n={headers:{"Content-Type":t}};return new Promise((function(t,r){b.a.put(e,a,n).then((function(e){200===e.status?t(e.data):r("Erorr: Unable to upload Dashboard file!")}))}))},ii=function(e,t){var a={dashboard_id:e,filename:t};return new Promise((function(e,t){Ye.get("/confirm-dashboard-upload",{params:a}).then((function(a){200===a.status?e(a.data):t("Erorr: Unable to get download confirmation!")}))}))},li=function(e){var t={dataset:{dataset_id:e}};return new Promise((function(e,a){Ye.post("/delete-dataset",t).then((function(t){200===t.status?e(t.data):a("Unable to delete dataset")}))}))},ci=function(e){var t={dashboard:{dashboard_id:e}};return new Promise((function(e,a){Ye.post("/delete-dashboard",t).then((function(t){200===t.status?e(t.data):a("Unable to delete dashboard")}))}))},ui=function(e,t,a){var n={dataset:{dataset_id:e,name:t,project_id:a}};return new Promise((function(e,t){Ye.post("/edit-dataset",n).then((function(a){200===a.status?e(a.data):t("Unable to edit dataset")}))}))},di=function(e,t,a,n,r){var s={dashboard:{dataset_id:e,name:t,project_id:a,dashboard_id:n,filename:r}};return new Promise((function(e,t){Ye.post("/edit-dashboard",s).then((function(a){200===a.status?e(a.data):t("Unable to edit dashboard")}))}))},pi=function(e){return new Promise((function(t,a){Ye.get("/get-dataset",{params:{dataset_id:e}}).then((function(e){200===e.status?t(e.data):a("Unable to get dataset")}))}))},mi=function(e){return new Promise((function(t,a){Ye.get("/get-dashboard",{params:{dashboard_id:e}}).then((function(e){200===e.status?t(e.data):a("Unable to get dashboard")}))}))},hi=function(e,t,a){var n={headers:{Accept:a,"Content-Type":"application/json"},transformRequest:function(e,t){return t.Accept=a,t["Content-Type"]="application/json",e},transformResponse:function(e,t){return t.responseType="blob",e}};return new Promise((function(a,r){try{fetch(e,n).then((function(e){if(e.ok)return e.blob();r("Erorr: Unable to download Dataset!")})).then((function(e){a({blobFile:e,fileName:t})}))}catch(s){r("Erorr: Unable to download Dataset!")}}))},fi=function(e,t){var a={dataset_id:e,project_id:t};return new Promise((function(e,t){Ye.post("/browse-dataset",a,{cancelToken:To.token}).then((function(a){200===a.status?e(a.data.url):t(a.status)})).catch((function(e){t(e)}))}))},gi=function(){return new Promise((function(e,t){Ye.get("/get-clean-dataset-options").then((function(a){200===a.status?e(a):t("Error: Unable to get dataset functionalities!")})).catch((function(e){t(e)}))}))},bi=function(e){var t={dataset_id:e};return new Promise((function(e,a){Ye.get("/get-dataset-header",{params:t}).then((function(t){200===t.status?e(t.data):a("Error: Unable to get dataset header!")})).catch((function(e){a(e)}))}))},vi=function(e,t,a,n,r,s){var o={};return o=""===n&&""===r&&""===s?{dataset_id:e,option:a,arguments:{}}:""!==n&&""===r&&""===s?{dataset_id:e,option:a,arguments:{column_name:n}}:{dataset_id:e,option:a,arguments:{column_name:n,uniformization_type:r,uniformization_format:s}},new Promise((function(e,t){Ye.post("/clean-dataset",o).then((function(a){200===a.status?e(a.data):t(a.status)})).catch((function(e){e&&""!==e&&e.response&&""!==e.response?t(e.response.status):t(504)}))}))},_i=function(e,t,a,n){var r={dataset_id:e,new_dataset_name:a};return new Promise((function(e,t){Ye.post("/save-dataset",r).then((function(a){200===a.status?e(a.data):t(a.status)})).catch((function(e){e&&""!==e&&e.response&&""!==e.response?t(e.response.status):t(504)}))}))},Ei=function(e){var t={project:{project_id:e}};return new Promise((function(e,a){Ye.post("/enter-session",t,{cancelToken:To.token}).then((function(t){200===t.status?e(t.data.session_id):a(t.status)})).catch((function(e){b.a.isCancel(e)?console.log("post Request canceled"):a(e)}))}))},Si=function(e){var t={project:{project_id:e}};return Ye.post("/exit-session",t)},yi=function(e,t,a,n){var r={pipeline_id:e,project_id:t,facet_id:a,parent_facet_id:n};return new Promise((function(e,t){Ye.post("/browse-facet",r).then((function(a){200===a.status?e(a.data):t(a.status)})).catch((function(e){e&&""!==e&&e.response&&""!==e.response?t(e.response.status):t(504)}))}))},wi=function(e,t,a,n){var r={pipeline_id:e,project_id:t,facet_id:a,parent_facet_id:n};return new Promise((function(e,t){Ye.post("/finish-browse-facet",r).then((function(a){200===a.status?e(a):t(a)})).catch((function(e){t(e.response.status)}))}))},ki=function(e,t,a,n){var r={pipeline_id:e,project_id:t,facet_id:a,parent_facet_id:n};return new Promise((function(e,t){Ye.post("/save-facet",r).then((function(a){200===a.status?e(a):t(a)})).catch((function(e){t(e.response.status)}))}))},ji=function(e,t){var a={dashboard_id:e,project_id:t};return new Promise((function(e,t){Ye.post("/finish-browse-dashboard",a).then((function(a){200===a.status?e(a):t(a)})).catch((function(e){t(e.response.status)}))}))},Di=function(e,t,a,n){var r={pipeline_id:e,project_id:t,source_facet_id:a,destination_facet_id:n};return new Promise((function(e,t){Ye.post("/browse-header",r).then((function(a){200===a.status?e(a):t(a)})).catch((function(e){t(e.response.status)}))}))},Oi=function(e,t,a,n){var r={pipeline_id:e,project_id:t,source_facet_id:a,destination_facet_id:n};return new Promise((function(e,t){Ye.post("/browse-arrow",r).then((function(a){200===a.status?e(a.data):t(a.status)})).catch((function(e){e&&""!==e&&e.response&&""!==e.response?t(e.response.status):t(504)}))}))},Ni=function(e,t){var a={dashboard_id:t,project_id:e};return new Promise((function(e,t){Ye.post("browse-dashboard",a).then((function(a){200===a.status?e(a.data):t(a.status)})).catch((function(e){e&&""!==e&&e.response&&""!==e.response?t(e.response.status):t(504)}))}))},Ci=function(e,t,a,n){var r={pipeline_id:e,project_id:t,facet_id:a,parent_facet_id:n};return new Promise((function(e,t){Ye.post("/finish-browse-arrow",r).then((function(a){200===a.status?e(a):t(a)})).catch((function(e){t(e.response.status)}))}))},Pi=function(e,t,a,n){var r={pipeline_id:e,project_id:t,source_facet_id:a,destination_facet_id:n};return new Promise((function(e,t){Ye.post("/peek-arrow",r).then((function(a){200===a.status?e(a.data):t(a.status)})).catch((function(e){e&&""!==e&&e.response&&""!==e.response?t(e.response.status):t(504)}))}))},Ii=function(e){var t={pipeline_id:e};return new Promise((function(e,a){Ye.get("".concat(h,"/is-pipeline-running"),{params:t}).then((function(t){200===t.status?e(t):a("Error: Unable to check if pipeline is running!")}))}))},xi=function(e,t,a,n){var r={project_id:e,pipeline_id:t,count:a,status:n};return new Promise((function(e,t){Ye.get("/get-past-schedule-for-user",{params:r}).then((function(a){200===a.status?e(a.data):t(a.status)}))}))},Fi=function(e,t,a,n){var r={project_id:e,pipeline_id:t,count:a,status:n};return new Promise((function(e,t){Ye.get("/get-past-schedule-for-project",{params:r}).then((function(a){200===a.status?e(a.data):t(a.status)}))}))},Ti=function(e,t,a,n){var r={project_id:e,pipeline_id:t,count:a,status:n};return new Promise((function(e,t){Ye.get("/get-past-schedule-for-pipeline",{params:r}).then((function(a){200===a.status?e(a.data):t(a.status)}))}))},Ai=function(e,t,a,n){var r={project_id:e,pipeline_id:t,count:a,status:n};return new Promise((function(e,t){Ye.get("/get-upcoming-schedule-for-user",{params:r}).then((function(a){200===a.status?e(a.data):t(a.status)}))}))},Li=function(e,t,a,n){var r={project_id:e,pipeline_id:t,count:a,status:n};return new Promise((function(e,t){Ye.get("/get-upcoming-schedule-for-project",{params:r}).then((function(a){200===a.status?e(a.data):t(a.status)}))}))},Mi=function(e,t,a,n){var r={project_id:e,pipeline_id:t,count:a,status:n};return new Promise((function(e,t){Ye.get("/get-upcoming-schedule-for-pipeline",{params:r}).then((function(a){200===a.status?e(a.data):t(a.status)}))}))},zi=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).apiPython={url:"",worksheet_index:1,dataset:"",columns:"",limit:"",api_parameters:{}},e.googleSheetsLibraries=["gspread","oauth2client"],e.googleSheetsPScript={handle_Import:"import os \nimport json \nimport gspread \nfrom oauth2client.service_account import ServiceAccountCredentials  \nimport pandas as pd",handle_Json:'jsonfile2 = json.dumps(json_meta) \n\nwith open("jsonfile3.json", "w") as json_file: json.dump(json_meta, json_file)',handle_Pandas:'\n\nscope = ["https://spreadsheets.google.com/feeds","https://www.googleapis.com/auth/drive"]',handle_Credentials:'\n\ncredentials = ServiceAccountCredentials.from_json_keyfile_name("jsonfile3.json", scope)',handle_Authorize:"\n\ngc = gspread.authorize(credentials)",handle_Data:"\n\nwks = gc.open_by_url(url) \nsh = wks.get_worksheet(worksheet_index) \ndf = sh.get_all_values() \ndf2 = pd.DataFrame(df) \n## Fix Headers Here \nheader = df2.iloc[0] \ndf2 = df2[1:] \ndf2.columns = header \nresult = df2"},e.googleSheetsParameters=[{name:"type",value:""},{name:"project_id",value:""},{name:"private_key_id",value:""},{name:"private_key",value:""},{name:"client_email",value:""},{name:"client_id",value:""},{name:"auth_uri",value:""},{name:"token_uri",value:""},{name:"auth_provider_x509_cert_url",value:""},{name:"client_x509_cert_url",value:""}],e.bigQueryLibraries=["google-cloud-storage","google-cloud-bigquery"],e.bigQueryPScript={handle_Import:"import pandas as pd \nimport os \nimport json \nimport tempfile \nfrom google.cloud import bigquery \nfrom google.oauth2 import service_account \nfrom dateutil.parser import parse",handle_Json:"json_object = json.dumps(json_meta) ",handle_Pandas:'\n\nfd, path = tempfile.mkstemp() \nwith os.fdopen(fd, "w") as tmp: \n  tmp.write(json_object)',handle_Credentials:'\n\nos.environ["GOOGLE_APPLICATION_CREDENTIALS"] = path',handle_Authorize:"",handle_Columns:"columns = ''",handle_Dataset:"dataset = ''",handle_Limit:"limit = ''",handle_Data:'\n# EDIT QUERY HERE \nQUERY = """ \n  SELECT {0} \n  FROM {1} \n  LIMIT {2} """.format(columns, dataset, limit) \n\nclient = bigquery.Client() \nquery_job = client.query(QUERY) \ndf = query_job.to_dataframe() \nresult = df \n'},e.customParametersLibraries=[],e.state={attributesTypes:{},attributes:{},open:!1,facetType:"",chainGroup:"",facetGroup:"",title:"",showColumNamesChips:"",createDatasetClicked:!1,newlyAddedDatasetNameExists:!1,newlyAddedDatasetName:"",newlyAddedDatasetID:"",autoSaveSaved:!1,autoSaveTimeout:null,newlyAddedDashboardNameExists:!1,newlyAddedDashboardName:"",newlyAddedDashboardID:"",associatedDatasetAttribute:[],customFacetName:"",suggestColumnNames:[],noColOptionsText:"Loading columns...",buttonGroupValue:"config",showApiParameters:!1,apiUrl:"",apiParameters:{},apiPython:"",apiTemplate:""},e.outputDatasetId="",e.bucketDefaultValueForDataset="pypr-datasets",e.constructGSheetPScript=function(t){var a=t.url?t.url:"url = ''",n=t.worksheet_index?t.worksheet_index:"worksheet_index = ''";var r="";return r+=e.googleSheetsPScript.handle_Import,r+="\n",r+="\n"+a,r+="\n"+n,r+="\n",r+="\njson_meta = {\n  'type': 'service_account',\n  'project_id': 'ikigai-281320',\n  'private_key_id': 'fdf97c1f23d07d0abfa7187c3176ce6bfc1c3c03',\n  'private_key': \"\"\"-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCb5nVf1rx/XvkH\nYR2/X9O/Nr18OvObKlCoG6kZYKMj7qLoIJlZL7fqiFpT4VvcuL59Kokqn4s/9TDs\noMlIS3bwlT2wqOwHXiqt5vVFwqhvSnlGUKjILcGNZsRd7zn6zu/jpFDBiKjecMAY\nPV/sp/qAFS6XHX7t0ZplFkKL7PACBDJy0fYlihLubPTFXJ4QJRMSJ0uiI3AzmDCJ\n4Ll7SwkI4EUqZSh6R/mgcTjHhRvR+hM6veR638VNer1bX6CkP6eZb7yOhcZ3KDGO\nyQtV4THreCsffE/zeSt9OwLBftecAuvMynW7au7W1Rp6eZvWqGfSIfBMTb+i2QWA\nPFUobzdFAgMBAAECggEAJD9FfAZ75itpQCd62KOJonQyQz+bozCH90YTH3TiCXkz\nBECMFvnqy4tvYQBNMPj9RTHOGYxlvnWeLe5GTlpJaa9xW/Eyi5X/21YPIeyb5+BL\naSdYzs4gqeVCc8qq0t8pVGbAZfcFuE5Dw38FngsCSaRjJDx15gptWOJ/j3QD65u8\nPlorRfFDEUs3KXUQdw+5kGcQfzbRfT61uZLxe3NsZUcVsxfJ70TzsN6Hwbmp1MvL\nKoTH9WodsfEpfi+FVFkqfhelxaQd4mVf3U+P3poj7CrGZT59Y/d1SjkAagSy0ZiZ\nnwZx697Z+b84GD9MNhTlyxUm/WCSbKxMNXdUe+PecQKBgQDPaqM1/iUUW83Thn8E\nIEpXdH0Kvfm3XonopXSuGygHu2vb9FrmoQJ7ls1dT43XqRMOA1NpkvJR/luUbY3B\nNMvZnSDB8grNxmKBa1KpA8iIZZ3Y14cFOnl/f64juDODdbcxkHVDBQH2XCIsaCWx\nrEvPvFwRb57fP5Wcz472RhaB+QKBgQDAarya1ncUhZipkC1QNqp+/zlsBbM/roDa\neSWj7WGmHzyIShEPn0cJ5dE9/eTGs5kf8Omx7ugue/ToRjMOUd3RxzdRR+7UDnTs\nQ9SD3mx0fqz1Zfl27y7xz5h4RC/jOBKANEAl1FxsUXM3VNfo5ihYnMz8ArxNtsJD\nqDWD/jzyrQKBgQC7ZhGIGtLNjhRs5Lulsrb4RRsktXgFILlhJPxCwe5s7f0JgcEP\nVrGzkBCEGfiBvRSmOIMIg+fEBRghBspooZb8SmbqVBFG0dL2M00/v1dTRNxUqoYn\nRym29FkVlLuWLqkRcv8/Sir3t0546LAF0zG7wuc8KalU81Htl+oGwFRdoQKBgE65\nHLMIva2CvyPYngFsbDMLPrYIWv7Z6VP5LsIzs7jgnMZx7ysCEnFlOkdvofL9tc9Q\npHws74ddJaUGW4snSWazZ9l0Ya0WwRWM5tyQ2rSKwz6fWwIi94TtV0cVNrZy0Xbs\nabZQfQPACzB/INrjl2wxstgEUoBFHpPJtSNsmAj9AoGAJQhqhUl6sxR0HFnrQQsc\ngDIApnTqvS/UuBc33e4QM5o6BpZch2aVhkmhflfQ2qVWV8PJUrkfbIhkiSmVmuXw\n2OuRn+BfnJXsomsKy5A94wNwxwv8Fr6rc21Asb8EkmembiWnZe6UrZ1uNY8PVCiD\nkl5sjqJYNo3vi0WoraM21Os=\n-----END PRIVATE KEY-----\"\"\",\n  'client_email': 'gsheet@ikigai-tableau.iam.gserviceaccount.com',\n  'client_id': '109244888655482857194',\n  'auth_uri': 'https://accounts.google.com/o/oauth2/auth',\n  'token_uri': 'https://oauth2.googleapis.com/token',\n  'auth_provider_x509_cert_url': 'https://www.googleapis.com/oauth2/v1/certs',\n  'client_x509_cert_url': 'https://www.googleapis.com/robot/v1/metadata/x509/gsheet%40ikigai-tableau.iam.gserviceaccount.com'\n}",r+="\n\n",r+=e.googleSheetsPScript.handle_Json,r+=e.googleSheetsPScript.handle_Pandas,r+=e.googleSheetsPScript.handle_Credentials,r+=e.googleSheetsPScript.handle_Authorize,r+=e.googleSheetsPScript.handle_Data},e.constructBQueryPScript=function(t){var a=t.dataset?t.dataset:"dataset = ''",n=t.columns?t.columns:"columns = ''",r=t.limit?t.limit:"limit = ''";var s="";return s+=e.bigQueryPScript.handle_Import,s+="\n",s+="\njson_meta = {\n  'type': 'service_account',\n  'project_id': 'ikigai-281320',\n  'private_key_id': 'e6f4a095bad2816b780d77b1e25e32d0f83009db',\n  'private_key': \"\"\"-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQC/C1Xnth0eGY2A\nVsKGUhECsDd2hu0gA6e7+x1Vw7e5WROdJUXJ/0GAyJ2DP4RTl9+cBGA8+JxmPz7o\nYFntCY9VWJxBdhIlicITZR/c+ASU5hr0m2Lo5wPVCCBrDdxUOjKLoaA+jkNA/orS\nlaJDRnQgWSmN9SNH8af9ecljFi9XBJFCSThAyyb8Cuur5qe14SpbkY9gEsMB2v42\nlY6HJpANyFYp07RFjik24VjF3S6R0GQQdVkVdEozu81GcK1PtE4EEJfb15Cw714J\n352JRdKHBDiFq9jb/piGZYAQVp2qxEbuZr5XSLOTMF45RVQHfsDSsm5ktqZApQkU\nA+vM5DDlAgMBAAECggEAGWnanZ4+NVjU1/OyoMed96uVVTERriaOU5VOC7CjagaN\nc2QX6o0IG6eUPHdglPYpCsoSO0ofFALpzWOz0rJo3MOS1aptM40lwgq7uFtN0Ljj\ncRKSj8TbX6VbGqKXYqTzQFvZwziNfcHembDKCwT+QadavcWUUee1nyRqQ8IZvgtk\no6QO279poau0mP4t+BaY1kan6NMOBlH84IVORI4dNz1mnRmbzA9YkcoHFg43LN8H\nJkaxFMUdDCS9yvtaStPgrEcI0mpB3TSjbpIOOX216k+WYsD07fn6M12eq7ofniaj\nf3sEYNf0vurNAYQWa5tZjjXGGDQuwmUJ1UQj3bBlaQKBgQDjG7P+s7bOKLIq8u4S\nQOrnJjVCxytUqZFVMLAsxDu2CTGiv2n25C48FewlUGIxsL6fQwIzIe6jf/lbzSTc\nWD2YKyDHsM3eAL/IxmKFJwOCaS5b7YP6/SYKY2oovOpqoSbJpqMDzjeLMBwY/OR2\nSCnTEQnmFov9h+XIShLFCPXoJwKBgQDXWSDPI8Uyy8pEqo9BHTRA1WmB/0yYpe1c\nmgFfW4sDNLp4nPjlF0imrePZqOOMUocq5OMp19rfVr0o1YagGUli29K1wZZnluro\n+cx5PcpJxe6+C5Pg9Kqft0coxdy+Vbh00eFVDkE1z3KXcn6VwSi6+ACd+h4BCIHQ\n16BsqHAaEwKBgE71NboKvzajvXXjKdQcz853YTMLTcxMe+OzXrzhqKTcQ26CwBN/\nN3faY1SBwvHlshBq2pvuYypi9s3s37Df2OJLtETY+moBtqvWFTCX5Md1TBHX3Pfp\nBU29TI5HR/S0fGjFT42mJ3dzzYD+g2uAIVJpbRiapCcMFV5yKl5ohB4nAoGBAL18\n9Kyv+f5HadTgC6utCeSepPc5cOnE30ajUN/aikio5gfpf+z9fvUDf8FvpcI8gCmT\nO/v+rt3k0g+TS6GmfneZnCBIlpLSLiQQYgaxA0XE/92EDHxebaCaQegzqphkjylj\n4JXaNDEoN9nhaldVnwRd4xUfF7WrCad9hPD3iaS3AoGBALxVpx4hWfX4kVLM7ucR\n/iPuc8c8Km+Xu8WsP8167OLR3e6xw66CbNuKJdWzrg1YnDbCxnq5uRl2mkAyAI6z\n1YqL2zGwNNUhaOahBZrNkTwY7KU77xqbgBSHBybTCpX4Wb9l5HelVonOPhSoCavQ\nxEVOPMTKOn1S1nDlbsky3/3c\n-----END PRIVATE KEY-----\"\"\",\n  'client_email': 'ikigai-custom-import@ikigai-281320.iam.gserviceaccount.com',\n  'client_id': '116606549606221557577',\n  'auth_uri': 'https://accounts.google.com/o/oauth2/auth',\n  'token_uri': 'https://oauth2.googleapis.com/token',\n  'auth_provider_x509_cert_url': 'https://www.googleapis.com/oauth2/v1/certs',\n  'client_x509_cert_url': 'https://www.googleapis.com/robot/v1/metadata/x509/ikigai-custom-import%40ikigai-281320.iam.gserviceaccount.com'\n}",s+="\n\n",s+=e.bigQueryPScript.handle_Json,s+=e.bigQueryPScript.handle_Pandas,s+=e.bigQueryPScript.handle_Credentials,s+=e.bigQueryPScript.handle_Authorize,s+="\n",s+="\n"+a,s+="\n"+n,s+="\n"+r,s+="\n",s+=e.bigQueryPScript.handle_Data},e.constructCustomParameters=function(e){e.api_parameters;return"",""},e.constructGSheetParameters=function(){e.state.attributes},e.getAttributes=function(t){if(e.state&&e.state.attributesTypes&&Object.keys(e.state.attributesTypes).length>0){var a=e.state.attributesTypes;if(""===e.state.chainGroup&&""===e.state.facetGroup&&""===e.state.facetType)if(a.title1){var n=a.title1.title1,s=a.title1.title1.split("/"),o=s[0],i=s[1];e.setState({chainGroup:o,facetGroup:i,facetType:n}),delete a.title1}else if(a.title2){n=a.title2.title2;var l=a.title2.title1.split("/");o=l[0],i=l[1];e.setState({chainGroup:o,facetGroup:i,facetType:n}),delete a.title2}var c={},u={};return"Dataset"===e.state.facetGroup&&"Imported"===e.state.facetType?(Object.keys(a).map((function(e){return"dataset_id"===e?u[e]=a[e]:c[e]=a[e],""})),c.dataset_id=u.dataset_id):c=a,"Imported"===e.state.facetType&&"Dataset"===e.state.facetGroup&&"Input"===e.state.chainGroup?Object.keys(c).filter((function(e){return"overwrite"!==e&&"project_id"!==e&&"user_email"!==e&&"dashboard_id"!==e})).map((function(n){var r=a[n];return void 0!==r?e.getInputComponent(t,e.state.attributes[n],r.name,n,r):""})):"Dash"===e.state.facetType&&"Dashboard"===e.state.facetGroup&&"Output"===e.state.chainGroup?Object.keys(c).filter((function(e){return"overwrite"!==e&&"project_id"!==e&&"user_email"!==e&&"dashboard_id"!==e&&"dataset_name"!==e})).map((function(n){var r=a[n];return void 0!==r?e.getInputComponent(t,e.state.attributes[n],r.name,n,r):""})):Object.keys(c).filter((function(e){return"overwrite"!==e&&"project_id"!==e&&"user_email"!==e&&"dashboard_id"!==e&&"dataset_id"!==e})).map((function(n){var r=a[n];return void 0!==r?e.getInputComponent(t,e.state.attributes[n],r.name,n,r):""}))}return r.a.createElement(Pt.a,{mb:2},"No attributes")},e.getAttributesForAPIFacet=function(t,a){if(!(e.state&&e.state.attributesTypes&&Object.keys(e.state.attributesTypes).length>0))return r.a.createElement(Pt.a,{mb:2},"No attributes");var n=e.state.attributesTypes;return a&&"api-facet-left"===a?"Google Sheets"===e.state.attributes.api_template?Object.keys(n).filter((function(e){return"libraries"!==e&&"script"!==e&&"dataset"!==e&&"columns"!==e&&"limit"!==e&&"api_parameters"!==e})).map((function(a){var r=n[a];if(void 0!=r)return e.getInputComponent(t,e.state.attributes[a],r.name,a,r)})):"BigQuery"===e.state.attributes.api_template||"Connector"===e.state.attributes.api_template?Object.keys(n).filter((function(e){return"libraries"!==e&&"script"!==e&&"url"!==e&&"api_parameters"!==e&&"worksheet_index"!==e})).map((function(a){var r=n[a];if(void 0!=r)return e.getInputComponent(t,e.state.attributes[a],r.name,a,r)})):Object.keys(n).filter((function(e){return"libraries"!==e&&"script"!==e&&"dataset"!==e&&"columns"!==e&&"limit"!==e&&"url"!==e&&"worksheet_index"!==e})).map((function(a){var r=n[a];if(void 0!=r)return e.getInputComponent(t,e.state.attributes[a],r.name,a,r)})):a&&"api-facet-right"===a?Object.keys(n).filter((function(e){return"url"!==e&&"api_template"!==e&&"dataset"!==e&&"columns"!==e&&"limit"!==e&&"api_parameters"!==e&&"worksheet_index"!==e})).map((function(a){var r=n[a];if(void 0!=r)return e.getInputComponent(t,e.state.attributes[a],r.name,a,r)})):a&&"api-facet-top"===a?Object.keys(n).filter((function(e){return"url"!==e&&"libraries"!==e&&"script"!==e&&"dataset"!==e&&"columns"!==e&&"limit"!==e&&"api_parameters"!==e&&"worksheet_index"!==e})).map((function(a){var r=n[a];if(void 0!=r)return e.getInputComponent(t,e.state.attributes[a],r.name,a,r)})):void 0},e.getNestedInputComponent=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return Object.keys(t).map((function(s){var o,i=t[s];if(o=-1!==n?e.state.attributes[a]&&e.state.attributes[a][n]&&e.state.attributes[a][n][s]?e.state.attributes[a][n][s]:"":e.state.attributes[a]&&e.state.attributes[a][s]?e.state.attributes[a][s]:"","TEXT"===i.argument_type){if(i.have_options)return r.a.createElement(Na,{_required:i.is_required,_error:i.error?"Required":"",_label:ja(s),_placeholder:"Select "+ja(s),_type:"text",_autoComplete:"new-password",_value:o||"",_isSelect:!0,_fullWidth:!0,_selectOptions:i.options,_selectOptionsKeyForVal:"",_selectOptionsKeyForTxt:"",_onChange:function(t){e.onUpdatedNestedComponent(t,a,s,n)}});if("column_name"===i.name){return""!==o&&void 0!==o?ja(o):"",r.a.createElement(Pt.a,{my:2,style:{width:"100%"}},r.a.createElement(Ga,{_label:ja(i.name),_placeholder:"Type to search "+ja(i.name),_value:o||"",_selectOptions:e.state.suggestColumnNames.sort(),_noOptionsText:e.state.noColOptionsText,_fullWidth:!0,_keyValue:"",_nameValue:"",_onChange:function(t,r){return e.onNestedSelectColumn(r,i.name,a,s,n)}}))}return r.a.createElement(Na,{key:"ikinput-"+s,_label:ja(s),_placeholder:"Enter "+ja(s),_type:"text",_autoComplete:"new-password",_value:o,_onChange:function(t){e.onUpdatedNestedComponent(t,a,s,n)},_fullWidth:!0,_required:i.is_required,_error:i.error?"Required":""})}if("BOOLEAN"===i.argument_type)return r.a.createElement(Na,{key:"ikinput-"+s,_required:t.is_required,_error:t.error?"Required":"",_label:ja(s),_placeholder:"Select "+ja(s),_type:"text",_autoComplete:"new-password",_value:void 0!==o?!0===o?"true":"false":"",_isSelect:!0,_fullWidth:!0,_selectOptions:["","true","false"],_selectOptionsKeyForVal:"",_selectOptionsKeyForTxt:"",_onChange:function(t){e.onUpdatedNestedComponent(t,a,s,n)}})}))},e.getNestedInput=function(t,a){return t.is_list?t.children.map((function(n,s){return"API"===e.props.customFacetType?r.a.createElement("div",{className:"flow-nested-input-group api-facet",key:s},r.a.createElement(It.a,{color:"primary","aria-label":"delete",size:"small",className:"flow-nested-delete-btn",disabled:1===t.children.length,onClick:function(){e.deleteNestedInputGroup(t,a,s)}},r.a.createElement(qt.a,null)),e.getNestedInputComponent(n,a,s)):r.a.createElement("div",{className:"flow-nested-input-group",key:s},r.a.createElement(It.a,{color:"primary","aria-label":"delete",size:"small",className:"flow-nested-delete-btn",disabled:1===t.children.length,onClick:function(){e.deleteNestedInputGroup(t,a,s)}},r.a.createElement(qt.a,null)),e.getNestedInputComponent(n,a,s))})):e.getNestedInputComponent(t.children,a)},e.getInputComponent=function(t,a,s,o,i){if("title"===i.argument_type)return r.a.createElement(Pt.a,{className:"dialog-title default-color",mb:2},r.a.createElement("div",{className:"chain-and-group"},r.a.createElement("span",{className:"chain-group-title"},i.title1)),r.a.createElement("div",{className:"facet-title"},i.title2));if("MAP"===i.argument_type)return r.a.createElement(n.Fragment,null,"API"===e.props.customFacetType?"Custom"===e.state.attributes.api_template&&e.state.showApiParameters?r.a.createElement("div",{className:"flow-nested-arg",key:s},r.a.createElement("div",{className:"flow-nested-arg-title"},"API"===e.props.customFacetType?r.a.createElement("div",{className:"flow-nested-arg-label"},ja(s)):r.a.createElement("div",{className:"flow-nested-arg-label"},s),i.is_list&&r.a.createElement(ua,{_disabled:3===i.children.length,_variant:"text",_color:"default",_label:"Add",_type:"button",_fullWidth:!1,_startIcon:r.a.createElement(Bt.a,null),_onClick:function(){return e.addNestedInputGroup(i,s)}})),e.getNestedInput(i,s)):"":r.a.createElement("div",{className:"flow-nested-arg",key:s},r.a.createElement("div",{className:"flow-nested-arg-title"},"API"===e.props.customFacetType?r.a.createElement("div",{className:"flow-nested-arg-label"},ja(s)):r.a.createElement("div",{className:"flow-nested-arg-label"},s),i.is_list&&r.a.createElement(ua,{_disabled:3===i.children.length,_variant:"text",_color:"default",_label:"Add",_type:"button",_fullWidth:!1,_startIcon:r.a.createElement(Bt.a,null),_onClick:function(){return e.addNestedInputGroup(i,s)}})),e.getNestedInput(i,s)));if("TEXT"===i.argument_type){if(i.have_options){var l;if("table_side"===s)e.state.attributes[s]&&(l=e.state.attributes[s],i.options.forEach((function(e,t){e===l&&(a=l)})));return r.a.createElement(Na,{key:"ikinput-"+s,_required:i.is_required,_error:i.error?"Required":"",_label:ja(s),_placeholder:"Select "+ja(s),_type:"text",_autoComplete:"new-password",_value:a||"",_isSelect:!0,_fullWidth:!0,_selectOptions:i.options,_selectOptionsKeyForVal:"",_selectOptionsKeyForTxt:"",_onChange:function(e){t(o,s,e,i.argument_type)}})}if(!i.is_list){if("dataset_id"===s||"IMPORTED"===e.props.facetType){return r.a.createElement("div",{key:s},r.a.createElement(Na,{key:"ikinput-"+s,_required:i.is_required,_error:i.error?"Required":"",_label:"Dataset Name",_placeholder:"Select Dataset Name",_type:"text",_autoComplete:"new-password",_value:a||"",_isSelect:!0,_fullWidth:!0,_selectOptions:e.props.datasets,_selectOptionsKeyForVal:"dataset_id",_selectOptionsKeyForTxt:"name",_onChange:function(e){t(o,s,e,i.argument_type)}}),r.a.createElement(ma,{_text:"or"}),r.a.createElement("div",null,r.a.createElement(ua,{_variant:"outlined",_color:"primary",_label:"Upload New Dataset",_type:"button",_fullWidth:!0,_startIcon:r.a.createElement("i",{className:"zmdi zmdi-cloud-upload zmdi-hc-fw"}),_onClick:e.props.handleCreateNewDataset})))}if("script"===s)return r.a.createElement("div",{key:"py-script-div"},r.a.createElement(ra.a,{mode:"python",theme:"kuroir",onChange:function(e){t(o,s,e,i.argument_type)},value:a,name:"script",editorProps:{$blockScrolling:!1},focus:!0,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2}}),i.is_required&&i.error&&r.a.createElement(Ft.a,{className:"input-error",error:!0},r.a.createElement(Mt.a,null),r.a.createElement("span",null,"Required")));var c="bucket"===s&&"dataset"===e.state.facetGroup.toLowerCase();return r.a.createElement(Na,{key:"ikinput-"+o,_label:ja(o),_placeholder:"Enter "+ja(o),_type:"text",_autoComplete:"new-password",_value:a,_onChange:function(e){t(o,s,e,i.argument_type)},_fullWidth:!0,_required:i.is_required,_error:i.error?"Required":"",_disabled:c})}if("show"===e.state.showColumNamesChips||"column_names"!==s||"libraries"!==s){if("target_columns"===s||"target_column"===s)return r.a.createElement(Ga,{key:s,_label:ja(s),_placeholder:"Type to search "+ja(s),_value:a||[],_isMultiple:!0,_selectOptions:e.state.suggestColumnNames.sort(),_noOptionsText:e.state.noColOptionsText,_fullWidth:!0,_keyValue:"",_nameValue:"",_onChange:function(t,a){return e.onTargetColumnChange(s,a)},_renderTags:function(e,t){return e.map((function(e,a){return r.a.createElement(xt.a,Object.assign({label:ja(e)},t({index:a})))}))}});if("associated_dataset"===s)return e.state.attributes.associated_dataset&&0===e.state.associatedDatasetAttribute.length?e.setState({associatedDatasetAttribute:e.state.attributes.associated_dataset}):e.state.attributes.associated_dataset||0!==e.state.associatedDatasetAttribute.length||e.setState({associatedDatasetAttribute:[" "]}),r.a.createElement("div",{className:"flow-nested-arg in-pipeline",key:s},r.a.createElement("div",{className:"flow-nested-arg-title"},r.a.createElement("div",{className:"mt-10"},r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("div",{className:"flow-nested-arg-label"},s.split("_").join(" ")),i.is_list&&r.a.createElement(ua,{_variant:"text",_color:"default",_label:"Add",_type:"button",_fullWidth:!1,_startIcon:r.a.createElement(Bt.a,null),_onClick:function(){e.setState({associatedDatasetAttribute:[].concat(Object(jt.a)(e.state.associatedDatasetAttribute),[" "])})}})),e.state.associatedDatasetAttribute.map((function(a,l){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"flow-addon-associated_datasets",key:l},r.a.createElement(It.a,{color:"primary","aria-label":"delete",size:"small",className:"flow-nested-associated-btn",disabled:1===e.state.associatedDatasetAttribute.length,onClick:function(){var a=e.state.associatedDatasetAttribute.filter((function(e,t){return t!==l}));e.setState({associatedDatasetAttribute:a}),setTimeout((function(){t(o,s,"",i.argument_type)}),200)}},r.a.createElement(qt.a,null)),r.a.createElement(Na,{key:"ikinput-assoc-d-"+(l+1),_required:!0,_error:" "===e.state.associatedDatasetAttribute[l]?"Required":"",_label:"Associated Dataset #"+(l+1),_placeholder:"Select Associated Dataset #"+(l+1),_type:"text",_autoComplete:"new-password",_value:""!==e.state.associatedDatasetAttribute[l]?e.state.associatedDatasetAttribute[l]:" ",_isSelect:!0,_fullWidth:!0,_selectOptions:e.props.datasets,_selectOptionsKeyForVal:"name",_selectOptionsKeyForTxt:"name",_onChange:function(a){var n=e.state.associatedDatasetAttribute;n[l]=a.target.value,e.setState({associatedDatasetAttribute:n}),t(o,s,a,i.argument_type)}})))})),r.a.createElement("div",{className:"mb-10"},i.is_list&&r.a.createElement(ua,{_variant:"contained",_color:"default",_label:"Add another Associated Dataset",_type:"button",_fullWidth:!0,_startIcon:r.a.createElement(Bt.a,null),_onClick:function(){e.setState({associatedDatasetAttribute:[].concat(Object(jt.a)(e.state.associatedDatasetAttribute),[" "])})}})));if("values"===s&&(a=e.state.attributes[s]),"IMPORTED"!==e.props.facetType&&"EXPORTED"!==e.props.facetType)return r.a.createElement(Ta,{key:"chipinput-"+s,_required:i.is_required,_error:i.error?"Required":"",_label:ja(s),_placeholder:"Type and press enter to add "+ja(s),_type:"text",_autoComplete:"new-password",_value:a||[],_fullWidth:!0,_margin:"normal",_variant:"outlined",_addChip:function(t){e.onAddChip(o,t,s)},_deleteChip:function(t){e.onDeleteChip(o,t,s)}});if("show"===e.state.showColumNamesChips)return r.a.createElement(Ta,{key:"chipinput-"+s,_required:i.is_required,_error:i.error?"Required":"",_label:ja(s),_placeholder:"Type and press enter to add "+ja(s),_type:"text",_autoComplete:"new-password",_value:a||[],_fullWidth:!0,_margin:"normal",_variant:"outlined",_addChip:function(t){e.onAddChip(o,t,s)},_deleteChip:function(t){e.onDeleteChip(o,t,s)}})}}else{if("BOOLEAN"===i.argument_type)return r.a.createElement(Na,{key:"ikinput-"+s,_required:i.is_required,_error:i.error?"Required":"",_label:ja(s),_placeholder:"Select "+ja(s),_type:"text",_autoComplete:"new-password",_value:void 0!==a?!0===a?"true":"false":"",_isSelect:!0,_fullWidth:!0,_selectOptions:["true","false"],_selectOptionsKeyForVal:"",_selectOptionsKeyForTxt:"",_onChange:function(e){t(o,s,e,i.argument_type)}});if("email"===i.type)return r.a.createElement("div",{key:s},r.a.createElement(Na,{key:"ikinput-"+o,_label:ja(o),_placeholder:"Enter "+ja(o),_type:"email",_autoComplete:"new-password",_value:a,_onChange:function(e){t(o,s,e,"email")},_fullWidth:!0,_required:i.is_required,_error:i.error?"Required":""}));if("NUMBER"===i.argument_type)return r.a.createElement("div",{key:s},r.a.createElement(Na,{key:"ikinput-"+o,_label:ja(o),_placeholder:"Enter "+ja(o),_type:"number",_autoComplete:"new-password",_value:a,_onChange:function(e){t(o,s,e)},_fullWidth:!0,_required:i.is_required,_error:i.error?"Required":""}))}},e.handleAutoSave=function(){e.setState({autoSaveTimeout:e.resetTimeout(e.state.autoSaveTimeout,setTimeout(e.handleSubmitScriptFacetOnChange,400))})},e.handleSubmitScriptFacetOnChange=function(){e.props.onSubmit(e.state.attributes,!1,!0),e.setState(Object(Ot.a)(Object(Ot.a)({},e.state),{},{autoSaveSaved:!0})),setTimeout((function(){return e.setState(Object(Ot.a)(Object(Ot.a)({},e.state),{},{autoSaveSaved:!1}))}),1e3)},e.resetTimeout=function(e,t){return clearTimeout(e),t},e.standardDialog=function(){e.state.attributesTypes;return r.a.createElement(Wa,{_open:e.props.open,_type:"regular",_icon:!1,_title:e.state.facetType,_subtitle:""!==e.state.chainGroup?e.state.chainGroup+" / "+e.state.facetGroup:"",_size:"xs",_content:!0===e.state.newlyAddedDatasetNameExists?r.a.createElement(n.Fragment,null,r.a.createElement(aa,{alertType:"warning",alertContent:r.a.createElement(n.Fragment,null,r.a.createElement(Pt.a,null,r.a.createElement("span",null,"Dataset with same name already exists."),r.a.createElement("br",null),r.a.createElement("strong",null,e.state.newlyAddedDatasetName)),r.a.createElement(Pt.a,{mt:3},"Please note:",r.a.createElement("br",null)," All flows which contain this dataset will be reflected by this change."),r.a.createElement(Pt.a,{mt:3},r.a.createElement("strong",null,"Are you sure you want to continue and overwrite dataset?"))),alertButtons:r.a.createElement(n.Fragment,null,r.a.createElement(ua,{_variant:"contained",_color:"default",_label:"No, go back",_type:"button",_fullWidth:!1,_onClick:function(){return e.handleDismissDatasetNameExists()}}),r.a.createElement(ua,{_variant:"contained",_color:"warning",_label:"Yes, overwrite",_type:"button",_isWarning:!0,_fullWidth:!1,_onClick:function(){return e.handleDatasetOverwriteYes()}}))})):!0===e.state.newlyAddedDashboardNameExists?r.a.createElement(n.Fragment,null,r.a.createElement(aa,{alertType:"warning",alertContent:r.a.createElement(n.Fragment,null,r.a.createElement(Pt.a,null,r.a.createElement("span",null,"Dashboard with same name already exists."),r.a.createElement("br",null),r.a.createElement("strong",null,e.state.newlyAddedDashboardName)),r.a.createElement(Pt.a,{mt:3},"Please note:",r.a.createElement("br",null)," All flows which contain this dashboard will be reflected by this change."),r.a.createElement(Pt.a,{mt:3},r.a.createElement("strong",null,"Are you sure you want to continue and overwrite dashboard?"))),alertButtons:r.a.createElement(n.Fragment,null,r.a.createElement(ua,{_variant:"contained",_color:"default",_label:"No, go back",_type:"button",_fullWidth:!1,_onClick:function(){return e.handleDismissDashboardNameExists()}}),r.a.createElement(ua,{_variant:"contained",_color:"warning",_label:"Yes, overwrite",_type:"button",_isWarning:!0,_fullWidth:!1,_onClick:function(){return e.handleDashboardOverwriteYes()}}))})):r.a.createElement(n.Fragment,null,e.props.facetDocumentation&&r.a.createElement("div",{className:"dialog-help"},r.a.createElement(Zt,{helpText:e.props.facetDocumentation.documentation})),r.a.createElement("div",{className:"form-container"},""!==e.state.chainGroup&&""!==e.state.facetGroup&&""!==e.state.facetType&&!e.props.attributesTypes.title1&&!e.props.attributesTypes.title2&&r.a.createElement(Pt.a,{mb:3},r.a.createElement(Na,{key:"ikinput-fcn-"+e.state.facetType,_label:"Facet Name (optional)",_placeholder:"Enter Facet Name",_type:"search",_autoComplete:"new-password",_value:e.state.customFacetName,_onChange:function(t){e.setState({customFacetName:t.target.value})},_characterCounter:15,_autoFocus:!0,_fullWidth:!0})),e.getAttributes(e.onUpdate.bind(Object(Ct.a)(e))))),_actions:r.a.createElement(n.Fragment,null,!e.state.newlyAddedDatasetNameExists&&r.a.createElement(n.Fragment,null,"Dynamic"===e.state.facetGroup&&e.state.autoSaveSaved&&r.a.createElement("div",{className:"succes-color fade-in-out mr-auto"},r.a.createElement("i",{className:"zmdi zmdi-check zmdi-hc-fw"}),r.a.createElement("span",{className:"ml-7"},"Saved")),r.a.createElement(ua,{_variant:"text",_color:"default",_label:"Cancel",_type:"button",_fullWidth:!1,_loading:!1,_onClick:e.props.onCancel}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Update",_type:"button",_fullWidth:!1,_loading:!1,_disabled:!1,_onClick:function(){e.validate()||("DASH"===e.props.facetType?(e.props.handleNamingFacet(e.state.customFacetName),e.checkForOutputDashName().then((function(){e.props.onSubmit(e.state.attributes)}))):(e.props.handleNamingFacet(e.state.customFacetName),e.checkForOutputDataset().then((function(){e.props.onSubmit(e.state.attributes)}))))}})))})},e.apiDialog=function(){e.state.attributesTypes;return r.a.createElement(Wa,{_open:e.props.open,_type:"regular",_icon:!1,_title:"API",_subtitle:""!==e.state.chainGroup?e.state.chainGroup+" / "+e.state.facetGroup:"",_size:"xs",_content:!0===e.state.newlyAddedDatasetNameExists?r.a.createElement(n.Fragment,null,r.a.createElement(aa,{alertType:"warning",alertContent:r.a.createElement(n.Fragment,null,r.a.createElement(Pt.a,null,r.a.createElement("span",null,"Dataset with same name already exists."),r.a.createElement("br",null),r.a.createElement("strong",null,e.state.newlyAddedDatasetName)),r.a.createElement(Pt.a,{mt:3},"Please note:",r.a.createElement("br",null)," All flows which contain this dataset will be reflected by this change."),r.a.createElement(Pt.a,{mt:3},r.a.createElement("strong",null,"Are you sure you want to continue and overwrite dataset?"))),alertButtons:r.a.createElement(n.Fragment,null,r.a.createElement(ua,{_variant:"contained",_color:"default",_label:"No, go back",_type:"button",_fullWidth:!1,_onClick:function(){return e.handleDismissDatasetNameExists()}}),r.a.createElement(ua,{_variant:"contained",_color:"warning",_label:"Yes, overwrite",_type:"button",_isWarning:!0,_fullWidth:!1,_onClick:function(){return e.handleDatasetOverwriteYes()}}))})):!0===e.state.newlyAddedDashboardNameExists?r.a.createElement(n.Fragment,null,r.a.createElement(aa,{alertType:"warning",alertContent:r.a.createElement(n.Fragment,null,r.a.createElement(Pt.a,null,r.a.createElement("span",null,"Dashboard with same name already exists."),r.a.createElement("br",null),r.a.createElement("strong",null,e.state.newlyAddedDashboardName)),r.a.createElement(Pt.a,{mt:3},"Please note:",r.a.createElement("br",null)," All flows which contain this dashboard will be reflected by this change."),r.a.createElement(Pt.a,{mt:3},r.a.createElement("strong",null,"Are you sure you want to continue and overwrite dashboard?"))),alertButtons:r.a.createElement(n.Fragment,null,r.a.createElement(ua,{_variant:"contained",_color:"default",_label:"No, go back",_type:"button",_fullWidth:!1,_onClick:function(){return e.handleDismissDashboardNameExists()}}),r.a.createElement(ua,{_variant:"contained",_color:"warning",_label:"Yes, overwrite",_type:"button",_isWarning:!0,_fullWidth:!1,_onClick:function(){return e.handleDashboardOverwriteYes()}}))})):r.a.createElement(n.Fragment,null,e.props.facetDocumentation&&r.a.createElement("div",{className:"dialog-help"},r.a.createElement(Zt,{helpText:e.props.facetDocumentation.documentation})),r.a.createElement("div",{className:"form-container"},""!==e.state.chainGroup&&""!==e.state.facetGroup&&""!==e.state.facetType&&!e.props.attributesTypes.title1&&!e.props.attributesTypes.title2&&r.a.createElement(Pt.a,{mb:3},r.a.createElement(Na,{key:"ikinput-fcn-"+e.state.facetType,_label:"Facet Name (optional)",_placeholder:"Enter Facet Name",_type:"search",_autoComplete:"new-password",_value:e.state.customFacetName,_onChange:function(t){e.setState({customFacetName:t.target.value})},_characterCounter:15,_autoFocus:!0,_fullWidth:!0})),r.a.createElement(n.Fragment,null,r.a.createElement(Pt.a,{mb:2},r.a.createElement(Tt.a,{className:"api-facet-button-group",variant:"contained","aria-label":"button group",fullWidth:!0},r.a.createElement(At.a,{variant:"config"===e.state.buttonGroupValue?"contained":"outlined",color:"primary",startIcon:r.a.createElement(Ut.a,null),onClick:function(){return e.setState({buttonGroupValue:"config"})}},"Configure API"),r.a.createElement(At.a,{variant:"script"===e.state.buttonGroupValue?"contained":"outlined",color:"primary",startIcon:r.a.createElement(Rt.a,null),onClick:function(){return e.setState({buttonGroupValue:"script"})}},"Python Script"))),r.a.createElement("div",{className:"api-facet-content"},"config"===e.state.buttonGroupValue?e.getAttributesForAPIFacet(e.onUpdate.bind(Object(Ct.a)(e)),"api-facet-left"):e.getAttributesForAPIFacet(e.onUpdate.bind(Object(Ct.a)(e)),"api-facet-right"))))),_actions:r.a.createElement(n.Fragment,null,!e.state.newlyAddedDatasetNameExists&&r.a.createElement(n.Fragment,null,"Dynamic"===e.state.facetGroup&&e.state.autoSaveSaved&&r.a.createElement("div",{className:"succes-color fade-in-out mr-auto"},r.a.createElement("i",{className:"zmdi zmdi-check zmdi-hc-fw"}),r.a.createElement("span",{className:"ml-7"},"Saved")),r.a.createElement(ua,{_variant:"text",_color:"default",_label:"Cancel",_type:"button",_fullWidth:!1,_loading:!1,_onClick:e.props.onCancel}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Update",_type:"button",_fullWidth:!1,_loading:!1,_disabled:!1,_onClick:function(){e.validate()||(e.props.handleNamingFacet(e.state.customFacetName),e.checkForOutputDataset().then((function(){e.props.onSubmit(e.state.attributes)})))}})))})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log("props from flow-diagram-component: ",this.props);var t=Da(this.props.attributesTypes);t=this.checkForHashMaps(t,this.props.attributes);var a=Object(Ot.a)(Object(Ot.a)({},this.props.attributes),this.checkForDefaultValues(t));if(this.setState({attributes:a,attributesTypes:t,chainGroup:this.props.chainGroupTitle,facetGroup:this.props.facetGroupTitle,facetType:this.props.facetTypeTitle,title:this.props.title,open:this.props.open,createDatasetClicked:this.props.createNewDatasetDialogIsOpened,customFacetName:this.props.facetName}),this.outputDatasetId="","Convert Format"===this.props.facetTypeTitle||"Count"===this.props.facetTypeTitle||"Select"===this.props.facetTypeTitle||"Sort"===this.props.facetTypeTitle||"Transpose"===this.props.facetTypeTitle){var n=[];Di(this.props.pipelineInfo.pipeline_id,this.props.pipelineInfo.project_id,this.props.nodeDetails.parents[0],this.props.nodeDetails.facet_id).then((function(t){n=[],t.data.column_names.forEach((function(e,t){n.push(e)})),e.setState({suggestColumnNames:n})})).catch((function(t){501===t?Ei(e.props.pipelineInfo.project_id).then((function(t){Di(e.props.pipelineInfo.pipeline_id,e.props.pipelineInfo.project_id,e.props.nodeDetails.parents[0],e.props.nodeDetails.facet_id).then((function(t){n=[],t.data.column_names.forEach((function(e){n.push(e)})),e.setState({suggestColumnNames:n})})).catch((function(t){e.setState({suggestColumnNames:[],noColOptionsText:"No columns found. Try to close and re-open this dialog."})}))})).catch((function(t){e.setState({suggestColumnNames:[],noColOptionsText:"No columns found. Try to close and re-open this dialog."})})):(e.setState({suggestColumnNames:[]}),Di(e.props.pipelineInfo.pipeline_id,e.props.pipelineInfo.project_id,e.props.nodeDetails.parents[0],e.props.nodeDetails.facet_id).then((function(t){n=[],t.data.column_names.forEach((function(e){n.push(e)})),e.setState({suggestColumnNames:n})})).catch((function(t){e.setState({suggestColumnNames:[],noColOptionsText:"No columns found. Check if this facet has linked parent facet."})})))}))}if("API"===this.props.customFacetType){var r=a.url?a.url:"";r="url = '"+r+"'";var s=a.worksheet_index?a.worksheet_index:"";s="worksheet_index = "+s;var o=a.dataset?a.dataset:"";o="dataset = '"+o+"'";var i=a.columns?a.columns:"";i="columns = '"+i+"'";var l=a.limit?a.limit:"";l="limit = '"+l+"'";var c=a.api_parameters?a.api_parameters:[];this.apiPython={url:r,worksheet_index:s,dataset:o,columns:i,limit:l,api_parameters:c}}}},{key:"checkForDefaultValues",value:function(e){for(var t={},a=Object.keys(e),n=0;n<a.length;n++)"bucket"===a[n]&&"dataset"===this.props.facetGroupTitle.toLowerCase()&&(t[a[n]]=this.bucketDefaultValueForDataset);return t}},{key:"checkForHashMaps",value:function(e,t){return Object.keys(e).map((function(a){var n=e[a],r=n.children;if("MAP"===n.argument_type&&n.is_list)if(n.children=[],t[a]&&Array.isArray(t[a])&&t[a].length>0)for(var s=0;s<t[a].length;s++)n.children.push(Object(Ot.a)({},r));else n.children.push(Object(Ot.a)({},r));return""})),e}},{key:"onUpdate",value:function(e,t,a){var n=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"string";if("API"===this.props.customFacetType&&"Custom"!==this.state.attributes.api_template){var s,o="script"===t?a:"associated_dataset"===t?this.state.associatedDatasetAttribute:a.target.value,i="",l=0,c="",u="",d="",p="",m=[];if("url"===t){var h="url = '"+(o=a.target.value)+"'";i=h,l=this.apiPython.worksheet_index,u=this.apiPython.dataset,c=this.apiPython.columns,d=this.apiPython.limit,this.apiPython={url:i,worksheet_index:this.apiPython.worksheet_index,columns:this.apiPython.columns,dataset:this.apiPython.dataset,limit:this.apiPython.limit,api_parameters:this.apiPython.api_parameters}}else if("worksheet_index"===t){var f="worksheet_index = "+(o=a.target.value);i=this.apiPython.url,l=f,u=this.apiPython.dataset,c=this.apiPython.columns,d=this.apiPython.limit,this.apiPython={url:this.apiPython.url,worksheet_index:f,columns:this.apiPython.columns,dataset:this.apiPython.dataset,limit:this.apiPython.limit,api_parameters:this.apiPython.api_parameters}}else if("request_type"===t){o=a.target.value;i=this.apiPython.url,u=this.apiPython.dataset,c=this.apiPython.columns,d=this.apiPython.limit,this.apiPython={url:this.apiPython.url,worksheet_index:this.apiPython.worksheet_index,columns:this.apiPython.columns,dataset:this.apiPython.dataset,limit:this.apiPython.limit,api_parameters:this.apiPython.api_parameters}}else if("columns"===t){var g="columns = '"+(o=a.target.value)+"'";c=g,i=this.apiPython.url,u=this.apiPython.dataset,d=this.apiPython.limit,this.apiPython={url:this.apiPython.url,worksheet_index:this.apiPython.worksheet_index,columns:g,dataset:this.apiPython.dataset,limit:this.apiPython.limit,api_parameters:this.apiPython.api_parameters}}else if("dataset"===t){var b="dataset = '"+(o=a.target.value)+"'";u=b,i=this.apiPython.url,d=this.apiPython.limit,c=this.apiPython.columns,this.apiPython={url:this.apiPython.url,worksheet_index:this.apiPython.worksheet_index,columns:this.apiPython.columns,dataset:b,limit:this.apiPython.limit,api_parameters:this.apiPython.api_parameters}}else if("limit"===t){var v="limit = '"+(o=a.target.value)+"'";d=v,i=this.apiPython.url,c=this.apiPython.columns,u=this.apiPython.dataset,this.apiPython={url:this.apiPython.url,worksheet_index:this.apiPython.worksheet_index,columns:this.apiPython.columns,dataset:this.apiPython.dataset,limit:v,api_parameters:this.apiPython.api_parameters}}var _=!1;"Google Sheets"===this.state.attributes.api_template?(p=this.constructGSheetPScript(this.apiPython),m=this.googleSheetsLibraries):"BigQuery"===this.state.attributes.api_template||"Connector"===this.state.attributes.api_template?(p=this.constructBQueryPScript(this.apiPython),m=this.bigQueryLibraries):(p=this.constructCustomParameters(this.apiPython),m=this.customParametersLibraries,_=!0),"api_template"===t&&("Google Sheets"===o?(p=this.constructGSheetPScript(this.apiPython),m=this.googleSheetsLibraries):"BigQuery"===o||"Connector"===o?(p=this.constructBQueryPScript(this.apiPython),m=this.bigQueryLibraries):(p=this.constructCustomParameters(this.apiPython),m=this.customParametersLibraries,_=!0)),this.setState({showApiParameters:_}),this.apiPython={url:i,worksheet_index:l,dataset:u,columns:c,limit:d,api_parameters:this.apiPython.api_parameters},this.setState({attributes:Object(Ot.a)(Object(Ot.a)({},this.state.attributes),{},(s={},Object(Dt.a)(s,t,o),Object(Dt.a)(s,"script",p),Object(Dt.a)(s,"libraries",m),s))},(function(){}))}else{if("true"!==(o="script"===t?a:"associated_dataset"===t?this.state.associatedDatasetAttribute:a.target.value)&&!0!==o||"IMPORTED"!==this.props.facetType&&"EXPORTED"!==this.props.facetType?"false"!==o&&!1!==o||"IMPORTED"!==this.props.facetType&&"EXPORTED"!==this.props.facetType||(o=!1,this.setState({showColumNamesChips:"show"})):(o=!0,this.setState({showColumNamesChips:"hide"})),"true"===o?o=!0:"false"===o&&(o=!1),"NUMBER"===r&&(o=parseInt(o)),"associated_dataset"===t){var E,S=this.state.associatedDatasetAttribute.map((function(e){return n.props.datasets.map((function(t){return t.name===e&&t.dataset_id})).filter((function(e){return!1!==e}))[0]}));this.setState({attributes:Object(Ot.a)(Object(Ot.a)({},this.state.attributes),{},(E={},Object(Dt.a)(E,t,o),Object(Dt.a)(E,"dataset_id",S.filter((function(e){return!1!==e}))),E))})}else if("table_side"===t)this.setState({attributes:Object(Ot.a)(Object(Ot.a)({},this.state.attributes),{},Object(Dt.a)({},t,o))},(function(){n.validate()}));else if("api_template"===t&&"API"===this.props.facetType){var y;p="",m=[];this.apiPython={url:"",worksheet_index:1,columns:"",dataset:"",limit:"",api_parameters:{}},"Google Sheets"===o?(p=this.constructGSheetPScript(this.apiPython),m=this.googleSheetsLibraries):"BigQuery"===this.state.attributes.api_template||"Connector"===this.state.attributes.api_template?(p=this.constructBQueryPScript(this.apiPython),m=this.bigQueryLibraries):(p=this.constructCustomParameters(this.apiPython),m=this.customParametersLibraries,_=!0),this.setState({attributes:Object(Ot.a)(Object(Ot.a)({},this.state.attributes),{},(y={},Object(Dt.a)(y,t,o),Object(Dt.a)(y,"script",p),Object(Dt.a)(y,"libraries",m),y))},(function(){n.validate()}))}else this.setState({attributes:Object(Ot.a)(Object(Ot.a)({},this.state.attributes),{},Object(Dt.a)({},t,o))},(function(){n.validate()||"script"!==t||n.handleAutoSave()}))}}},{key:"onUpdatedNestedComponent",value:function(e,t,a){var n=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=e.target.value;"true"===s?s=!0:"false"===s&&(s=!1);var o=this.state.attributes,i=this.apiPython.api_parameters;if(-1===r?o[t]?o[t][a]=s:o[t]=Object(Dt.a)({},a,s):(o[t]||(o[t]=[],i[t]=[]),o[t][r]?o[t][r][a]=s:o[t][r]=Object(Dt.a)({},a,s)),"api_parameters"===t){e.target.value;this.apiPython={url:this.apiPython.url,worksheet_index:this.apiPython.worksheet_index,dataset:this.apiPython.dataset,columns:this.apiPython.columns,limit:this.apiPython.limit,api_parameters:i};o.script;var l="";l+="api_parameters = {",Object.keys(i).forEach((function(e){var t=i[e].name?i[e].name:"",a=i[e].value?i[e].value:"",n=Object.keys(i).length===e+1?"":",";l+="\n  '"+t+"': '"+a+"'"+n})),"\n"+(l+="\n}"),o.script=this.constructCustomParameters(this.apiPython),this.setState(Object(Ot.a)(Object(Ot.a)({},this.state),{},{attributes:o}),(function(){}))}else this.setState(Object(Ot.a)(Object(Ot.a)({},this.state),{},{attributes:o}),(function(){n.validate()}))}},{key:"onAddChip",value:function(e,t,a){var n=this;if("API"===this.props.customFacetType){var r,s=(i=this.state.attributes[e]?[].concat(Object(jt.a)(this.state.attributes[e]),[t]):[t]).toString();s="columns = '"+s+"'",this.apiPython={url:this.apiPython.url,worksheet_index:this.apiPython.worksheet_index,columns:s,dataset:this.apiPython.dataset,limit:this.apiPython.limit,api_parameters:this.apiPython.api_parameters};var o=this.constructBQueryPScript(this.apiPython);this.setState({attributes:Object(Ot.a)(Object(Ot.a)({},this.state.attributes),{},(r={},Object(Dt.a)(r,e,i),Object(Dt.a)(r,"script",o),r))},(function(){n.validate()}))}else{var i=this.state.attributes[a]?[].concat(Object(jt.a)(this.state.attributes[a]),[t]):[t];console.log("chips...",i),this.setState({attributes:Object(Ot.a)(Object(Ot.a)({},this.state.attributes),{},Object(Dt.a)({},a,i))},(function(){n.validate()}))}}},{key:"onTargetColumnChange",value:function(e,t){var a=this;this.setState({attributes:Object(Ot.a)(Object(Ot.a)({},this.state.attributes),{},Object(Dt.a)({},e,t))},(function(){a.validate()}))}},{key:"onNestedSelectColumn",value:function(e,t,a,n,r){var s=this.state.attributes;-1===r?s[a]?s[a][n]=e:s[a]=Object(Dt.a)({},n,e):(s[a]||(s[a]=[]),s[a][r]?s[a][r][n]=e:s[a][r]=Object(Dt.a)({},n,e)),this.setState(Object(Ot.a)(Object(Ot.a)({},this.state),{},{attributes:s}))}},{key:"onDeleteChip",value:function(e,t,a){var n=this,r=this.state.attributes[a].filter((function(e){return e!==t}));this.setState({attributes:Object(Ot.a)(Object(Ot.a)({},this.state.attributes),{},Object(Dt.a)({},a,r))},(function(){n.validate()}))}},{key:"handleRequestClose",value:function(){}},{key:"filterAttributes",value:function(e){return"overwrite"!==e&&"project_id"!==e&&"user_email"!==e&&("Exported"!==this.state.facetType||"dataset_id"!==e)}},{key:"addNestedInputGroup",value:function(e,t){var a=Da(e.children[0]);e.children=[].concat(Object(jt.a)(e.children),[a]),this.setState(Object(Ot.a)(Object(Ot.a)({},this.state),{},{attributesTypes:Object(Ot.a)(Object(Ot.a)({},this.state.attributesTypes),{},Object(Dt.a)({},t,e))}))}},{key:"deleteNestedInputGroup",value:function(e,t,a){e.children=e.children.filter((function(e,t){return t!==a}));var n=this.state.attributes;n[t]&&(n[t]=n[t].filter((function(e,t){return t!==a}))),this.setState(Object(Ot.a)(Object(Ot.a)({},this.state),{},{attributesTypes:Object(Ot.a)(Object(Ot.a)({},this.state.attributesTypes),{},Object(Dt.a)({},t,e)),attributes:n}))}},{key:"validate",value:function(){var e=this,t=this.state.attributesTypes,a=!1;return Object.keys(t).filter((function(t){return"overwrite"!==t&&"project_id"!==t&&"user_email"!==t&&("dataset_id"!==t&&"dashboard_id"!==t&&"dataset_name"!==t||"Exported"===e.state.facetType&&"Dataset"===e.state.facetGroup&&"dataset_id"!==t||"Imported"===e.state.facetType&&"Dataset"===e.state.facetGroup&&"dataset_name"!==t)})).map((function(n){var r=t[n];if("MAP"===r.argument_type)r.is_list?r.children.map((function(t,r){Object.keys(t).map((function(s){var o=t[s];o.is_list?o.error=o.is_required&&(void 0===e.state.attributes[n]||void 0===e.state.attributes[n][r]||void 0===e.state.attributes[n][r][s]||0===e.state.attributes[n][r][s].length):o.error=o.is_required&&(void 0===e.state.attributes[n]||void 0===e.state.attributes[n][r]||void 0===e.state.attributes[n][r][s]||""===e.state.attributes[n][r][s]),a||(a=o.error)}))})):Object.keys(r.children).map((function(t){var s=r.children[t];s.is_list?s.error=s.is_required&&(void 0===e.state.attributes[n]||void 0===e.state.attributes[n][t]||0===e.state.attributes[n][t].length):s.error=s.is_required&&(void 0===e.state.attributes[n]||void 0===e.state.attributes[n][t]||""===e.state.attributes[n][t]),a||(a=s.error)}));else if(r.is_list)if("associated_dataset"===r.name){var s=e.state.associatedDatasetAttribute.filter((function(e){return" "===e}));r.error=s.length>0}else r.is_required&&"values"===r.name?e.state.attributes.values?r.error=!1:r.error=!0:r.error=r.is_required&&(void 0===e.state.attributes[n]||0===e.state.attributes[n].length);else"table_side"===r.name?e.state.attributes[r.name]?r.error=!1:r.error=!0:r.error=r.is_required&&(void 0===e.state.attributes[n]||""===e.state.attributes[n]);a||(a=r.error)})),this.setState({attributesTypes:t}),a}},{key:"checkForOutputDashName",value:function(){var e=this;return new Promise((function(t,a){if("DASH"===e.props.facetType){var n=!1,r="",s="";e.props.dashboards.map((function(t){return t.name===e.state.attributes.dashboard_name&&(n=!0,r=t.name,s=t.dashboard_id),""})),n?(e.setState(Object(Ot.a)(Object(Ot.a)({},e.state),{},{attributes:Object(Ot.a)(Object(Ot.a)({},e.state.attributes),{},{overwrite:!0,project_id:e.props.projectId,dashboard_id:s}),newlyAddedDashboardNameExists:!0,newlyAddedDashboardName:r,newlyAddedDashboardID:s})),a()):(e.setState(Object(Ot.a)(Object(Ot.a)({},e.state),{},{attributes:Object(Ot.a)(Object(Ot.a)({},e.state.attributes),{},{dashboard_id:"*",project_id:e.props.projectId,overwrite:!1})})),t())}}))}},{key:"checkForOutputDataset",value:function(){var e=this;return new Promise((function(t,a){if("EXPORTED"===e.props.facetType){var n=!1,r="",s="";e.props.datasets.map((function(t){return t.name===e.state.attributes.dataset_name&&(n=!0,r=t.name,s=t.dataset_id),""})),!1!==n?(e.setState(Object(Ot.a)(Object(Ot.a)({},e.state),{},{attributes:Object(Ot.a)(Object(Ot.a)({},e.state.attributes),{},{project_id:e.props.projectId,user_email:e.props.user,overwrite:!0,dataset_id:s}),newlyAddedDatasetNameExists:!0,newlyAddedDatasetName:r,newlyAddedDatasetID:s})),a()):e.setState(Object(Ot.a)(Object(Ot.a)({},e.state),{},{attributes:Object(Ot.a)(Object(Ot.a)({},e.state.attributes),{},{project_id:e.props.projectId,user_email:e.props.user,overwrite:!1,dataset_id:""})}),(function(){t()}))}else"DASH"===e.props.facetType?e.setState({attributes:Object(Ot.a)(Object(Ot.a)({},e.state.attributes),{},{project_id:e.props.projectId,overwrite:!1})},(function(){t()})):t()}))}},{key:"updateOutputPath",value:function(e,t,a){var n=this;return new Promise((function(r,s){"EXPORTED"===n.props.facetType?n.setState(Object(Ot.a)(Object(Ot.a)({},n.state),{},{attributes:Object(Ot.a)(Object(Ot.a)({},n.state.attributes),{},{path:"".concat(n.props.user,"/").concat(e,"/").concat(t,"/").concat(a)})}),(function(){return r()})):r()}))}},{key:"handleDismissDatasetNameExists",value:function(){this.setState({newlyAddedDatasetNameExists:!1,newlyAddedDatasetName:"",newlyAddedDatasetID:""})}},{key:"handleDismissDashboardNameExists",value:function(){this.setState({newlyAddedDashboardNameExists:!1,newlyAddedDashboardName:"",newlyAddedDashboardID:""})}},{key:"handleDatasetOverwriteYes",value:function(){var e=this;"EXPORTED"===this.props.facetType&&this.setState(Object(Ot.a)(Object(Ot.a)({},this.state),{},{attributes:Object(Ot.a)(Object(Ot.a)({},this.state.attributes),{},{overwrite:!0,dataset_id:this.state.newlyAddedDatasetID,project_id:this.props.projectId,user_email:this.props.user})}),(function(){e.props.handleNamingFacet(e.state.customFacetName),e.props.onSubmit(e.state.attributes)}))}},{key:"handleDashboardOverwriteYes",value:function(){var e=this;"DASH"===this.props.facetType&&this.setState(Object(Ot.a)(Object(Ot.a)({},this.state),{},{attributes:Object(Ot.a)(Object(Ot.a)({},this.state.attributes),{},{overwrite:!0})}),(function(){e.props.handleNamingFacet(e.state.customFacetName),e.props.onSubmit(e.state.attributes)}))}},{key:"render",value:function(){return"API"===this.props.customFacetType?this.apiDialog():this.standardDialog()}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a="";if(""!==e.newDatasetName&&e.datasets.map((function(t){return t.name===e.newDatasetName&&(a="".concat(t.dataset_id)),""})),""!==a&&""!==e.newDatasetName){var n=a;return e.clearNewDataset&&e.clearNewDataset(),Object(Ot.a)(Object(Ot.a)({},t),{},{attributes:Object(Ot.a)(Object(Ot.a)({},t.attributes),{},{path:n,dataset_id:n})})}return t}}]),a}(n.Component),Ri=a(1128),Vi=a(9),Ui=(a(806),a(51)),Wi=function(e){return{recur:e.indexOf("*/")>-1,value:"*"!==e?parseInt(e.replace(/[\/!@#$%^&*]/g,"")):e}},Bi=function(e,t,a,n,r){var s=[];return s[0]=e?e.recur?"*/".concat(e.value):e.value:"*",s[1]=t?t.recur?"*/".concat(t.value):t.value:"*",s[2]=a?a.recur?"*/".concat(a.value):r.value:"*",s[3]=n?n.recur?"*/".concat(n.value):n.value:"*",s[4]=r&&r.length>0?Array.isArray(r)?r.join(","):r:"*",s.join(" ")},Yi=a(1129),qi=a(1152),Hi=a(1154),Gi=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={name:"",settings:{oneTime:{enabled:!0,startDate:wa()(),startTime:wa()()},day:{enabled:!1,recurEvery:1,atTime:wa()(),startDate:wa()(),endDate:wa()()},week:{enabled:!1,recurEvery:1,atTime:wa()(),startDate:wa()(),endDate:wa()(),days:[{day:"Monday",value:!1,shortForm:"mon"},{day:"Tuesday",value:!1,shortForm:"tue"},{day:"Wednesday",value:!1,shortForm:"wed"},{day:"Thursday",value:!1,shortForm:"thu"},{day:"Friday",value:!1,shortForm:"fri"},{day:"Saturday",value:!1,shortForm:"sat"},{day:"Sunday",value:!1,shortForm:"sun"}]}}},e.handleChangeForm=function(t){return function(a){switch(t){case"name":e.setState({name:a.target.value},e.callback);break;case"oneTime":case"day":case"week":e.setState({settings:{oneTime:Object(Ot.a)(Object(Ot.a)({},e.state.settings.oneTime),{},{enabled:"oneTime"===t}),day:Object(Ot.a)(Object(Ot.a)({},e.state.settings.day),{},{enabled:"day"===t}),week:Object(Ot.a)(Object(Ot.a)({},e.state.settings.week),{},{enabled:"week"===t})}},e.callback);break;case"oneTimeDate":e.setState({settings:Object(Ot.a)(Object(Ot.a)({},e.state.settings),{},{oneTime:Object(Ot.a)(Object(Ot.a)({},e.state.settings.oneTime),{},{startDate:a})})},e.callback);break;case"oneTimeStartTime":e.setState({settings:Object(Ot.a)(Object(Ot.a)({},e.state.settings),{},{oneTime:Object(Ot.a)(Object(Ot.a)({},e.state.settings.oneTime),{},{startTime:a})})},e.callback);break;case"dayRecurEvery":e.setState({settings:Object(Ot.a)(Object(Ot.a)({},e.state.settings),{},{day:Object(Ot.a)(Object(Ot.a)({},e.state.settings.day),{},{recurEvery:a.target.value})})},e.callback);break;case"dayAtTime":e.setState({settings:Object(Ot.a)(Object(Ot.a)({},e.state.settings),{},{day:Object(Ot.a)(Object(Ot.a)({},e.state.settings.day),{},{atTime:a})})},e.callback);break;case"dayStartDate":e.setState({settings:Object(Ot.a)(Object(Ot.a)({},e.state.settings),{},{day:Object(Ot.a)(Object(Ot.a)({},e.state.settings.day),{},{startDate:a})})},e.callback);break;case"dayEndDate":e.setState({settings:Object(Ot.a)(Object(Ot.a)({},e.state.settings),{},{day:Object(Ot.a)(Object(Ot.a)({},e.state.settings.day),{},{endDate:a})})},e.callback);break;case"weekRecurEvery":e.setState({settings:Object(Ot.a)(Object(Ot.a)({},e.state.settings),{},{week:Object(Ot.a)(Object(Ot.a)({},e.state.settings.week),{},{recurEvery:a.target.value})})},e.callback);break;case"weekStartDate":e.setState({settings:Object(Ot.a)(Object(Ot.a)({},e.state.settings),{},{week:Object(Ot.a)(Object(Ot.a)({},e.state.settings.week),{},{startDate:a})})},e.callback);break;case"weekEndDate":e.setState({settings:Object(Ot.a)(Object(Ot.a)({},e.state.settings),{},{week:Object(Ot.a)(Object(Ot.a)({},e.state.settings.week),{},{endDate:a})})},e.callback);break;case"weekAtTime":e.setState({settings:Object(Ot.a)(Object(Ot.a)({},e.state.settings),{},{week:Object(Ot.a)(Object(Ot.a)({},e.state.settings.week),{},{atTime:a})})},e.callback);break;case"weekday":e.setState({settings:Object(Ot.a)(Object(Ot.a)({},e.state.settings),{},{week:Object(Ot.a)(Object(Ot.a)({},e.state.settings.week),{},{days:e.state.settings.week.days.map((function(e){return e.day===a.target.value&&(e.value=!e.value),e}))})})},e.callback)}}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e,t=this.props.settings.cron,a=wa()(this.props.settings.start_time,"MMMM Do YYYY, h:mm:ss a"),n=this.props.settings.end_time?wa()(this.props.settings.end_time,"MMMM Do YYYY, h:mm:ss a"):wa()();if(a.isValid()||(a=wa()()),n.isValid()||(n=wa()()),""!==t){var r=function(e){var t=e.split(" "),a=Wi(t[0]),n=Wi(t[1]),r=Wi(t[2]),s=Wi(t[3]),o=t[4];return o.indexOf(",")>-1&&(o=o.split(",")),{minutes:a,hours:n,dayOfMonth:r,month:s,dayOfWeek:o}}(t);if(r.dayOfMonth.recur)if(r.dayOfMonth.value%7!==0)(e=this.state.settings.day.atTime.clone()).set({hour:new Date(1e3*this.props.settings.start_time).getHours(),minute:new Date(1e3*this.props.settings.start_time).getMinutes()}),this.setState(Object(Ot.a)(Object(Ot.a)({},this.state),{},{name:this.props.settings.name,settings:Object(Ot.a)(Object(Ot.a)({},this.state.settings),{},{oneTime:Object(Ot.a)(Object(Ot.a)({},this.state.settings.oneTime),{},{enabled:!1}),week:Object(Ot.a)(Object(Ot.a)({},this.state.settings.week),{},{enabled:!1}),day:{enabled:!0,recurEvery:r.dayOfMonth.value,atTime:e,startDate:a,endDate:n}})}),this.callback);else{(e=this.state.settings.week.atTime.clone()).set({hour:new Date(1e3*this.props.settings.start_time).getHours(),minute:new Date(1e3*this.props.settings.start_time).getMinutes()});var s=this.state.settings.week.days.map((function(e){return e.value=r.dayOfWeek.indexOf(e.shortForm)>-1,e}));this.setState(Object(Ot.a)(Object(Ot.a)({},this.state),{},{name:this.props.settings.name,settings:Object(Ot.a)(Object(Ot.a)({},this.state.settings),{},{oneTime:Object(Ot.a)(Object(Ot.a)({},this.state.settings.oneTime),{},{enabled:!1}),day:Object(Ot.a)(Object(Ot.a)({},this.state.settings.day),{},{enabled:!1}),week:{enabled:!0,recurEvery:r.dayOfMonth.value/7,atTime:e,days:s,startDate:a,endDate:n}})}),this.callback)}else(e=this.state.settings.oneTime.startTime.clone()).set({hour:new Date(1e3*this.props.settings.start_time).getHours(),minute:new Date(1e3*this.props.settings.start_time).getMinutes()}),this.setState(Object(Ot.a)(Object(Ot.a)({},this.state),{},{name:this.props.settings.name,settings:Object(Ot.a)(Object(Ot.a)({},this.state.settings),{},{oneTime:{startTime:e,startDate:a,enabled:!0},day:Object(Ot.a)(Object(Ot.a)({},this.state.settings.day),{},{enabled:!1}),week:Object(Ot.a)(Object(Ot.a)({},this.state.settings.week),{},{enabled:!1})})}),this.callback)}else this.callback()}},{key:"callback",value:function(){this.props.onChange(this.state.name,this.state.settings)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"tab-content"},r.a.createElement(ba.a,{error:this.props.validated&&""===this.state.name,id:"standard-name",label:"Name",placeholder:"Enter schedule flow",className:this.props.classes.textField,value:this.state.name,onChange:this.handleChangeForm("name"),margin:"normal",variant:"outlined",InputLabelProps:{shrink:!0}}),r.a.createElement(Ri.a,{container:!0,className:"cardboxes-container settings-container",alignItems:"stretch",spacing:4},r.a.createElement(Ri.a,{item:!0,xs:4,className:"grid-view settings-box"},r.a.createElement("div",{className:this.state.settings.oneTime.enabled?"settings-box-card selected":"settings-box-card"},r.a.createElement("div",{className:"settings-box-card-header"},r.a.createElement(Yi.a,{value:"bottom",className:"header-title",control:r.a.createElement(qi.a,{color:"primary",checked:this.state.settings.oneTime.enabled,onChange:this.handleChangeForm("oneTime"),value:"a","aria-label":"A"}),label:"One time",labelPlacement:"bottom"}),r.a.createElement("div",{className:"header-descr"},"Execute flow only once")),r.a.createElement("hr",{className:"settings-box-card-divider"}),r.a.createElement(ga.a,{fullWidth:!0},r.a.createElement(Ui.a,{fullWidth:!0,value:this.state.settings.oneTime.startDate,onChange:this.handleChangeForm("oneTimeDate"),disabled:!this.state.settings.oneTime.enabled,variant:"outlined",label:"Start date",InputLabelProps:{shrink:!0}})),r.a.createElement(ga.a,{fullWidth:!0},r.a.createElement(Ui.c,{fullWidth:!0,value:this.state.settings.oneTime.startTime,onChange:this.handleChangeForm("oneTimeStartTime"),disabled:!this.state.settings.oneTime.enabled,variant:"outlined",label:"Start time",InputLabelProps:{shrink:!0}})))),r.a.createElement(Ri.a,{item:!0,xs:4,className:"grid-view settings-box"},r.a.createElement("div",{className:this.state.settings.day.enabled?"settings-box-card selected":"settings-box-card"},r.a.createElement("div",{className:"settings-box-card-header"},r.a.createElement(Yi.a,{value:"bottom",className:"header-title",control:r.a.createElement(qi.a,{color:"primary",checked:this.state.settings.day.enabled,onChange:this.handleChangeForm("day"),value:"b","aria-label":"B"}),label:"Daily",labelPlacement:"bottom"}),r.a.createElement("div",{className:"header-descr"},"Execute flow on a daily basis")),r.a.createElement("hr",{className:"settings-box-card-divider"}),r.a.createElement(ga.a,{fullWidth:!0},r.a.createElement(ba.a,{id:"recurEvery",value:this.state.settings.day.recurEvery,onChange:this.handleChangeForm("dayRecurEvery"),type:"number",disabled:!this.state.settings.day.enabled,margin:"normal",variant:"outlined",label:"Recur every x days",InputLabelProps:{shrink:!0},fullWidth:!0})),r.a.createElement(ga.a,{fullWidth:!0},r.a.createElement(Ui.c,{fullWidth:!0,value:this.state.settings.day.atTime,onChange:this.handleChangeForm("dayAtTime"),disabled:!this.state.settings.day.enabled,variant:"outlined",label:"at Time",InputLabelProps:{shrink:!0}})),r.a.createElement(ga.a,{fullWidth:!0},r.a.createElement(Ui.a,{fullWidth:!0,value:this.state.settings.day.startDate,onChange:this.handleChangeForm("dayStartDate"),disabled:!this.state.settings.day.enabled,variant:"outlined",label:"Start Date",InputLabelProps:{shrink:!0}})),r.a.createElement(ga.a,{fullWidth:!0},r.a.createElement(Ui.a,{fullWidth:!0,value:this.state.settings.day.endDate,onChange:this.handleChangeForm("dayEndDate"),disabled:!this.state.settings.day.enabled,variant:"outlined",label:"End Date",InputLabelProps:{shrink:!0}})))),r.a.createElement(Ri.a,{item:!0,xs:4,className:"grid-view settings-box"},r.a.createElement("div",{className:this.state.settings.week.enabled?"settings-box-card selected":"settings-box-card"},r.a.createElement("div",{className:"settings-box-card-header"},r.a.createElement(Yi.a,{value:"bottom",className:"header-title",control:r.a.createElement(qi.a,{color:"primary",checked:this.state.settings.week.enabled,onChange:this.handleChangeForm("week"),value:"c","aria-label":"C"}),label:"Weekly",labelPlacement:"bottom"}),r.a.createElement("div",{className:"header-descr"},"Execute flow on a weekly basis")),r.a.createElement("hr",{className:"settings-box-card-divider"}),r.a.createElement(ga.a,{fullWidth:!0},r.a.createElement(ba.a,{id:"recurEvery",value:this.state.settings.week.recurEvery,onChange:this.handleChangeForm("weekRecurEvery"),disabled:!this.state.settings.week.enabled,type:"number",margin:"normal",variant:"outlined",label:"Recur every x weeks on",InputLabelProps:{shrink:!0}})),r.a.createElement(ga.a,{fullWidth:!0},r.a.createElement(Ui.c,{fullWidth:!0,disabled:!this.state.settings.week.enabled,value:this.state.settings.week.atTime,onChange:this.handleChangeForm("weekAtTime"),variant:"outlined",label:"at time",InputLabelProps:{shrink:!0}})),r.a.createElement(ga.a,{fullWidth:!0},r.a.createElement(Ui.a,{fullWidth:!0,value:this.state.settings.week.startDate,onChange:this.handleChangeForm("weekStartDate"),disabled:!this.state.settings.week.enabled,variant:"outlined",label:"Start Date",InputLabelProps:{shrink:!0}})),r.a.createElement(ga.a,{fullWidth:!0},r.a.createElement(Ui.a,{fullWidth:!0,value:this.state.settings.week.endDate,onChange:this.handleChangeForm("weekEndDate"),disabled:!this.state.settings.week.enabled,variant:"outlined",label:"End Date",InputLabelProps:{shrink:!0}})),r.a.createElement(ga.a,{fullWidth:!0},this.state.settings.week.days.map((function(t){return r.a.createElement(Yi.a,{className:"checkbox-label",control:r.a.createElement(Hi.a,{disabled:!e.state.settings.week.enabled,color:"primary",checked:t.value,onChange:e.handleChangeForm("weekday"),value:t.day}),label:t.day})})))))))}}]),a}(n.Component),Ki=Object(Vi.a)((function(e){return{textField:{width:"100%"},formBox:{padding:e.spacing(2),border:"1px solid rgba(0, 0, 0, 0.42)",marginTop:20},formBoxTitle:{color:"#000",marginTop:-32,marginLeft:5,backgroundColor:"#FFF",display:"inline-block",position:"absolute",padding:5},sheduleDialog:{},scheduleDialogContent:{padding:0},scheduleTable:{},scheduleTableRow:{width:"100%",borderBottom:"1px solid #ccc",display:"inline-flex",alignItems:"center",justifyContent:"flex-start"},scheduleTableRowCenter:{borderBottom:"0"},scheduleTableCell:{width:"25%",float:"left",display:"flex",alignItems:"center"},scheduleTableCell1:{width:"15%",float:"left",display:"flex",alignItems:"center"},scheduleTableCellDays:{width:"100%"},scheduleTableleft:{width:"auto",float:"left",marginRight:10},scheduleTableright:{width:"60%",float:"right"},scheduleNumberTextField:{width:30}}}))(Gi),Qi=a(1131),Ji=a(1135),Xi=a(1134),Zi=a(1132),$i=a(1133),el=a(107),tl=a.n(el),al=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"tab-content"},r.a.createElement("div",null,r.a.createElement(Qi.a,{className:"table",component:"div"},r.a.createElement(Zi.a,{component:"div",className:"table-head"},r.a.createElement($i.a,{component:"div"},r.a.createElement(Xi.a,{component:"div"},"Name"),r.a.createElement(Xi.a,{component:"div"},"Date"),r.a.createElement(Xi.a,{component:"div"},"Execution"),r.a.createElement(Xi.a,{component:"div",className:"project-buttons"}))),r.a.createElement(Ji.a,{component:"div",className:"table-body"},this.props.list.map((function(e){return r.a.createElement($i.a,{component:"div"},r.a.createElement(Xi.a,{component:"div"},e.name),r.a.createElement(Xi.a,{component:"div"},e.date),r.a.createElement(Xi.a,{component:"div"},e.execution),r.a.createElement(Xi.a,{component:"div",className:"project-buttons has-txt-right"},r.a.createElement(At.a,{color:"primary",size:"small"},r.a.createElement(tl.a,{fontSize:"small"}),r.a.createElement("span",null,"View"))))}))))))}}]),a}(n.Component);function nl(e){return r.a.createElement("div",{className:"tab-container"},e.children)}var rl=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={validated:!1,selectedTab:0,open:!1,settings:{},applicableSettings:{}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({open:this.props.open,settings:this.props.settings})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",null,"Schedule"),r.a.createElement(Aa.a,{open:!0,onClose:this.handleRequestClose,className:"dialog schedule",fullWidth:!0,maxWidth:"md"},r.a.createElement(Ma.a,{className:"dialog-content"},r.a.createElement(Pt.a,{className:"dialog-title default-color",mb:2},"Schedule Flow execution"),r.a.createElement(Ri.a,{container:!0,className:"tab-container"},r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(Gt.a,{value:this.state.selectedTab,onChange:function(t,a){e.handleChange(t,a)},classes:{indicator:"flow-tab-indicator"}},r.a.createElement(Kt.a,{label:"Set Schedule"}),r.a.createElement(Kt.a,{label:"Past Schedules",disabled:!0}),r.a.createElement(Kt.a,{label:"Upcoming Schedules",disabled:!0})))),0===this.state.selectedTab&&r.a.createElement(nl,null,this.getScheduleForm()),1===this.state.selectedTab&&r.a.createElement(nl,null,this.getPastFlows()),2===this.state.selectedTab&&r.a.createElement(nl,null,this.getUpcomingFlows())),r.a.createElement(za.a,{className:"footer"},r.a.createElement(At.a,{onClick:function(){e.cancelButtonHandler()},color:"default",className:"button"},"Cancel"),r.a.createElement(At.a,{onClick:function(){e.applyButtonHandler()},variant:"contained",color:"primary",className:"button"},"Apply"))))}},{key:"getScheduleForm",value:function(){var e=this;return r.a.createElement(Ki,{onChange:function(t,a){e.updateSettings(t,a)},validated:this.state.validated,settings:this.state.settings})}},{key:"updateSettings",value:function(e,t){var a=Object.keys(t).filter((function(e){return t[e].enabled}))[0];this.setState(Object(Ot.a)(Object(Ot.a)({},this.state),{},{applicableSettings:Object(Ot.a)(Object(Ot.a)({},t[a]),{},{name:e})}))}},{key:"getPastFlows",value:function(){return r.a.createElement(al,{title:"Past Flows",list:this.props.pastScheduledActions})}},{key:"getUpcomingFlows",value:function(){return r.a.createElement(al,{title:"Upcoming Flows",list:this.props.upcomingScheduledActions})}},{key:"handleChange",value:function(e,t){this.setState({selectedTab:t})}},{key:"cancelButtonHandler",value:function(){this.setState({open:!1}),this.props.onCancel()}},{key:"applyButtonHandler",value:function(){this.setState({open:!1});var e,t,a=this.state.applicableSettings,n=a.name;if(this.setState({validated:!0}),""!==n)if(a.atTime){(t=a.atTime).hours(),t.minutes();var r=a.atTime.format("HH:mm"),s=a.startDate.format("YYYY-MM-DD"),o=(new Date(s+" "+r+":00").getTime()/1e3).toFixed(0),i=a.endDate.format("YYYY-MM-DD"),l=(new Date(i+" "+r+":00").getTime()/1e3).toFixed(0),c=new Date(t).getUTCHours(),u=new Date(t).getUTCMinutes();if(a.days){var d=a.days.filter((function(e){return e.value})).map((function(e){return e.shortForm})),p=a.recurEvery;e=Bi({value:u},{value:c},{value:7*p,recur:!0},null,d)}else{var m=a.recurEvery;e=Bi({value:u},{value:c},{value:m,recur:!0},null,null)}this.props.onSubmit({cron:e,start_time:o,end_time:l,name:n})}else if(a.startTime){(t=a.startTime).hours(),t.minutes();var h=a.startDate.format("YYYY-MM-DD")+" "+(r=a.startTime.format("HH:mm"))+":00",f=(c=new Date(t).getUTCHours(),u=new Date(t).getUTCMinutes(),(new Date(h).getTime()/1e3).toFixed(0));e=Bi({value:u},{value:c},null,null,null),this.props.onSubmit({cron:e,start_time:f,end_time:"",name:n})}}},{key:"handleRequestClose",value:function(){}}]),a}(n.Component),sl=Object(Vi.a)((function(e){return{sheduleDialog:{},scheduleDialogContent:{padding:0}}}))(rl),ol=a(65),il=a.n(ol);a(820);function ll(e){return r.a.createElement("div",{className:"loader-wrapper"},r.a.createElement("div",{className:"loader"}),r.a.createElement("div",{className:"loader-txt"},"Loading"),e.children)}var cl=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({iFrameContentLoaded:!1})}},{key:"onClose",value:function(){this.props.onClose()}},{key:"getContent",value:function(){var e=this;return this.props.loading?(console.log("here***"),r.a.createElement(ll,null,r.a.createElement("div",{className:"loader-txt browse-status"},this.props.status))):r.a.createElement("div",{className:"iframe-container"},!this.state.iFrameContentLoaded&&r.a.createElement("div",null,r.a.createElement(ll,null,r.a.createElement("div",{className:"loader-txt browse-status"},this.props.status))),this.props.isMetabase&&this.state.iFrameContentLoaded&&r.a.createElement("div",{className:"iframe-cover"}),r.a.createElement("iframe",{title:"iKigai",width:"100%",height:"100%",onLoad:function(){e.setState({iFrameContentLoaded:!0})},src:this.props.url,sandbox:"allow-same-origin allow-scripts allow-popups allow-forms"}))}},{key:"render",value:function(){var e=this;return r.a.createElement(Aa.a,{open:this.props.open,maxWidth:"xl",className:"visualize-dialog"},r.a.createElement(La.a,{className:"title"},r.a.createElement(fa.a,{onClick:function(){return e.onClose()},className:"close-btn"},r.a.createElement(il.a,null))),this.getContent())}}]),a}(n.Component),ul=a(534),dl=a.n(ul),pl=oa.a.bind(dl.a),ml=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props._size?this.props._size:"normal",t=this.props._color?this.props._color:"primary",a=!!this.props._navMinimzed&&this.props._navMinimzed,s=pl({loginLogo:!0,minimized:a},e,t);return r.a.createElement("div",{className:s},a?r.a.createElement("span",null,"Iki"):r.a.createElement(n.Fragment,null,r.a.createElement("span",null,"Ikigai"),r.a.createElement("span",null,"Labs")))}}]),a}(n.Component),hl=(a(821),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.loadingTxt,a=e.fadeOut,n="fixed";this.props.placement&&(n=this.props.placement);var s="";return s=a?"iki-loader-wrap hide "+n:"iki-loader-wrap "+n,r.a.createElement("div",{className:s},r.a.createElement("div",{className:"iki-loader-inner"},r.a.createElement("span",{className:"iki-spinner"}),r.a.createElement("div",{className:"iki-loader-txt"},t)))}}]),a}(n.Component)),fl=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={iFrameContentLoaded:!1},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"getVizCentralContent",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement(hl,{loadingTxt:"Preparing Preview...",fadeOut:this.state.iFrameContentLoaded,placement:"viz"}),r.a.createElement("iframe",{title:"iKigai",width:"100%",height:"100%",onLoad:function(){e.props.loading&&e.setState({iFrameContentLoaded:!0})},src:this.props.url,sandbox:"allow-same-origin allow-scripts allow-popups allow-forms"}))}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,this.getVizCentralContent())}}]),a}(n.Component),gl=a(535),bl=a.n(gl),vl=oa.a.bind(bl.a),_l=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).onClose=function(){e.props.onClose(e.props.vizElement)},e.onMinimize=function(){e.props.onMinimize(e.props.vizElement)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"getLeftSidebar",value:function(){return r.a.createElement("div",{className:"interactive-wrap-drawer"},r.a.createElement(ml,{_size:"small",_color:"white"}),r.a.createElement("div",{className:"back-btn-holder"},r.a.createElement("div",{className:"back-to-dashboard drawer-back-link viz-drawer-btn",onClick:this.onClose},r.a.createElement("i",{className:"zmdi zmdi-close zmdi-hc-fw"}),r.a.createElement("div",null,"Close Preview")),r.a.createElement("div",{className:"back-to-dashboard drawer-back-link viz-drawer-btn",onClick:this.onMinimize},r.a.createElement("i",{className:"zmdi zmdi-window-minimize zmdi-hc-fw"}),r.a.createElement("div",null,"Minimize"))))}},{key:"getRightSidebar",value:function(){return r.a.createElement("div",{className:"interactive-wrap-rightbar"},r.a.createElement("div",{className:"info-drawer-root"},r.a.createElement("div",{className:"info-drawer-section"},r.a.createElement("div",{className:"info-drawer-title"},r.a.createElement("span",{className:"title"},"Flow")),r.a.createElement("div",{className:"info-drawer-title-group"},r.a.createElement("div",{className:"info-drawer-title-title"},"Flow name:"),r.a.createElement("div",{className:"info-drawer-title-subtitle clip-txt"},r.a.createElement("span",null,this.props.pipeline.name))),r.a.createElement("div",{className:"info-drawer-title-group"},r.a.createElement("div",{className:"info-drawer-title-title"},"Project name:"),r.a.createElement("div",{className:"info-drawer-title-subtitle clip-txt"},r.a.createElement("span",null,this.props.projectName)))),r.a.createElement("div",{className:"info-drawer-section"},r.a.createElement("div",{className:"info-drawer-title"},r.a.createElement("span",{className:"title"},this.props.vizElement.vizType)),this.props.vizElement&&this.props.vizElement.vizFacetInfo&&"Link"!==this.props.vizElement.vizType&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"info-drawer-title-group"},r.a.createElement("div",{className:"info-drawer-title-title"},"Chain Group:"),r.a.createElement("div",{className:"info-drawer-title-subtitle clip-txt"},this.props.vizElement.vizFacetInfo.chain_group&&r.a.createElement("span",null,ja(this.props.vizElement.vizFacetInfo.chain_group)))),r.a.createElement("div",{className:"info-drawer-title-group"},r.a.createElement("div",{className:"info-drawer-title-title"},"Facet Group:"),r.a.createElement("div",{className:"info-drawer-title-subtitle clip-txt"},this.props.vizElement.vizFacetInfo.facet_group&&r.a.createElement("span",null,ja(this.props.vizElement.vizFacetInfo.facet_group)))),r.a.createElement("div",{className:"info-drawer-title-group"},r.a.createElement("div",{className:"info-drawer-title-title"},"Facet Type:"),r.a.createElement("div",{className:"info-drawer-title-subtitle clip-txt"},this.props.vizElement.vizFacetInfo.facet_type&&r.a.createElement("span",null,ja(this.props.vizElement.vizFacetInfo.facet_type))))),this.props.vizElement&&this.props.vizElement.vizFacetInfo&&"Link"===this.props.vizElement.vizType&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"info-drawer-title-group"},r.a.createElement("div",{className:"info-drawer-title-title"},"Source Facet:"),r.a.createElement("div",{className:"info-drawer-title-subtitle clip-txt"},this.props.vizElement.vizFacetInfo.sourcePort&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,ja(this.props.vizElement.vizFacetInfo.sourcePort.parent.chain_group)),r.a.createElement("span",null," / "),r.a.createElement("span",null,ja(this.props.vizElement.vizFacetInfo.sourcePort.parent.facet_group)),r.a.createElement("span",null," / "),r.a.createElement("span",null,ja(this.props.vizElement.vizFacetInfo.sourcePort.parent.facet_type))))),r.a.createElement("div",{className:"info-drawer-title-group"},r.a.createElement("div",{className:"info-drawer-title-title"},"Target Facet:"),r.a.createElement("div",{className:"info-drawer-title-subtitle clip-txt"},this.props.vizElement.vizFacetInfo.targetPort&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,ja(this.props.vizElement.vizFacetInfo.targetPort.parent.chain_group)),r.a.createElement("span",null," / "),r.a.createElement("span",null,ja(this.props.vizElement.vizFacetInfo.targetPort.parent.facet_group)),r.a.createElement("span",null," / "),r.a.createElement("span",null,ja(this.props.vizElement.vizFacetInfo.targetPort.parent.facet_type)))))))))}},{key:"getContent",value:function(){var e=vl({interactiveWrap:!0,show:this.props.open});return r.a.createElement("div",{className:e},this.getLeftSidebar(),r.a.createElement("div",{className:"interactive-central-holder "+this.props.vizElement.vizType.toLowerCase()+(this.props.vizElement.isDashView?" dash-central-panel":"")},r.a.createElement(fl,{url:this.props.vizElement.iFrameURL,loading:this.props.loading})),this.getRightSidebar())}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,this.getContent())}}]),a}(n.Component),El=a(539),Sl=a.n(El),yl=a(540),wl=a.n(yl),kl=a(50),jl=a(1160),Dl=a(354),Ol=a.n(Dl),Nl=a(352),Cl=a.n(Nl),Pl=a(575),Il=a(257),xl=a.n(Il),Fl=a(79),Tl=a.n(Fl),Al=a(258),Ll=a.n(Al),Ml=a(259),zl=a.n(Ml),Rl=a(537),Vl=a.n(Rl),Ul=a(353),Wl=a.n(Ul),Bl=a(536),Yl=a.n(Bl),ql=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={anchorEl:null},e.setAnchorEl=function(t){e.setState({anchorEl:t})},e.handleClick=function(t){e.setAnchorEl(t.currentTarget),e.props._open&&e.props._open()},e.handleClose=function(){e.setAnchorEl(null),e.props._close&&e.props._close()},e.handleMenuClick=function(){e.handleClose()},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t._functions,n=t._data,s=this.props._type?this.props._type:"";return r.a.createElement(r.a.Fragment,null,r.a.createElement(fa.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:this.handleClick,size:"medium"},r.a.createElement(xl.a,{fontSize:"small"})),r.a.createElement(Pl.a,{classes:{paper:Yl.a.popupMenu},anchorEl:this.state.anchorEl,open:Boolean(this.state.anchorEl),onClose:this.handleClose},a.map((function(t,a){return e.prepareItems(t,n,a,s)}))))}},{key:"prepareItems",value:function(e,t,a,n){var s=this;return e.edit?"Dataset"===n||"Dashboard"===n?r.a.createElement(va.a,{key:a,onClick:function(){e.edit(t),s.handleMenuClick()}},r.a.createElement(Tl.a,null),r.a.createElement("span",null,"Edit ")):r.a.createElement(va.a,{key:a,onClick:function(){e.edit(t._id),s.handleMenuClick()}},r.a.createElement(Tl.a,null),r.a.createElement("span",null,"Edit ")):e.delete?"Project"===n?r.a.createElement(va.a,{key:a,onClick:function(){e.delete(t._id,t._name),s.handleMenuClick()}},r.a.createElement(qt.a,null),r.a.createElement("span",null,"Delete ")):"Dataset"===n||"Flow"===n||"Dashboard"===n?r.a.createElement(va.a,{key:a,onClick:function(){e.delete(t),s.handleMenuClick()}},r.a.createElement(qt.a,null),r.a.createElement("span",null,"Delete ")):r.a.createElement(va.a,{key:a,onClick:function(){e.delete(t._id,t._name),s.handleMenuClick()}},r.a.createElement(qt.a,null),r.a.createElement("span",null,"Delete ")):e.share?r.a.createElement(va.a,{key:a,onClick:function(){e.share(t._id,t._name),s.handleMenuClick()}},r.a.createElement(Ll.a,null),r.a.createElement("span",null,"Share ")):e.clone?r.a.createElement(va.a,{key:a,onClick:function(){e.clone(t._id,t._name),s.handleMenuClick()}},r.a.createElement(zl.a,null),r.a.createElement("span",null,"Clone ")):e.download?"Dataset"===n?r.a.createElement(va.a,{key:a,onClick:function(){e.download(t),s.handleMenuClick()}},r.a.createElement(Wl.a,null),r.a.createElement("span",null,"Download ")):r.a.createElement(va.a,{key:a,onClick:function(){e.download(t._id),s.handleMenuClick()}},r.a.createElement(Wl.a,null),r.a.createElement("span",null,"Download ")):e.browse?r.a.createElement(va.a,{key:a,onClick:function(){e.browse(t._id),s.handleMenuClick()}},r.a.createElement(Vl.a,null),r.a.createElement("span",null,"Browse ")):void 0}}]),a}(n.Component),Hl=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onRequestSort=function(e,t){n.setState({tableSortAsc:!n.state.tableSortAsc,tableSortProperty:t})},n.sortTable=function(e){return""!==n.state.tableSortProperty?n.sortOn(e,n.state.tableSortProperty):e},n.sortOn=function(e,t){return e.sort((function(e,a){return a[t]<e[t]?n.state.tableSortAsc?1:-1:a[t]>e[t]?n.state.tableSortAsc?-1:1:0}))},n.prepareTable=function(){var e,t,a=n.props,s=a._header,o=a._data,i=n.props._functions?n.props._functions:"",l=n.props._type?n.props._type:"",c=n.props._link?n.props._link:"",u=n.props._headerDescr?n.props._headerDescr:"",d=!!n.props._stickyHeader&&n.props._stickyHeader,p=n.sortTable(o);return"Project"===l?(e="project_id",t="name"):"Flow"===l?(e="pipeline_id",t="name"):"Dataset"===l?(e="dataset_id",t="name"):"Dashboard"===l?(e="dashboard_id",t="name"):l&&(e="",t=""),"Peek"===l?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Cl.a.tableHolder},r.a.createElement(Qi.a,{"aria-label":"simple table",component:"div",className:"table",stickyHeader:d},r.a.createElement(Zi.a,{component:"div",className:"table-head"},r.a.createElement($i.a,{component:"div"},s.map((function(e,t){return r.a.createElement(Xi.a,{key:t,align:"left",component:"div",sortDirection:n.state.tableSortAsc?"asc":"desc"},""!==e&&r.a.createElement(jl.a,{active:n.state.tableSortProperty===t,IconComponent:Ol.a,direction:n.state.tableSortAsc?"asc":"desc",onClick:function(e){return n.onRequestSort(e,t)}},s[t]))})))),r.a.createElement(Ji.a,{component:"div",className:"table-body"},r.a.createElement($i.a,{key:"peek-tbl-head-descr",component:"div"},u.map((function(e,t){return r.a.createElement(Xi.a,{align:"left",className:"first-row-col",component:"div",key:"peek-tbl-head-descr-cell-"+t},r.a.createElement("span",null,e))}))),p.map((function(e,t){return r.a.createElement($i.a,{key:"tbl-body-row-"+t,component:"div"},s.map((function(a,n){return r.a.createElement(Xi.a,{align:"left",component:"div",key:"peek-tbl-c-row-"+t+"-cell-"+n},"boolean"===typeof e[n]?r.a.createElement("span",null,e[n].toString()):r.a.createElement("span",null,e[n]))})))})))))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Cl.a.tableHolder},r.a.createElement(Qi.a,{"aria-label":"simple table",component:"div",className:"table"},r.a.createElement(Zi.a,{component:"div",className:"table-head"},r.a.createElement($i.a,{component:"div"},s.map((function(e,t){return r.a.createElement(Xi.a,{key:t,align:"left",component:"div",sortDirection:n.state.tableSortAsc?"asc":"desc"},""!==e.key&&r.a.createElement(jl.a,{active:n.state.tableSortProperty===e.key,IconComponent:Ol.a,direction:n.state.tableSortAsc?"asc":"desc",onClick:function(t){return n.onRequestSort(t,e.key)}},e.name))})),""!==i&&r.a.createElement(Xi.a,{align:"left",component:"div"}))),r.a.createElement(Ji.a,{component:"div",className:"table-body"},p.map((function(a,n){return r.a.createElement($i.a,{key:"tbl-body-row-"+n,component:"div"},s.map((function(t,s){return r.a.createElement(Xi.a,{align:"left",component:"div",key:"tbl-c-row-"+n+"-cell-"+s},""!==c&&0===s?r.a.createElement(kl.a,{to:"".concat(c+""+a[e])},a[t.key]):r.a.createElement("span",null,a[t.key]))})),""!==i&&r.a.createElement(Xi.a,{align:"right",component:"div",key:"tbl-c-row-func-"+n},r.a.createElement(ql,{_type:l,_data:Object(Ot.a)({_id:a[e],_name:a[t]},a),_functions:i})))}))))))},n.state={tableSortAsc:!1,tableSortProperty:""},n}return Object(l.a)(a,[{key:"render",value:function(){return this.prepareTable()}}]),a}(n.Component),Gl=a(538),Kl=a.n(Gl),Ql=oa.a.bind(Kl.a),Jl=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=Ql({peekWrap:!0,show:this.props.peekInitiated,min:"min"===this.props.peekMinMax,max:"max"===this.props.peekMinMax});return r.a.createElement("div",{className:t},this.props.peekInitiated&&r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"peek-wrap-header"},r.a.createElement("div",{className:"peek-wrap-title"},"Peek arrow"),r.a.createElement(fa.a,{className:"is-right mr-16",onClick:function(){"min"===e.props.peekMinMax?e.props.handleMinMaxPeekArrow("max"):e.props.handleMinMaxPeekArrow("min")},size:"small",color:"default"},"min"===this.props.peekMinMax?r.a.createElement(Sl.a,{fontSize:"small"}):r.a.createElement(wl.a,{fontSize:"small"})),r.a.createElement(fa.a,{className:"is-right",onClick:function(){return e.props.handleClosePeekArrow()},size:"small",color:"default"},r.a.createElement(il.a,{fontSize:"small"}))),r.a.createElement("div",{className:"peek-wrap-content"},this.props.peekLoading&&r.a.createElement("div",{className:"iki-loader-wrap peek-load-wrap"},r.a.createElement("div",{className:"iki-loader-inner"},r.a.createElement("span",{className:"iki-spinner"}),r.a.createElement("div",{className:"iki-loader-txt"},"Loading..."))),Object.keys(this.props.peekContent).length>0&&Object.keys(this.props.peekContent).map((function(t){return"column_names"===t&&r.a.createElement(Hl,{key:"peek-tbl-"+t,_type:"Peek",_header:e.props.peekContent.column_names,_stickyHeader:!0,_headerDescr:e.props.peekContent.column_data_types,_data:e.props.peekContent.rows})})))))}}]),a}(n.Component);function Xl(e){var t=e.projectId,a=e.projectName,s=e.handleDialogClose,o=e.handleDeleteDialogSubmit,i=e.handleDeleteDialogCancel,l=e.open,c=e.deleteSubmitLoading;return r.a.createElement(Wa,{_open:l,_onClose:s,_type:"delete",_icon:!1,_title:"Delete project",_subtitle:"",_size:"xs",_align:"center",_content:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"txt-dialog-faded1"},t),r.a.createElement("div",{className:"txt-dialog-impact1"},a)),r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"txt-dialog-impact2 error"},"Are you sure ?"),r.a.createElement("div",{className:"error"},"All your pipelines inside will be deleted as well."))),_actions:r.a.createElement(n.Fragment,null,r.a.createElement(ua,{_variant:"text",_color:"default",_label:"Cancel",_type:"button",_fullWidth:!1,_loading:!1,_onClick:i}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Delete",_type:"button",_fullWidth:!1,_loading:c,_disabled:c,_isDanger:!0,_onClick:o}))})}var Zl=a(88);function $l(e){var t=e.handleDialogClose,a=e.open,s=e.projectId,o=e.projectName,i=e.projectShareDialogErrorState,l=e.projectShareDialogErrorMsg,c=e.onSubmit,u=e.shareSubmitLoading,d=r.a.useState(""),p=Object(Ht.a)(d,2),m=p[0],h=p[1],f=r.a.useState(""),g=Object(Ht.a)(f,2),b=g[0],v=g[1],_=function(){h(""),v(""),t()};return r.a.createElement(Wa,{_open:a,_onClose:_,_type:"share",_icon:!1,_title:"Share project",_subtitle:"",_size:"xs",_align:"left",_content:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"txt-dialog-faded1"},s),r.a.createElement("div",{className:"txt-dialog-impact1"},o)),r.a.createElement("div",{className:"section"},r.a.createElement(Na,{_label:"User email",_placeholder:"Enter email of user to share project with",_type:"text",_autoComplete:"new-password",_value:m,_onChange:function(e){h(e.target.value)},_characterCounter:40,_autoFocus:!0,_fullWidth:!0,_error:b})),!0===i&&r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"submit-error has-txt-centered"},l))),_actions:r.a.createElement(n.Fragment,null,r.a.createElement(ua,{_variant:"text",_color:"default",_label:"Cancel",_type:"button",_fullWidth:!1,_loading:!1,_onClick:_}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Share",_type:"button",_fullWidth:!1,_loading:u,_disabled:u,_onClick:function(e){var t=!1;""!==m?!0===Zl.validate(m)?(v(""),t=!0):(v("Invalid email"),t=!1):(v("Email is required"),t=!1),t&&c(m)}}))})}function ec(e){var t=e.handleDialogClose,a=e.open,s=e.projectID,o=e.projectName,i=e.onSubmit,l=e.renameSubmitLoading,c=r.a.useState(o),u=Object(Ht.a)(c,2),d=u[0],p=u[1],m=r.a.useState(!1),h=Object(Ht.a)(m,2),f=h[0],g=h[1],b=function(){t(),g(!1)};return r.a.createElement(Wa,{_open:a,_onEnter:function(){p(o)},_onClose:b,_type:"share",_icon:!1,_title:"Rename Project",_subtitle:"",_size:"xs",_align:"left",_content:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"txt-dialog-faded1"},s),r.a.createElement("div",{className:"txt-dialog-impact1"},o)),r.a.createElement("div",{className:"section"},r.a.createElement(Na,{_label:"Project name",_placeholder:"Enter project name",_type:"text",_autoComplete:"new-password",_value:d,_onChange:function(e){p(e.target.value)},_characterCounter:40,_autoFocus:!0,_fullWidth:!0,_error:f?"Required":""}))),_actions:r.a.createElement(n.Fragment,null,r.a.createElement(ua,{_variant:"text",_color:"default",_label:"Cancel",_type:"button",_fullWidth:!1,_loading:!1,_onClick:b}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Rename",_type:"button",_fullWidth:!1,_loading:l,_disabled:l,_onClick:function(e){""!==d?(i(d),g(!1)):g(!0)}}))})}var tc=a(272),ac=a(260),nc=a.n(ac),rc=(a(822),function(e){var t=Object(n.useState)(!1),a=Object(Ht.a)(t,2),s=a[0],o=a[1],i=Object(n.useCallback)((function(t){e.onFileAdded(t[0]),o(!1)}),[e]),l=Object(tc.a)({onDrop:i,accept:e.accept?e.accept:".csv"}),c=l.getRootProps,u=l.getInputProps;return Object(n.useEffect)((function(){return function(){o(!1)}}),[]),r.a.createElement("section",{className:"dropzone-container"},!e.fileData||s?r.a.createElement("div",c({className:e.disabled?"dropzone disabled":"dropzone"}),r.a.createElement("input",u()),r.a.createElement("p",null,"Drop the file or click to select file.")):r.a.createElement("div",{className:"upload-file"},r.a.createElement("div",{className:"upload-file-title"},r.a.createElement(nc.a,null),r.a.createElement("span",{className:"upload-name"},e.fileData.name),r.a.createElement("span",{className:"upload-size"},"(",(e.fileData.size/1e3).toFixed(2)," KB)")),r.a.createElement(fa.a,{disabled:e.disabled,onClick:function(){o(!0)}},r.a.createElement(qt.a,{color:"primary"}))))});function sc(e){var t=e.datasetID,a=e.name,s=e.handleDialogClose,o=e.handleSubmit,i=e.handleSubmitOverwrite,l=e.handleCancel,c=e.open,u=e.isEdit,d=e.newDatasetNameExists,p=e.dismissAlert,m=Object(n.useState)(a),h=Object(Ht.a)(m,2),f=h[0],g=h[1],b=Object(n.useState)(""),v=Object(Ht.a)(b,2),_=v[0],E=v[1],S=Object(n.useState)(),y=Object(Ht.a)(S,2),w=y[0],k=y[1],j=Object(n.useState)(""),D=Object(Ht.a)(j,2),O=D[0],N=D[1],C=Object(n.useState)(!1),P=Object(Ht.a)(C,2),I=(P[0],P[1]),x=function(){k(null),I(!1),g(""),E(""),N(""),s()};return r.a.createElement(Wa,{key:"add-dataset-dialog",_open:c,_onExit:x,_onEnter:function(){g(u?a:""),E(""),N(""),k(null),g("")},_onClose:x,_type:"clouploadne",_icon:!1,_title:u?"Edit Dataset":"Upload New Dataset",_subtitle:"",_size:"xs",_align:"left",_content:r.a.createElement(r.a.Fragment,null,!0===d?r.a.createElement(n.Fragment,null,r.a.createElement(aa,{alertType:"warning",alertContent:r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement("span",null,"Dataset with same name already exists."),r.a.createElement("br",null),r.a.createElement("strong",null,f)),r.a.createElement("div",null,"Please note:",r.a.createElement("br",null)," All flows which contain this dataset will be reflected by this change."),r.a.createElement("div",null,r.a.createElement("strong",null,"Are you sure you want to continue and overwrite dataset?"))),alertButtons:r.a.createElement(n.Fragment,null,r.a.createElement(ua,{_variant:"contained",_color:"default",_label:"No, go back",_type:"button",_fullWidth:!1,_loading:!1,_onClick:function(){return p()}}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Yes, overwrite",_type:"button",_isWarning:!0,_fullWidth:!1,_loading:!1,_onClick:function(){""!==f&&""!==w?u?w||""!==f?(i(f,w),I(!1)):I(!0):w&&""!==f?(i(f,w),I(!1)):I(!0):I(!0)}}))})):r.a.createElement("div",null,u&&r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"txt-dialog-faded1"},t),r.a.createElement("div",{className:"txt-dialog-impact1"},a)),r.a.createElement("div",{className:"section"},r.a.createElement(Na,{_label:"Dataset name",_placeholder:"Enter new name for Dataset",_type:"text",_autoComplete:"new-password",_value:f,_onChange:function(e){g(e.target.value)},_characterCounter:40,_autoFocus:!0,_fullWidth:!0,_error:_}),r.a.createElement(rc,{onFileAdded:function(e){return k(e)},fileData:w}),""!==O&&r.a.createElement(Ft.a,{className:"input-error",error:!0},r.a.createElement(Mt.a,null),r.a.createElement("span",null,O))))),_actions:!0!==d&&r.a.createElement(n.Fragment,null,r.a.createElement(ua,{_variant:"text",_color:"default",_label:"Cancel",_type:"button",_fullWidth:!1,_loading:!1,_onClick:function(){return l()}}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:u?"Update":"Upload",_type:"button",_fullWidth:!1,_loading:!1,_disabled:!1,_onClick:function(){""!==f&&""!==w?u?w||""!==f?(o(f,w),I(!1)):I(!0):w&&""!==f?(o(f,w),I(!1)):I(!0):(""===_&&E("Required"),""===w&&N("Required"),I(!1))}}))})}function oc(e){var t=e.datasetId,a=e.datasetName,s=e.handleDialogClose,o=e.handleSubmit,i=e.handleCancel,l=e.open;return r.a.createElement(Wa,{_open:l,_onClose:s,_type:"delete",_icon:!1,_title:"Delete dataset",_subtitle:"",_size:"xs",_align:"center",_content:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"txt-dialog-faded1"},t),r.a.createElement("div",{className:"txt-dialog-impact1"},a)),r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"txt-dialog-impact2 error"},"Are you sure ?"))),_actions:r.a.createElement(n.Fragment,null,r.a.createElement(ua,{_variant:"text",_color:"default",_label:"Cancel",_type:"button",_fullWidth:!1,_loading:!1,_onClick:i}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Delete",_type:"button",_fullWidth:!1,_loading:!1,_isDanger:!0,_onClick:o}))})}function ic(e){var t=e.datasetId,a=e.handleDialogClose,s=e.handleSubmit,o=e.handleCancel,i=e.open,l=Object(n.useState)(""),c=Object(Ht.a)(l,2),u=c[0],d=c[1],p=Object(n.useState)(!1),m=Object(Ht.a)(p,2),h=m[0],f=m[1];return r.a.createElement(Aa.a,{onClose:a,"aria-labelledby":"customized-dialog-title",open:i,className:"dialog",fullWidth:!0,maxWidth:"xs",disableBackdropClick:!0},r.a.createElement(Ma.a,{className:"dialog-content"},r.a.createElement("div",null,r.a.createElement(Pt.a,{className:"dialog-title default-color",mb:2},"Edit dataset"),r.a.createElement("div",null,r.a.createElement("div",{className:"project-id"},t),r.a.createElement("div",{className:"project-name"},e.datsetName)),r.a.createElement(ba.a,{variant:"outlined",margin:"normal",fullWidth:!0,required:!0,label:"Dataset name",placeholder:"Enter new name for Dataset",type:"search",autoComplete:"new-username",value:u,onChange:function(e){d(e.target.value)},error:h&&""===u,autoFocus:!0,InputLabelProps:{shrink:!0}}),h&&""===u&&r.a.createElement(Ft.a,{className:"input-error",error:!0},r.a.createElement(Mt.a,null),r.a.createElement("span",null,"Dataset name required")))),r.a.createElement(za.a,{className:"footer"},r.a.createElement(At.a,{autoFocus:!0,onClick:function(){return o()},color:"default",className:"button"},"Cancel"),r.a.createElement(At.a,{variant:"contained",color:"primary",className:"button",onClick:function(){""!==u?(s(u),f(!1)):f(!0)}},"Update")))}function lc(e){var t=e.handleCreate,a=e.open;return r.a.createElement(Aa.a,{"aria-labelledby":"customized-dialog-title",open:a,className:"dialog",fullWidth:!0,maxWidth:"xs",disableBackdropClick:!0},r.a.createElement(Ma.a,{className:"dialog-content"},r.a.createElement("div",null,r.a.createElement(Pt.a,{className:"dialog-title default-color",mb:2},"Session Expired. Create A New Session."))),r.a.createElement(za.a,{className:"footer"},r.a.createElement(At.a,{autoFocus:!0,onClick:function(){return t()},color:"primary",className:"button"},"Create")))}function cc(e){var t=e.handleDialogClose,a=e.open,s=e.projectID,o=e.projectName,i=e.onSubmit,l=e.duplicateSubmitLoading,c=r.a.useState(o),u=Object(Ht.a)(c,2),d=u[0],p=u[1],m=r.a.useState(!1),h=Object(Ht.a)(m,2),f=h[0],g=h[1],b=r.a.useState(""),v=Object(Ht.a)(b,2),_=v[0],E=v[1],S=r.a.useState(""),y=Object(Ht.a)(S,2),w=y[0],k=y[1],j=function(){t(),g(!1)};return r.a.createElement(Wa,{_open:a,_onEnter:function(){var e=o,t=e.indexOf("copy");if(t>-1){var a=parseInt(e.substring(t+4));isNaN(a)?e+=" "+(a=1):(a++,e=e.substring(0,t+4)+" "+a)}else e=o+" copy";p(e)},_onClose:j,_type:"clone",_icon:!1,_title:"Clone project",_subtitle:"",_size:"xs",_align:"left",_content:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"txt-dialog-faded1"},s),r.a.createElement("div",{className:"txt-dialog-impact1"},o)),r.a.createElement("div",{className:"section"},r.a.createElement(Na,{_label:"Project name",_placeholder:"Enter project name",_type:"text",_autoComplete:"new-password",_value:d,_onChange:function(e){p(e.target.value)},_characterCounter:40,_autoFocus:!0,_fullWidth:!0,_error:f}),r.a.createElement(Na,{_label:"Project owner (optional), current user by default",_placeholder:"Enter email of user that will be project owner",_type:"text",_autoComplete:"new-password",_value:_,_onChange:function(e){E(e.target.value)},_characterCounter:40,_fullWidth:!0,_autoFocus:!1,_error:w}))),_actions:r.a.createElement(n.Fragment,null,r.a.createElement(ua,{_variant:"text",_color:"default",_label:"Cancel",_type:"button",_fullWidth:!1,_loading:!1,_onClick:j}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Clone",_type:"button",_fullWidth:!1,_loading:l,_disabled:l,_onClick:function(e){var t=!1,a=!1;""!==d?(t=!0,g(!1)):g(!0),""!==_?!0===Zl.validate(_)?(k(""),a=!0):(k("Invalid email"),a=!1):a=!0,t&&a&&i(s,d,_)}}))})}function uc(e){var t=e.handleDialogClose,a=e.handleSubmit,s=e.handleCancel,o=e.open,i=e.isImportingProgress,l=e.importFlowNameExists,c=Object(n.useState)(""),u=Object(Ht.a)(c,2),d=u[0],p=u[1],m=Object(n.useState)(""),h=Object(Ht.a)(m,2),f=h[0],g=h[1],b=Object(n.useState)(),v=Object(Ht.a)(b,2),_=v[0],E=v[1],S=Object(n.useState)(""),y=Object(Ht.a)(S,2),w=y[0],k=y[1],j=Object(n.useState)(""),D=Object(Ht.a)(j,2),O=D[0],N=D[1],C=function(){E(null),k(""),N(""),p(""),g(""),t()};return r.a.createElement(Wa,{_open:o,_onClose:C,_onExit:C,_onEnter:function(){p(""),g(""),E(null),N(""),k("")},_type:"regular",_icon:!1,_title:"Import flow",_subtitle:"",_size:"xs",_content:r.a.createElement(n.Fragment,null,r.a.createElement(Na,{_label:"Flow name",_placeholder:"Enter flow name",_type:"text",_value:d,_onChange:function(e){p(e.target.value)},_characterCounter:40,_autoFocus:!0,_fullWidth:!0,_error:f}),r.a.createElement(rc,{onFileAdded:function(e){var t=new FileReader;t.readAsText(e,"UTF-8"),t.onload=function(t){try{var a=JSON.parse(t.target.result);a.facets&&0!==a.facets.length?(k(a),E(e),N("")):N("Invalid pipeline")}catch(n){N("Invalid pipeline")}},t.onerror=function(e){N("Unable to read file")}},accept:".iki",fileData:_}),""!==O&&r.a.createElement(Ft.a,{className:"input-error",error:!0},r.a.createElement(Mt.a,null),r.a.createElement("span",null,O))),_actions:r.a.createElement(n.Fragment,null,r.a.createElement(ua,{_variant:"text",_color:"default",_label:"Cancel",_type:"button",_fullWidth:!1,_loading:!1,_onClick:function(){return s()}}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Create",_type:"button",_fullWidth:!1,_loading:i,_disabled:i,_isAlternate:!0,_onClick:function(){var e=0;""===w||null===w?(e++,N("Required")):N(""),""===d?(e++,g("Required")):l?(e++,g("Flow with same name already exists. Please choose different name")):g(""),0===e&&a(d,w)}}))})}var dc=a(1078),pc=a(1161);function mc(e){var t=e.handleSubmit,a=e.handleCancel,s=e.open,o=e.isCloningProgress,i=e.cloneFlowId,l=e.cloneFlowName,c=e.cloneFlowError,u=e.projectsList,d=e.projectId,p=Object(n.useState)(l),m=Object(Ht.a)(p,2),h=m[0],f=m[1],g=Object(n.useState)(""),b=Object(Ht.a)(g,2),v=b[0],_=b[1],E=r.a.useState("with-data"),S=Object(Ht.a)(E,2),y=S[0],w=S[1],k=r.a.useState(!1),j=Object(Ht.a)(k,2),D=j[0],O=j[1],N=r.a.useState(d),C=Object(Ht.a)(N,2),P=C[0],I=C[1],x=r.a.useState(""),F=Object(Ht.a)(x,2),T=F[0],A=F[1],L=function(e){var t=e.target.value;I(t),t!==d?(O(!0),w("no-data")):(O(!1),w("with-data"))};return r.a.createElement(Wa,{_open:s,_onEnter:function(){I(d),_(""),A(""),function(){var e=l,t=e.indexOf("copy");if(t>-1){var a=parseInt(e.substring(t+4));isNaN(a)?e+=" "+(a=1):(a++,e=e.substring(0,t+4)+" "+a)}else e=l+" copy";f(e)}(),w("with-data"),O(!1)},_onClose:function(){f(""),_(""),A(""),I(""),a(),w("with-data"),O(!1)},_onExit:function(){f(""),_(""),A(""),I(""),a(),w("with-data"),O(!1)},_type:"regular",_icon:!1,_title:"Clone Flow",_subtitle:"",_size:"xs",_content:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"txt-dialog-faded1"},i),r.a.createElement("div",{className:"txt-dialog-impact1"},l)),r.a.createElement(Pt.a,{mb:2},r.a.createElement(ga.a,{className:"radio-btn-holder with-label",component:"fieldset",disabled:D},r.a.createElement(dc.a,{component:"div"},"Clone type:"),r.a.createElement(pc.a,{"aria-label":"clone-type",name:"clone-type",value:y,onChange:function(e){w(e.target.value)}},r.a.createElement(Yi.a,{value:"with-data",control:r.a.createElement(qi.a,{color:"primary",size:"small"}),label:"Full copy (With data)"}),r.a.createElement(Yi.a,{value:"no-data",control:r.a.createElement(qi.a,{color:"primary",size:"small"}),label:"Without data"})))),r.a.createElement(Na,{_required:!0,_label:"Name of cloned Flow",_placeholder:"Enter name of cloned Flow",_type:"text",_value:h,_onChange:function(e){f(e.target.value)},_characterCounter:40,_fullWidth:!0,_error:v}),function(){var e=[];return u.forEach((function(t,a){var n={value:t.project_id,text:t.name};e.push(n)})),r.a.createElement(Na,{_required:!0,_label:"Cloned Flow target Project",_placeholder:"",_type:"text",_autoComplete:"new-password",_value:P,_isSelect:!0,_selectOptionsKeyForVal:"value",_selectOptionsKeyForTxt:"text",_fullWidth:!0,_selectOptions:e,_onChange:L,_error:T})}()),_actions:r.a.createElement(n.Fragment,null,r.a.createElement(ua,{_variant:"text",_color:"default",_label:"Cancel",_type:"button",_fullWidth:!1,_loading:!1,_onClick:function(){return a()}}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Clone",_type:"button",_fullWidth:!1,_loading:o,_disabled:o,_isAlternate:!0,_onClick:function(){var e=0;""===h?(e++,_("Required")):""!==c?(e++,_(c)):_(""),""===P?(e++,A("Required")):A(""),0===e&&t(h,i,P,y)}}))})}var hc=a(1136),fc=a(542),gc=a.n(fc),bc=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(hc.a,{nodeId:this.props.nodeId,label:r.a.createElement(n.Fragment,null,r.a.createElement(gc.a,{className:"drag-icon"}),r.a.createElement("span",null,this.props.node.facet_info.custom_facet_type&&"API"===this.props.node.facet_info.custom_facet_type?this.props.node.facet_info.custom_facet_type:ja(this.props.node.facet_info.facet_type)),this.props.node.documentation&&""!==this.props.node.documentation&&r.a.createElement("span",{className:"drawer-help form-help-icon",onClick:function(){e.props.triggerHelpDrawer(e.props.node.documentation)}},"?")),className:"grabbable",draggable:!0,onDragStart:function(t){t.dataTransfer.setData("node-data",JSON.stringify(e.props.node))}})}}]),a}(n.Component),vc=Object(Vi.a)((function(e){return{componentItem:{display:"inline-block",padding:e.spacing(1),textAlign:"center",backgroundColor:"#FFFFFF",borderRadius:5,margin:5,fontSize:12,width:"45%",maxWidth:"45%"},icon:{marginBottom:4,fontSize:20}}}))(bc),_c=a(1137),Ec=a(262),Sc=a.n(Ec),yc=a(543),wc=a.n(yc);a(823);function kc(e){var t=e.helpText,a=Object(n.useState)(!1),s=Object(Ht.a)(a,2),o=s[0],i=s[1],l=Object(n.useState)(0),c=Object(Ht.a)(l,2),u=c[0],d=c[1];setTimeout((function(){i(!0)}),1e3);var p=function(e,t){d(t)};return r.a.createElement(n.Fragment,null,r.a.createElement(hl,{loadingTxt:"Loading Facet Documentation...",fadeOut:o,placement:"facet-doc"}),r.a.createElement("div",{className:"help-drawer-inner"},r.a.createElement(fa.a,{className:"close-help-drawer-btn",size:"small",onClick:e.handleCloseHelpDrawer},r.a.createElement(il.a,{fontSize:"small"})),function(e){var t=e.split("[").join("").split("[").join("").split("Example:\n");return 1===e.length?r.a.createElement(n.Fragment,null,r.a.createElement(Xt.a,{source:t[0],escapeHtml:!1})):r.a.createElement(n.Fragment,null,r.a.createElement(Gt.a,{value:u,onChange:p,indicatorColor:"primary",className:"help-tabs"},r.a.createElement(Kt.a,{label:"Info",id:"tab-0"}),r.a.createElement(Kt.a,{label:"Example",id:"tab-1"})),r.a.createElement("div",{hidden:0!==u,className:"info-block"},r.a.createElement(Xt.a,{source:t[0],escapeHtml:!1})),r.a.createElement("div",{hidden:1!==u,className:"info-example-block"},r.a.createElement("img",{src:t[1].trim(),alt:"example"})))}(t)))}a(824);var jc=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={toggleHelpDrawer:!1,helpDrawerContent:""},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"tree-view-holder-title"},r.a.createElement("span",null,"Facets")),r.a.createElement("div",{className:"tree-view-holder"},r.a.createElement(_c.a,{defaultCollapseIcon:r.a.createElement(Sc.a,null),defaultExpandIcon:r.a.createElement(wc.a,null),className:"tree-view-component"},this.getComponentList())),r.a.createElement("div",{className:this.state.toggleHelpDrawer?"help-drawer-wrap is-open":"help-drawer-wrap"},this.state.toggleHelpDrawer&&r.a.createElement(kc,{helpText:this.state.helpDrawerContent,handleCloseHelpDrawer:function(){return e.closeHelpDrawer()}})))}},{key:"handleHelpDrawer",value:function(e){this.setState({toggleHelpDrawer:!0,helpDrawerContent:e})}},{key:"closeHelpDrawer",value:function(){this.setState({toggleHelpDrawer:!1,helpDrawerContent:""})}},{key:"getComponentList",value:function(){var e=this;if(this.props.components){var t;return t=this.props.components,Object.keys(t).sort().map((function(a){return"MID"===a?Object.keys(t[a]).sort().map((function(n){return r.a.createElement(hc.a,{nodeId:a+"-"+n,key:a+"-"+n,label:ja(n)},Object.keys(t[a][n]).sort().map((function(s){return r.a.createElement(vc,{nodeId:a+"-"+n+"-"+s,key:a+"-"+n+"-"+s,node:t[a][n][s],triggerHelpDrawer:function(t){e.handleHelpDrawer(t)}})})))})):r.a.createElement(hc.a,{nodeId:a,key:a,label:ja(a)},Object.keys(t[a]).sort().map((function(n){return r.a.createElement(hc.a,{nodeId:a+"-"+n,key:a+"-"+n,label:ja(n)},Object.keys(t[a][n]).sort().map((function(s){return r.a.createElement(vc,{nodeId:a+"-"+n+"-"+s,key:a+"-"+n+"-"+s,node:t[a][n][s],triggerHelpDrawer:function(t){e.handleHelpDrawer(t)}})})))})))}))}}}]),a}(n.Component),Dc=a(342),Oc=a(343),Nc=a(1080),Cc=a(545),Pc=a.n(Cc),Ic=a(265),xc=a.n(Ic),Fc=a(544),Tc=a.n(Fc),Ac=a(161),Lc=a.n(Ac),Mc=a(264),zc=a.n(Mc),Rc=a(547),Vc=a.n(Rc),Uc=a(546),Wc=a.n(Uc),Bc=a(263),Yc=a.n(Bc);function qc(e){var t=r.a.useState(null),a=Object(Ht.a)(t,2),s=a[0],o=a[1],i=function(){o(null)};return r.a.createElement(n.Fragment,null,r.a.createElement(fa.a,{className:"more-button",onClick:function(e){o(e.currentTarget)},size:"small"},r.a.createElement(Yc.a,null)),r.a.createElement(Pl.a,{classes:{paper:"action-btn-menu"},anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:i},r.a.createElement(va.a,{onClick:function(){i(),e.onActions()}},r.a.createElement("span",null,"Actions")),r.a.createElement(va.a,{onClick:function(){i(),e.onArguments()}},r.a.createElement("span",null,"Arguments"))))}var Hc,Gc,Kc,Qc=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={title:"",editMode:!1,projectName:"",flowDiagramMode:"",statusBoxMode:!1,selectedActionsTab:"actions",pipelineInfo:{}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({flowDiagramMode:this.props.flowDiagramMode,pipelineInfo:this.props.pipelineInfo})}},{key:"toggleEditMode",value:function(){this.state.editMode?(this.setState({editMode:!1}),this.props.onSaveTitle(this.state.title,this.state.projectName)):this.setState({editMode:!0,title:this.props.title,projectName:this.props.projectName})}},{key:"toggleStatusBoxMode",value:function(){this.state.statusBoxMode?this.setState({statusBoxMode:!1}):this.setState({statusBoxMode:!0})}},{key:"timeConverter",value:function(e){var t=new Date(1e3*e),a=t.getFullYear(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()];return t.getDate()+" "+n+" "+a+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}},{key:"getResponse",value:function(){var e=this,t=this.props.pipelineLogs,a=Object.keys(t);if(0!==a.length)return a.map((function(a){var n=t[a],s=e.timeConverter(n.timestamp);return n.status&&r.a.createElement("div",{key:a,className:"SUCCESS"===n.status?"status-row fade-in success":"status-row fade-in failed"},r.a.createElement("div",{className:"status-icon"},"SUCCESS"===n.status?r.a.createElement(Lc.a,{fontSize:"small"}):r.a.createElement(zc.a,{fontSize:"small"})),r.a.createElement("div",{className:"status-data"},r.a.createElement("div",{className:"status-timestamp clip-txt"},s),r.a.createElement("div",{className:"status-user clip-txt"},n.user),r.a.createElement("div",{className:"status-run_type clip-txt"},n.run_type),r.a.createElement("div",{className:"status-message clip-txt"},n.message)))}))}},{key:"onChangeProjectName",value:function(e){this.setState({projectName:e.target.value})}},{key:"onChangeTitle",value:function(e){this.setState({title:e.target.value})}},{key:"toggleFlowDiagramMode",value:function(e){this.setState({flowDiagramMode:e}),this.props.onFlowDiagramModeChanged(e)}},{key:"handleActionsTabClick",value:function(e){this.setState({selectedActionsTab:e})}},{key:"render",value:function(){var e,t=this,a="interactive"===this.state.flowDiagramMode||this.props.modeChangePending||this.props.pipelineRunning,n="";return""!==this.state.pipelineInfo&&(e=this.state.pipelineInfo).definition&&e.definition.arguments&&e.definition.arguments.data_type_cast_rule&&""===n&&(n=e.definition.arguments.data_type_cast_rule),r.a.createElement("div",{className:"info-drawer-root"},r.a.createElement("div",{className:"info-drawer-section"},r.a.createElement("div",{className:"info-drawer-title"},r.a.createElement("span",{className:"title"},"Info"),r.a.createElement(fa.a,{onClick:function(){return t.toggleEditMode()},size:"small",disabled:a},this.state.editMode?r.a.createElement(xc.a,{fontSize:"small"}):r.a.createElement(Tl.a,{fontSize:"small"}))),r.a.createElement("div",{className:"info-drawer-title-group"},r.a.createElement("div",{className:"info-drawer-title-title"},"Flow name:"),r.a.createElement("div",{className:"info-drawer-title-subtitle clip-txt"},!this.state.editMode&&r.a.createElement("span",null,this.props.title),this.state.editMode&&r.a.createElement(Dc.a,{value:this.state.title,onChange:function(e){return t.onChangeTitle(e)},inputProps:{maxLength:40}}))),r.a.createElement("div",{className:"info-drawer-title-group"},r.a.createElement("div",{className:"info-drawer-title-title"},"Project name:"),r.a.createElement("div",{className:"info-drawer-title-subtitle clip-txt"},!this.state.editMode&&r.a.createElement("span",null,this.props.projectName),this.state.editMode&&r.a.createElement(Dc.a,{value:this.state.projectName,onChange:function(e){return t.onChangeProjectName(e)},inputProps:{maxLength:40}})))),r.a.createElement("div",{className:"info-drawer-section"},r.a.createElement("div",{className:"info-drawer-title"},r.a.createElement("span",{className:"title"},"actions"===this.state.selectedActionsTab&&r.a.createElement("span",null,"Actions"),"arguments"===this.state.selectedActionsTab&&r.a.createElement("span",null,"Arguments")),r.a.createElement(qc,{onActions:function(){t.setState({selectedActionsTab:"actions"})},onArguments:function(){t.setState({selectedActionsTab:"arguments"})}})),"actions"===this.state.selectedActionsTab&&r.a.createElement("div",{className:"info-drawer-button-group"},r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Run Flow",_type:"button",_align:"left",_fullWidth:!0,_disabled:a,_loading:this.props.pipelineRunning,_startIcon:r.a.createElement(Tc.a,null),_onClick:function(){return t.props.onRun()}}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Schedule Flow",_type:"button",_align:"left",_fullWidth:!0,_disabled:a,_loading:!1,_startIcon:r.a.createElement(Pc.a,null),_onClick:function(){return t.props.onSchedule()}})),"arguments"===this.state.selectedActionsTab&&(Object.keys(this.props.pipelineSpecs).length>0?"data_type_cast_rule"===this.props.pipelineSpecs[0].name&&r.a.createElement("div",{className:"mt-10"},r.a.createElement("div",{className:"form-input mt-10"},r.a.createElement(ga.a,{required:this.props.pipelineSpecs[0].is_required,className:"select-control",margin:"normal",variant:"outlined",size:"small",fullWidth:!0},r.a.createElement(Oc.a,{htmlFor:this.props.pipelineSpecs[0].name,shrink:!0},ja(this.props.pipelineSpecs[0].name)),r.a.createElement(Nc.a,{value:n||"",variant:"outlined",displayEmpty:!0,onChange:function(e){t.props.updatePipelineArg("data_type_cast_rule",e.target.value);var a=t.state.pipelineInfo;a.definition.arguments=Object(Dt.a)({},"data_type_cast_rule",e.target.value),t.setState(Object(Ot.a)(Object(Ot.a)({},t.state),{},{pipelineInfo:a}))},inputProps:{name:this.props.pipelineSpecs[0].name,id:this.props.pipelineSpecs[0].name}},r.a.createElement(va.a,{value:"",disabled:!0},"Select"),this.props.pipelineSpecs[0].options.map((function(e,a){if("file_type"===t.props.pipelineSpecs[0].name)var n=e;else n=ja(e);return r.a.createElement(va.a,{value:e,key:a},n)})))))):r.a.createElement("div",{className:"mt-10 secondary"},"No arguments"))),r.a.createElement("div",{className:this.state.statusBoxMode?"info-drawer-section status-section is-open":"info-drawer-section status-section"},r.a.createElement("div",{className:"info-drawer-title"},r.a.createElement("span",{className:"title"},"Status"),r.a.createElement(fa.a,{onClick:function(){return t.toggleStatusBoxMode()},size:"small"},this.state.statusBoxMode?r.a.createElement(Wc.a,{fontSize:"small"}):r.a.createElement(Vc.a,{fontSize:"small"}))),r.a.createElement("div",{className:"status-holder"},this.getResponse())))}}]),a}(n.Component),Jc=a(570),Xc=a.n(Jc),Zc=a(571),$c=a.n(Zc),eu=a(572),tu=a.n(eu),au=a(568),nu=a.n(au),ru=a(569),su=a.n(ru),ou=function(){function e(t,a){Object(i.a)(this,e),this._execute=void 0,this._undo=void 0,this._executedValue=void 0,this._undoValue=void 0,this._execute=t,this._undo=a}return Object(l.a)(e,[{key:"execute",value:function(){this._executedValue=this._execute(this._undoValue),console.log(this._undoValue)}},{key:"undo",value:function(){console.log(this._executedValue),this._undoValue=this._undo(this._executedValue)}}]),e}(),iu=a(66),lu=a.n(iu),cu=a(361),uu=a(132),du=a(60),pu=a.n(du),mu=a(266),hu=a.n(mu),fu=(a(1036),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this,{type:"custom-link",width:4})).listenerRef=void 0,e.added=!1,e.isConnectedToANode=!1,e.buttonsState=!1,e.handleButtonsStateEnabled=void 0,e.handleButtonsStateDisabled=void 0,e.handleButtonsStateEnabled=function(){e.buttonsState=!0},e.handleButtonsStateDisabled=function(){e.buttonsState=!1},e}return a}(iu.DefaultLinkModel)),gu=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={hover:!1},e.path=null,e.pathContainer=void 0,e.percent=50,e.arrow=null,e.buttonGroup=null,e.mounted=!1,e.eventsAdded=!1,e.radtodeg=180/Math.PI,e.callback=function(){},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,this.callback=function(){if(e.path&&e.arrow){var t=e.path.getPointAtLength(e.path.getTotalLength()*(e.percent/100)),a=e.path.getPointAtLength(e.path.getTotalLength()*((e.percent-2)/100));e.eventsAdded||(e.eventsAdded=!0,e.pathContainer.addEventListener("mouseover",(function(){e.setState({hover:!0})})),e.pathContainer.addEventListener("mouseout",(function(){e.setState({hover:!1})})));var n=t.x-a.x,r=t.y-a.y,s=90+Math.atan2(r,n)*e.radtodeg;e.arrow.setAttribute("transform","translate("+t.x+" "+t.y+") rotate("+s+")");var o=t.x-50,i=t.y+10;e.buttonGroup.style.transform="translate("+o+"px, "+i+"px)",e.buttonGroup.style.pointerEvents="all",e.mounted&&requestAnimationFrame(e.callback)}},requestAnimationFrame(this.callback)}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"handlePeekClick",value:function(e){this.props.model.handleButtonsStateEnabled(),this.props.model.fireEvent({model:this.props.model},"peek")}},{key:"handlePreviewClick",value:function(e){this.props.model.fireEvent({model:this.props.model},"browseLink")}},{key:"handleEditClick",value:function(){this.props.model.fireEvent({model:this.props.model},"editLink")}},{key:"handleDeleteClick",value:function(){this.props.model.fireEvent({model:this.props.model},"deleteLink")}},{key:"render",value:function(){var e=this,t=this.props.model.getOptions().width||0;return void 0!==this.props.model.getOptions().width&&(t+=60),n.createElement(n.Fragment,null,n.createElement("g",{className:"custom-link",ref:function(t){e.pathContainer=t}},n.createElement("path",{fill:"none",ref:function(t){e.path=t},strokeWidth:this.props.model.getOptions().width,d:this.props.path,className:"link-path"}),n.createElement("path",{fill:"none",ref:function(t){e.path=t},strokeWidth:this.props.model.getOptions().width,d:this.props.path,className:this.state.hover?"link-path pulse-path hovered":"link-path pulse-path"}),n.createElement("path",{fill:"none",ref:function(t){e.path=t},strokeWidth:t,stroke:"rgba(0,0,0,0)",className:"link-path-hitarea",d:this.props.path}),n.createElement("polygon",{ref:function(t){e.arrow=t},points:"0,-10 -10,10 10,10",className:"link-arrow"}),n.createElement("foreignObject",{className:"link-button-group-container",width:"100%",height:"100%"},n.createElement("div",{ref:function(t){e.buttonGroup=t},className:!this.props.model.isLocked()&&this.state.hover?"link-button-group show":"link-button-group hide"},n.createElement(Qt.a,{arrow:!0,title:"Peek",placement:"right",className:"default-tooltip",classes:{tooltip:"default-tooltip",popper:"default-popper"}},n.createElement(It.a,{color:"primary","aria-label":"peek",size:"small",onClick:this.handlePeekClick.bind(this),className:"peek-arrow",disabled:this.props.model.buttonsState},n.createElement(pu.a,null))),n.createElement(Qt.a,{arrow:!0,title:"Preview",placement:"right",className:"default-tooltip",classes:{tooltip:"default-tooltip",popper:"default-popper"}},n.createElement(It.a,{color:"primary","aria-label":"visualize",size:"small",onClick:this.handlePreviewClick.bind(this),disabled:this.props.model.buttonsState},n.createElement(hu.a,null))),n.createElement(Qt.a,{arrow:!0,title:"Edit",placement:"right",className:"default-tooltip",classes:{tooltip:"default-tooltip",popper:"default-popper"}},n.createElement(It.a,{color:"primary","aria-label":"edit",size:"small",onClick:this.handleEditClick.bind(this),disabled:this.props.model.buttonsState},n.createElement(Tl.a,null))),n.createElement(Qt.a,{arrow:!0,title:"Delete",placement:"right",className:"default-tooltip",classes:{tooltip:"default-tooltip",popper:"default-popper"}},n.createElement(It.a,{color:"primary","aria-label":"delete",size:"small",onClick:this.handleDeleteClick.bind(this),disabled:this.props.model.buttonsState},n.createElement(qt.a,null)))))))}}]),a}(n.Component),bu=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.call(this,"custom-link")}return Object(l.a)(a,[{key:"generateModel",value:function(){return new fu}},{key:"generateLinkSegment",value:function(e,t,a){return n.createElement("g",null,n.createElement(gu,{model:e,path:a}))}}]),a}(iu.DefaultLinkFactory),vu=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"createLinkModel",value:function(){return new fu}}]),a}(iu.DefaultPortModel),_u=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{color:"red",name:"Model",facet_id:"0",facet_type:"facet type",facet_group:"facet group",chain_group:"chain group",custom_facet_type:"custom facet type",custom_facet_group:"custom facet group",custom_chain_group:"custom facet group"};return Object(i.a)(this,a),(e=t.call(this,Object(Ot.a)(Object(Ot.a)({},n),{},{type:"custom-node"}))).color=void 0,e.name=void 0,e.facet_id=void 0,e.facet_type=void 0,e.facet_group=void 0,e.chain_group=void 0,e.custom_facet_type=void 0,e.custom_facet_group=void 0,e.custom_chain_group=void 0,e.linksRef=[],e.valid=void 0,e.errorMessages=void 0,e.color=n.color,e.name=n.name,e.valid=!0,e.errorMessages=[],e.facet_type=n.facet_type,e.facet_group=n.facet_group,e.facet_id=n.facet_id,e.chain_group=n.chain_group,e.custom_facet_type=n.custom_facet_type,e.custom_facet_group=n.custom_facet_group,e.custom_chain_group=n.custom_chain_group,"INPUT"!==e.chain_group&&e.addPort(new vu({in:!0,name:"in"})),"OUTPUT"!==e.chain_group&&e.addPort(new vu({in:!1,name:"out"})),e}return Object(l.a)(a,[{key:"serialize",value:function(){return Object(Ot.a)(Object(Ot.a)({},Object(cu.a)(Object(uu.a)(a.prototype),"serialize",this).call(this)),{},{color:this.color})}},{key:"deserialize",value:function(e){Object(cu.a)(Object(uu.a)(a.prototype),"deserialize",this).call(this,e)}}]),a}(iu.NodeModel),Eu=a(1138),Su=a(69),yu=a.n(Su),wu=oa.a.bind(yu.a),ku=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).listenerRef=void 0,n.state={valid:e.node.valid,mouseOver:!1,updatedNodeName:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.listenerRef=this.props.node.registerListener({validatedNode:this.handleNodeValidate.bind(this),updatedFacetName:this.handleNodeNameUpdate.bind(this)})}},{key:"componentWillUnmount",value:function(){this.props.node.deregisterListener(this.listenerRef)}},{key:"handleNodeValidate",value:function(e){this.setState({valid:this.props.node.valid})}},{key:"handleNodeNameUpdate",value:function(e){this.setState({updatedNodeName:this.props.node.name})}},{key:"handlePreviewClick",value:function(e){this.props.node.fireEvent({node:this.props.node},"visualize")}},{key:"handleEditClick",value:function(e){this.props.node.fireEvent({node:this.props.node},"editNode")}},{key:"handleDeleteClick",value:function(e){this.props.node.fireEvent({node:this.props.node},"deleteNode")}},{key:"handleMouseOver",value:function(){"PYTHON_SCRIPT"===this.props.node.facet_type&&this.setState({mouseOver:!0})}},{key:"handleMouseOut",value:function(){"PYTHON_SCRIPT"===this.props.node.facet_type&&this.setState({mouseOver:!1})}},{key:"getErrorMessage",value:function(){return n.createElement("div",null,n.createElement("div",{className:yu.a.errorMessageTitle},"Please fix the following errors!"),n.createElement("ul",{className:yu.a.errorList},this.props.node.errorMessages.map((function(e,t){return n.createElement("li",{className:yu.a.errorMessage,key:"error-".concat(t)},e)}))))}},{key:"getErrorMessages",value:function(){if(!this.state.valid)return n.createElement("div",null,n.createElement(Qt.a,{arrow:!0,interactive:!0,title:this.getErrorMessage(),leaveDelay:200,placement:"right",className:"tooltip-holder"},n.createElement(Mt.a,{className:yu.a.nodeErrorIcon})))}},{key:"render",value:function(){var e=this,t=wu({customNode:!0,error:!this.state.valid}),a=wu({"jr-card":!0,"jr-card-widget":!0,customNodeCard:!0,error:!this.state.valid,hovered:this.state.mouseOver});return n.createElement("div",{className:t},this.getErrorMessages(),n.createElement("div",{className:yu.a.buttonGroup},("PYTHON_SCRIPT"===this.props.node.facet_type||"API"===this.props.node.custom_facet_type)&&n.createElement(Qt.a,{arrow:!0,title:"Preview",placement:"top",className:"default-tooltip",classes:{tooltip:"default-tooltip",popper:"default-popper"}},n.createElement(It.a,{color:"primary","aria-label":"visualize",size:"small",onClick:this.handlePreviewClick.bind(this)},n.createElement(hu.a,null))),n.createElement(Qt.a,{arrow:!0,title:"Edit",placement:"top",className:"default-tooltip",classes:{tooltip:"default-tooltip",popper:"default-popper"}},n.createElement(It.a,{color:"primary","aria-label":"edit",size:"small",onClick:this.handleEditClick.bind(this)},n.createElement(Tl.a,null))),n.createElement(Qt.a,{arrow:!0,title:"Delete",placement:"top",className:"default-tooltip",classes:{tooltip:"default-tooltip",popper:"default-popper"}},n.createElement(It.a,{color:"primary","aria-label":"delete",size:"small",onClick:this.handleDeleteClick.bind(this)},n.createElement(qt.a,null)))),n.createElement(Eu.a,{onMouseEnter:function(){e.handleMouseOver()},onMouseLeave:function(){e.handleMouseOut()},className:a},""!==this.props.node.name&&n.createElement("div",{className:yu.a.facetNameHolder},n.createElement("div",{className:yu.a.facetName},this.props.node.name)),"INPUT"!==this.props.node.chain_group&&n.createElement(iu.PortWidget,{className:"in",engine:this.props.engine,port:this.props.node.getPort("in")},n.createElement("div",{className:yu.a.circlePort})),"OUTPUT"!==this.props.node.chain_group&&n.createElement(iu.PortWidget,{className:"out",engine:this.props.engine,port:this.props.node.getPort("out")},n.createElement("div",{className:yu.a.circlePort})),n.createElement("div",{className:yu.a.customNodeName},n.createElement("div",{className:yu.a.customNodeHeader},n.createElement("div",{className:yu.a.customNodeChainGroup},ja(this.props.node.chain_group)),n.createElement("div",null,"API"===this.props.node.custom_facet_type?"Connector":ja(this.props.node.facet_group))),n.createElement("div",{className:yu.a.customNodeTitle},"API"===this.props.node.custom_facet_type?this.props.node.custom_facet_type.toUpperCase():ja(this.props.node.facet_type)))))}}]),a}(n.Component),ju=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.call(this,"custom-node")}return Object(l.a)(a,[{key:"generateModel",value:function(e){return new _u}},{key:"generateReactWidget",value:function(e){return n.createElement(ku,{engine:this.engine,node:e.model})}}]),a}(Nt.AbstractReactFactory),Du={},Ou=0,Nu=0,Cu=function(){var e=(Hc=lu()()).getStateMachine().getCurrentState();return e instanceof iu.DefaultDiagramState&&(e.dragNewLink.config.allowLooseLinks=!1),Hc.getNodeFactories().registerFactory(new ju),Hc.getLinkFactories().registerFactory(new bu),Hc.getActionEventBus().deregisterAction(Hc.getActionEventBus().getActionsForType(Nt.InputType.KEY_DOWN)[0]),Gc=new iu.DiagramModel,Hc.setModel(Gc),Hc.setMaxNumberPointsPerLink(0),Kc=new iu.DagreEngine({graph:{rankdir:"LR",ranker:"longest-path",ranksep:200},includeLinks:!0}),Hc},Pu=function(e){for(var t=0;t<e.length;t++){var a=e[t];Iu(a.source,a.destination)}},Iu=function(e,t){var a=new fu,n=Du["facet_"+e],r=Du["facet_"+t];a.setSourcePort(n.getPort("out")),a.setTargetPort(r.getPort("in"));var s=a.getFirstPoint().getPosition();if(0===s.x||0===s.y){var o=a.getSourcePort().getPosition().clone();o.translate(7,7),a.getFirstPoint().setPosition(o)}var i=a.getLastPoint().getPosition();if(0===i.x||0===i.y){var l=a.getTargetPort().getPosition().clone();l.translate(7,7),a.getLastPoint().setPosition(l)}a.isConnectedToANode=!0,a.added=!0,Gc.addLink(a)},xu=function e(){var t=Tu(),a=t.getModel(),n=t.getCanvas();if(n){var r=a.getZoomLevel()/100,s=0,o=0,i=99999,l=99999,c=Array.from(n.getElementsByClassName("node"));c.map((function(e){var t=e,a=t.offsetWidth,n=t.offsetHeight,r=t.offsetLeft,c=t.offsetTop;return s=Math.max(s,Math.abs(r)+a),o=Math.max(o,Math.abs(c)+n),i=Math.min(i,r),l=Math.min(l,c),e})),s-=i,o-=l,c.length>0&&0===s&&0===o?requestAnimationFrame(e):(a.setOffset(.5*(n.clientWidth-s*r),.5*(n.clientHeight-o*r)),t.repaintCanvas())}},Fu=function(){var e=Tu().getModel();e.setZoomLevel(.9*e.getZoomLevel()),xu()},Tu=function(){return Hc},Au=function(){return Gc},Lu=function e(){if(Nu++,Hc.getCanvas()){Gc.getNodes().length,Gc.getLinks().length;Kc.redistribute(Gc),Kc.options.graph.height>0?Hc.repaintCanvas(!0).then((function(){requestAnimationFrame(xu),Nu=0})):Nu<10&&setTimeout((function(){e()}),1e3)}},Mu=function(e,t,a,n,r,s,o,i){return new _u({color:"#FFFFFF",name:e,facet_id:t,facet_group:n,facet_type:a,chain_group:r,custom_facet_group:o,custom_facet_type:s,custom_chain_group:i})},zu=a(1139),Ru=a(1157),Vu=a(548),Uu=a.n(Vu),Wu=a(550),Bu=a.n(Wu),Yu=a(549),qu=a.n(Yu),Hu=(a(1037),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).setSnackbarIcon=function(){return"success"===n.props.snackbarType?r.a.createElement(Uu.a,{className:"state-icon"}):"error"===n.props.snackbarType?r.a.createElement(Mt.a,{className:"state-icon"}):"warning"===n.props.snackbarType?r.a.createElement(qu.a,{className:"state-icon"}):"processing"===n.props.snackbarType?r.a.createElement(zu.a,{size:24,className:"state-icon"}):r.a.createElement(Bu.a,{className:"state-icon"})},n.state={snackbarOpenState:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"handleOnBlur",value:function(){this.setState({snackbarOpenState:!0})}},{key:"render",value:function(){var e=this.props.snackbarOpen,t=this.props.snackbarType,a=this.props.snackbarMsg,s=6e3;return"infinite"===this.props.snackbarDuration?(s=99999,r.a.createElement(Ru.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:e,autoHideDuration:s,className:"snackbar "+t,message:r.a.createElement(n.Fragment,null,this.setSnackbarIcon(),r.a.createElement("span",null,a)),onBlur:this.handleOnBlur})):r.a.createElement(Ru.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:e,onClose:this.props.onSnackbarClose,autoHideDuration:6e3,className:"snackbar "+t,message:r.a.createElement(n.Fragment,null,this.setSnackbarIcon(),r.a.createElement("span",null,a)),action:[r.a.createElement(fa.a,{key:"close","aria-label":"close",onClick:this.props.onSnackbarClose,className:"close-btn",size:"small"},r.a.createElement(il.a,{fontSize:"small"}))]})}}]),a}(n.Component)),Gu=function(e){var t=!1;return{promise:new Promise((function(a,n){e.then((function(e){return t?n({isCanceled:!0}):a(e)}),(function(e){return n(t?{isCanceled:!0}:e)}))})),cancel:function(){t=!0}}},Ku=function(){function e(){Object(i.a)(this,e),this.stack=[],this.index=0}return Object(l.a)(e,[{key:"addCommand",value:function(e){this.stack.length=this.index,this.stack.push(e),e.execute(),this.index++}},{key:"canPerformUndo",value:function(){return this.index>0}},{key:"canPerformRedo",value:function(){return this.index<this.stack.length}},{key:"undo",value:function(){this.canPerformUndo()&&(this.index--,this.stack[this.index].undo())}},{key:"redo",value:function(){this.canPerformRedo()&&(this.stack[this.index].execute(),this.index++)}},{key:"empty",value:function(){this.stack=[]}}]),e}(),Qu=a(1162),Ju=a(357),Xu=a.n(Ju),Zu=a(556),$u=a.n(Zu),ed=a(555),td=a.n(ed),ad=a(38),nd=a(551),rd=function(e){return r.a.createElement(nd.Scrollbars,Object.assign({},e,{autoHide:!0,renderTrackHorizontal:function(e){return r.a.createElement("div",Object.assign({},e,{style:{display:"none"},className:"track-horizontal"}))}}))},sd=a(1120),od=a(1141),id=a(552),ld=a.n(id),cd=a(553),ud=a.n(cd);function dd(e){var t=e.handleFeedbackDialogClose,a=e.handleFeedbackDialogCancel,n=e.openFeedbackDialog,s=e.feedbackImgData,o=e.onFeedbackDialogSubmit,i=e.feedbackSubmitState,l=e.handleDialogSubmitState,c=r.a.useState("support"),u=Object(Ht.a)(c,2),d=u[0],p=u[1],m=r.a.useState("is-selected"),h=Object(Ht.a)(m,2),f=h[0],g=h[1],b=r.a.useState(""),v=Object(Ht.a)(b,2),_=v[0],E=v[1],S=r.a.useState(!0),y=Object(Ht.a)(S,2),w=y[0],k=y[1],j=r.a.useState(""),D=Object(Ht.a)(j,2),O=D[0],N=D[1],C=r.a.useState(!1),P=Object(Ht.a)(C,2),I=(P[0],P[1]),x=r.a.useState(""),F=Object(Ht.a)(x,2),T=F[0],A=F[1],L=r.a.useState(!1),M=Object(Ht.a)(L,2),z=M[0],R=M[1],V=r.a.useState(!0),U=Object(Ht.a)(V,2),W=U[0],B=U[1],Y=r.a.useState(""),q=Object(Ht.a)(Y,2),H=q[0],G=q[1],K=r.a.useState(!1),Q=Object(Ht.a)(K,2),J=Q[0],X=Q[1],Z=function(e,t){p(t),"support"===t?(g("is-selected"),E(""),k(!0),I(!1),A(""),N("")):"user"===t&&(g(""),E("is-selected"),k(!1))},$=function(){p("support"),k(!0),N(""),I(!1),A(""),G(""),X(!1),t()};return r.a.createElement(Wa,{_open:n,_onEnter:function(){p("support"),k(!0),N(""),I(!1),A(""),G(""),X(!1)},_onClose:$,_onExit:$,_type:"regular",_icon:!1,_title:"Send screenshot to ...",_size:"xs",_content:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"custom-radio-holder "+f,onClick:function(e){return Z(0,"support")}},r.a.createElement("div",{className:"fake-radio-div"},"support"===d?r.a.createElement("div",{className:"fake-radio is-selected",onClick:function(e){return Z(0,"support")}}):r.a.createElement("div",{className:"fake-radio",onClick:function(e){return Z(0,"support")}})),r.a.createElement("div",{className:"radio-txt-holder"},r.a.createElement("div",{className:"radio-title"},"Support"))),r.a.createElement("div",{className:"custom-radio-holder "+_,onClick:function(e){return Z(0,"user")}},r.a.createElement("div",{className:"fake-radio-div"},"user"===d?r.a.createElement("div",{className:"fake-radio is-selected",onClick:function(e){return Z(0,"user")}}):r.a.createElement("div",{className:"fake-radio",onClick:function(e){return Z(0,"user")}})),r.a.createElement("div",{className:"radio-txt-holder"},r.a.createElement("div",{className:"radio-title"},"User"),r.a.createElement("div",{className:"radio-descr"},!w&&r.a.createElement(Pt.a,{mt:1},r.a.createElement(Na,{_disabled:w,_label:"User email",_placeholder:"Enter email of user ...",_type:"search",_autoComplete:"new-password",_value:O,_onChange:function(e){return function(e){N(e.target.value)}(e)},_characterCounter:50,_autoFocus:!1,_fullWidth:!0,_error:T}))))),r.a.createElement(Pt.a,{mt:4,mb:2},r.a.createElement(Pt.a,{mt:4},r.a.createElement(Na,{_label:"Message",_placeholder:"Enter message...",_type:"search",_autoComplete:"new-password",_value:H,_onChange:function(e){return function(e){G(e.target.value)}(e)},_characterCounter:200,_autoFocus:!1,_fullWidth:!0,_error:J?"Message is required":"",_multiline:!0,_rows:4}))),!0===W&&r.a.createElement(Pt.a,{className:"feedback-img-holder"},r.a.createElement("img",{className:"feedback-img",src:s,alt:"feedback dialog screenshot"}),r.a.createElement(ua,{_variant:"contained",_color:"default",_label:"Preview Screenshot",_type:"button",_fullWidth:!1,_loading:!1,_onClick:function(){R(!0)}}),r.a.createElement(ud.a,{visible:z,onClose:function(){R(!1)},images:[{src:s,alt:"feedback dialog screenshot"}],className:"img-viewer",noFooter:!0,drag:!1})),r.a.createElement(Pt.a,{mt:1},r.a.createElement(Yi.a,{className:"feedback-img-cbx",control:r.a.createElement(Hi.a,{checked:W,onChange:function(e){B(e.target.checked)},value:"",color:"primary"}),label:"Send email with screenshot"}))),_actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(ua,{_variant:"text",_color:"default",_label:"Cancel",_type:"button",_fullWidth:!1,_loading:!1,_onClick:a}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Send",_type:"button",_fullWidth:!1,_loading:i,_disabled:i,_onClick:function(e){var t=!1,a=!1;"user"===d?""!==O?!0===Zl.validate(O)?(t=!0,I(!1),A("")):(t=!1,I(!0),A("Invalid email")):(t=!1,I(!0),A("Email is required")):"support"===d&&(t=!0,I(!1),A("")),""!==H?(a=!0,X(!1)):(a=!1,X(!0)),!0===t&&!0===a&&(l(!0),o(O,H,W,d))}}))})}var pd=a(355),md=a.n(pd),hd=a(356),fd=a.n(hd);function gd(e){var t=e.setSupportPopoverAnchorEl,a=e.anchorSupportPopover,s=e.openSupportPopover,o=e.loggedUserEmail,i=r.a.useState(!1),l=Object(Ht.a)(i,2),c=l[0],u=l[1],d=r.a.useState(0),p=Object(Ht.a)(d,2),m=p[0],h=p[1],f=r.a.useState(0),g=Object(Ht.a)(f,2),b=g[0],v=g[1],_=r.a.useState(""),E=Object(Ht.a)(_,2),S=E[0],y=E[1],w=r.a.useState([]),k=Object(Ht.a)(w,2),j=k[0],D=k[1],O=r.a.useState(!1),N=Object(Ht.a)(O,2),C=N[0],P=N[1],I=r.a.useState(null),x=Object(Ht.a)(I,2),F=x[0],T=x[1],A=r.a.useState(null),L=Object(Ht.a)(A,2),M=L[0],z=L[1],R=r.a.useState(!1),V=Object(Ht.a)(R,2),U=V[0],W=V[1],B=r.a.useState(""),Y=Object(Ht.a)(B,2),q=Y[0],H=Y[1],G=r.a.useState(""),K=Object(Ht.a)(G,2),Q=K[0],J=K[1],X=r.a.useState(!1),Z=Object(Ht.a)(X,2),$=Z[0],ee=Z[1],te=r.a.useState(!1),ae=Object(Ht.a)(te,2),ne=ae[0],re=ae[1],se=r.a.useState(!1),oe=Object(Ht.a)(se,2),ie=oe[0],le=oe[1],ce=r.a.useState(!1),ue=Object(Ht.a)(ce,2),de=ue[0],pe=ue[1],me=r.a.useState(""),he=Object(Ht.a)(me,2),fe=he[0],ge=he[1],be=r.a.useState(""),ve=Object(Ht.a)(be,2),_e=ve[0],Ee=ve[1],Se=r.a.useState(!1),ye=Object(Ht.a)(Se,2),we=ye[0],ke=ye[1],je=r.a.useState(!1),De=Object(Ht.a)(je,2),Oe=De[0],Ne=De[1],Ce=function(e){"closeSupportPopoverBtn"===e.currentTarget.id&&(t(null),D([]))},Pe=s?"support-popover":void 0,Ie=c?"addcomment-popover":void 0,xe=function(e){P(!0)},Fe=function(e){P(!1)},Te=function(){W(!1),z(null),le(!1)},Ae=function(e){H(e.target.value)},Le=function(e){if(""!==q){W(!1),z(null);var t=M;j[t]=Object(Ot.a)(Object(Ot.a)({},j[t]),{},{comment:q})}else le(!0)},Me=function(){ee(!1)},ze=function(e){return ke(e),e},Re=function(e){var t=new Date(1e3*e),a=t.getFullYear(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()];return t.getDate()+"-"+n+"-"+a+"_"+t.getHours()+"-"+t.getMinutes()+"-"+t.getSeconds()};return r.a.createElement("div",null,r.a.createElement(sd.a,{id:Pe,className:!0===Oe?"support-popover hide":"support-popover",open:s||!1,anchorEl:a,onClose:Ce,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"}},r.a.createElement("div",{className:"support-popover-content"},r.a.createElement("div",{className:"heading"},r.a.createElement("span",{className:"title"},"Screenshot"),r.a.createElement(fa.a,{id:"closeSupportPopoverBtn",className:"is-right",size:"small",onClick:Ce},r.a.createElement(il.a,{fontSize:"small"}))),r.a.createElement("div",{className:"step"},r.a.createElement("div",{className:"step-title"},"Step 1"),r.a.createElement("div",{className:"step-descr"},"Click anywhere on screen to create comment")),r.a.createElement("div",{className:"step"},r.a.createElement("div",{className:"step-title"},"Step 2"),r.a.createElement("div",{className:"step-descr"},'Once finished, click "Send" or "Download" button')),r.a.createElement("div",{className:"actions-div"},r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Send",_type:"button",_fullWidth:!1,_onClick:function(e){return ge("Taking screenshot..."),Ee("processing"),pe(!0),Ne(!0),void setTimeout((function(){var e=document.getElementsByClassName("titlebar")[0];e.remove(),md.a.toPng(document.body,{quality:1}).then((function(t){document.body.appendChild(e),(new Image).src=t,J(t),ee(!0),Ne(!1),ge("Screenshot taken successfully"),Ee("success"),pe(!0)})).catch((function(e){console.error("Error: cant get image!",e),Ne(!1),ge("Screenshot failed"),Ee("error"),pe(!0)}))}),500)}}),r.a.createElement(ua,{_variant:"contained",_color:"default",_label:"Download",_type:"button",_fullWidth:!1,_onClick:function(e){return function(e){var t=Math.round((new Date).getTime()/1e3),a=Re(t);ge("Taking screenshot..."),Ee("info"),pe(!0),Ne(!0),setTimeout((function(){var e=document.getElementsByClassName("titlebar")[0];e.remove(),md.a.toJpeg(document.body).then((function(t){document.body.appendChild(e);var n=document.createElement("a");n.download="IkigaiLabs_"+a+".jpeg",n.href=t,n.click(),Ne(!1),ge("Screenshot taken successfully"),Ee("success"),pe(!0)})).catch((function(e){console.error("Error: cant get image!",e),Ne(!1),ge("Screenshot failed"),Ee("error"),pe(!0)}))}),500)}()}}))),r.a.createElement("div",{className:"support-comment-frame fade-in",onClick:function(e){!1===C&&!1===U&&(h(e.nativeEvent.offsetX),v(e.nativeEvent.offsetY),!0===c?u(!1):(u(!0),y(""),re(!1)))}},j.map((function(e,t){return r.a.createElement(ld.a,null,r.a.createElement("div",{key:e.id,className:"comment-popover",style:{top:e.pTop+"px",left:e.pLeft+"px"},onMouseOver:xe,onMouseOut:Fe},r.a.createElement("div",{className:"heading"},r.a.createElement("span",{className:"title"},"Comment"),M===t&&U?r.a.createElement(n.Fragment,null,r.a.createElement(fa.a,{className:"is-right",size:"small",style:{marginLeft:"auto"},onClick:Te},r.a.createElement(il.a,{fontSize:"small"})),r.a.createElement(fa.a,{className:"is-right",size:"small",style:{marginLeft:"7px"},onClick:Le},r.a.createElement(Lc.a,{fontSize:"small"}))):r.a.createElement(fa.a,{className:"is-right",size:"small",onClick:function(a){return function(e,t,a){z(t),T(e.currentTarget),H(a)}(a,t,e.comment)}},r.a.createElement(xl.a,{fontSize:"small"}))),r.a.createElement("div",{className:"body"},M===t&&U?r.a.createElement(ba.a,{multiline:!0,rows:"4",variant:"outlined",value:q,autoFocus:!0,onChange:Ae,error:ie}):r.a.createElement("div",null,e.comment))))})))),r.a.createElement(sd.a,{id:Ie,className:"addcomm-popover",open:c,onClose:function(e){u(!1)},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},anchorReference:"anchorPosition",anchorPosition:{top:b,left:m}},r.a.createElement("div",{className:"addcomm-popover-content"},r.a.createElement("div",{className:"heading"},r.a.createElement("span",{className:"title"},"Add comment")),r.a.createElement("div",{className:"textarea-box"},r.a.createElement(ba.a,{multiline:!0,rows:"4",variant:"outlined",autoFocus:!0,placeholder:"Comment",onChange:function(e){y(e.target.value)},error:ne})),r.a.createElement("div",{className:"actions-div"},r.a.createElement(ua,{_variant:"text",_color:"default",_label:"Cancel",_type:"button",_fullWidth:!1,_onClick:function(e){return u(!1),re(!1),void le(!1)}}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Add",_type:"button",_fullWidth:!1,_onClick:function(e){return function(e){var t=(new Date).getDate()+"-"+(new Date).getHours()+"-"+(new Date).getMinutes()+"-"+(new Date).getSeconds();""!==S?(D([].concat(Object(jt.a)(j),[{id:t,comment:S,pTop:b,pLeft:m}])),y(""),u(!1)):re(!0)}()}})))),r.a.createElement(Pl.a,{classes:{paper:"action-btn-menu"},className:"comment-menu-overlay",anchorEl:F,keepMounted:!0,open:Boolean(F),onClose:function(e){H(""),T(null)}},r.a.createElement(va.a,{onClick:function(){W(!0),T(null)}},r.a.createElement(Tl.a,null),r.a.createElement("span",null,"Edit")),r.a.createElement(va.a,{onClick:function(){var e=M;j.splice(e,1),z(null),T(null)}},r.a.createElement(qt.a,null),r.a.createElement("span",null,"Delete"))),r.a.createElement(dd,{handleFeedbackDialogCancel:Me,handleFeedbackDialogClose:Me,openFeedbackDialog:$,feedbackImgData:Q,onFeedbackDialogSubmit:function(e,a,n,r){ze(!0),fd.a.init("user_cWIBjEHSnNuFLsiYV4cpL");var s="",i="";!0===n?(i="ikigailabs_screenshot_template",s=Q):(i="ikigailabs_no_screenshot_template",s="");var l="",c="";"user"===r?(l="Hello "+e+",",c=e):(l="",c="support@ikigailabs.io");var u={email:c,greeting_msg:l,from_name:"Ikigai Labs - Messaging",reply_to:o,to_name:e,message_html:a,screenshot:s};fd.a.send("sendgrid",i,u).then((function(e){console.log("SUCCESS!",e.status,e.text),200===e.status?(ge("You have succesfully shared screenshot"),Ee("success"),pe(!0),ze(!1),Me(),t(null),D([])):(ge("Screenshot sharing failed"),Ee("error"),pe(!0),ze(!1),Me())}),(function(e){console.log("FAILED...",e),ge("Screenshot sharing failed"),Ee("error"),pe(!0),ze(!1),Me()}))},feedbackSubmitState:we,handleDialogSubmitState:ze}),r.a.createElement(Hu,{snackbarOpen:de,snackbarType:_e,snackbarMsg:fe,onSnackbarClose:function(){pe(!1)}}))}var bd=a(1140),vd=a(554),_d=a.n(vd);a(1059);function Ed(e){var t=e.activeUserEmail,a=e.uploadProgress,s=r.a.useState(null),o=Object(Ht.a)(s,2),i=o[0],l=o[1],c=r.a.useState(null),u=Object(Ht.a)(c,2),d=u[0],p=u[1],m=Boolean(i),h=Boolean(d),f=function(e){l(e.currentTarget)};return r.a.createElement(n.Fragment,null,r.a.createElement("ul",{className:"bottom-menu"},r.a.createElement("li",{className:"menu"},r.a.createElement("div",{className:"link-alike upload-menu-item",onClick:function(e){return function(e){p(e.currentTarget)}(e)}},a&&a.filter((function(e){return"complete"!==e.status&&"deleted"!==e.status})).length>0?r.a.createElement(bd.a,{badgeContent:a.filter((function(e){return"failed"===e.status})).length>0?"!":a.filter((function(e){return"complete"!==e.status&&"deleted"!==e.status})).length,color:"secondary"},r.a.createElement("i",{className:"zmdi zmdi-cloud-upload zmdi-hc-fw"}),r.a.createElement("span",{className:"nav-text"},"Uploading")):"")),r.a.createElement("li",{className:"menu"},r.a.createElement("div",{className:"link-alike",onClick:function(e){return f(e)}},r.a.createElement("i",{className:"zmdi zmdi-camera zmdi-hc-fw"}),r.a.createElement("span",{className:"nav-text"},"Screenshot")))),r.a.createElement(gd,{handleSupportPopoverOpen:f,setSupportPopoverAnchorEl:l,anchorSupportPopover:i,openSupportPopover:m,loggedUserEmail:t}),a&&a.filter((function(e){return"complete"!==e.status&&"deleted"!==e.status})).length>0&&r.a.createElement(sd.a,{className:"support-popover",open:h,anchorEl:d,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},r.a.createElement("div",{className:"support-popover-content"},r.a.createElement("div",{className:"heading"},r.a.createElement("span",{className:"title"},"Uploading"),r.a.createElement(fa.a,{id:"closeSupportPopoverBtn",className:"is-right",size:"small",onClick:function(e){p(null)}},r.a.createElement(il.a,{fontSize:"small"}))),a.filter((function(e){return"complete"!==e.status&&"deleted"!==e.status})).sort().map((function(e){return r.a.createElement("div",{className:"step"},r.a.createElement("div",null,r.a.createElement("div",{className:"step-title"},e.datasetName),r.a.createElement("div",{className:"clip-txt step-descr",style:{width:"100%"}},"uploading"===e.status||"Processing"===e.status?r.a.createElement(od.a,{variant:"determinate",color:"primary",value:e.percentCompleted}):r.a.createElement(At.a,{onClick:function(){e.onRetry()}},r.a.createElement(_d.a,null),"Retry"),"preparing"===e.status||"uploading"===e.status||"Processing"===e.status?r.a.createElement(od.a,{variant:"determinate",color:"primary",value:e.percentCompleted}):"","failed"===e.status?r.a.createElement(At.a,{onClick:function(){e.onCancel()}},r.a.createElement(qt.a,null),"Cancel"):""),"preparing"===e.status?r.a.createElement("span",null,"Preparing file..."):"uploading"===e.status?r.a.createElement("span",null," ",e.percentCompleted.toFixed(2)," %"):"Processing"===e.status?r.a.createElement("span",null,"Processing file..."):r.a.createElement("span",null," ",e.percentCompleted.toFixed(2)," %")))}))),r.a.createElement("div",{className:"progress-back-frame",onClick:function(){return p(null)}})),r.a.createElement(gd,{loggedUserEmail:t}))}var Sd=a(277),yd=a.n(Sd),wd=oa.a.bind(yd.a),kd=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){for(var e=this.props.history,t=this,a="".concat(e.location.pathname+window.location.search),n=document.getElementsByClassName("menu"),r=function(e){n[e].onclick=function(a){var r=t.closest(this,"li");if(n[e].classList.contains("menu")&&null!==r)a.stopPropagation(),n[e].classList.contains("open")?n[e].classList.remove("open","active"):n[e].classList.add("open","active");else for(var s=0;s<n.length;s++){var o=t.closest(this,"li");n[s]===this||null!==o&&o.classList.contains("open")?n[s].classList.contains("open")?n[s].classList.remove("open"):n[s].classList.add("open"):n[s].classList.remove("open")}}},s=0;s<n.length;s++)r(s);var o=document.querySelector('a[href="'+a+'"]');try{o.classList.add("active");var i=this.closest(o,"ul");i.classList.contains("sub-menu")?this.closest(i,"li").classList.add("open"):this.closest(o,"li").classList.add("open")}catch(l){}}},{key:"componentWillReceiveProps",value:function(e){var t=e.history,a="".concat(t.location.pathname+window.location.search),n=document.querySelector('a[href="'+a+'"]');try{var r=this.closest(n,"ul");r.classList.contains("sub-menu")?this.closest(r,"li").classList.add("open"):this.closest(n,"li").classList.add("open")}catch(s){}}},{key:"closest",value:function(e,t){try{var a,n;for(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some((function(e){return"function"===typeof document.body[e]&&(a=e,!0)}));e;){if((n=e.parentElement)&&n[a](t))return n;e=n}}catch(r){}return null}},{key:"render",value:function(){var e=this.props,t=(e._email,e._uploadProgress),a=e._logoutHandler,n=e._navMinimzed,s=e._getMenuItemActive,o=e._menuItemActive,i=(e._activePageType,e._appData,e._type,e._page),l=wd({navMenuHolderScrollbar:!0,minimized:n}),c=wd({navMenuHolder:!0,minimized:n}),u="";if(this.props.history.location.pathname){var d=(u=this.props.history.location.pathname).split("/"),p=d[d.length-1];u="project"===d[2]?"/dashboard/project-schedules/"+p:"flow"===d[1]?"/dashboard/flow-schedules/"+p:"/dashboard/schedules"}return r.a.createElement(rd,{className:l},r.a.createElement("div",{className:c},r.a.createElement("ul",{className:yd.a.navMenu},r.a.createElement("li",{className:""===o?"menu open":"menu"},r.a.createElement(kl.b,{to:"/dashboard/projects",className:"active",onClick:function(){s("projects")}},r.a.createElement("i",{className:"zmdi zmdi-folder-outline zmdi-hc-fw"}),r.a.createElement("span",{className:"nav-text"},"Projects"))),r.a.createElement("li",{className:"menu"},"Dataset"!==i&&"Dashboard"!==i&&r.a.createElement(kl.b,{to:u,className:"active",onClick:function(){s("schedule")}},r.a.createElement("i",{className:"zmdi zmdi-time zmdi-hc-fw"}),r.a.createElement("span",{className:"nav-text"},"Schedules")))),r.a.createElement(Ed,{uploadProgress:t}),r.a.createElement("ul",{className:yd.a.navMenu},r.a.createElement("li",{className:"menu"},r.a.createElement(kl.b,{to:"/dashboard/profile",onClick:function(){s("profile")}},r.a.createElement("i",{className:"zmdi zmdi-account-circle zmdi-hc-fw"}),r.a.createElement("span",{className:"nav-text"},"Profile"))),r.a.createElement("li",{className:"menu"},r.a.createElement("div",{className:"link-alike",onClick:a},r.a.createElement("i",{className:"zmdi zmdi-power zmdi-hc-fw"}),r.a.createElement("span",{className:"nav-text"},"Log Out"))))))}}]),a}(n.Component),jd=Object(ad.g)(kd),Dd=a(112),Od=a.n(Dd),Nd=oa.a.bind(Od.a),Cd=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).prepareNavigation=function(){var t=e.props._email?e.props._email:"",a=e.props._logoutHandler?e.props._logoutHandler:function(){},n=e.props._type?e.props._type:"",s=e.props._page?e.props._page:"",o=e.props._leftSidebar?e.props._leftSidebar:"",i=e.props._rightSidebar?e.props._rightSidebar:"",l=e.props._filterSidebar?e.props._filterSidebar:"",c=e.props._handleGoBack?e.props._handleGoBack:"",u=e.props._uploadProgress?e.props._uploadProgress:"",d=e.props._getMenuItemActive?e.props._getMenuItemActive:"",p=e.props._toggleNavigation?e.props._toggleNavigation:"",m=!!e.props._navMinimzed&&e.props._navMinimzed,h=e.props._menuItemActive?e.props._menuItemActive:"",f=e.props._appData?e.props._appData:null,g=Nd({drawerHolder:!0,minimized:m});var b="";return null!==f&&(b=f.activePageType),"sub-page"===n?""!==l?r.a.createElement(r.a.Fragment,null,r.a.createElement(Qu.a,{variant:"permanent",anchor:"left",className:g,classes:{paper:"drawer minimized"}},r.a.createElement(ml,{_size:"big",_color:"white",_navMinimzed:!0}),r.a.createElement("div",{className:Od.a.goBack,onClick:c,style:{cursor:"pointer"}},r.a.createElement(Xu.a,{className:Od.a.goBackIcon})),r.a.createElement(jd,{_email:t,_uploadProgress:u,_logoutHandler:a,_navMinimzed:!0,_getMenuItemActive:d,_menuItemActive:h,_activePageType:b,_appData:f,_type:n,_page:s})),r.a.createElement("div",{className:Od.a.filterSidebar},l,r.a.createElement("div",{className:Od.a.pureBg}))):""!==i?r.a.createElement(r.a.Fragment,null,r.a.createElement(Qu.a,{variant:"permanent",anchor:"right",className:Od.a.infoDrawerHolder,classes:{paper:"info-drawer-paper"}},i)):r.a.createElement(r.a.Fragment,null,r.a.createElement(Qu.a,{variant:"permanent",anchor:"left",className:g,classes:{paper:"drawer minimized"}},r.a.createElement(ml,{_size:"big",_color:"white",_navMinimzed:!0}),r.a.createElement("div",{className:Od.a.goBack,onClick:c,style:{cursor:"pointer"}},r.a.createElement(Xu.a,{className:Od.a.goBackIcon})),r.a.createElement(jd,{_email:t,_uploadProgress:u,_logoutHandler:a,_navMinimzed:!0,_getMenuItemActive:d,_menuItemActive:h,_activePageType:b,_appData:f,_type:n,_page:s}))):"preview"!==n?r.a.createElement(r.a.Fragment,null,r.a.createElement(Qu.a,{variant:"permanent",anchor:"left",className:g,classes:{paper:"drawer"}},r.a.createElement(ml,{_size:"big",_color:"white",_navMinimzed:m}),r.a.createElement(jd,{_email:t,_uploadProgress:u,_logoutHandler:a,_navMinimzed:m,_getMenuItemActive:d,_menuItemActive:h,_activePageType:b,_appData:f,_type:n,_page:s}),r.a.createElement("div",{className:Od.a.toggleNavButton,onClick:p},m?r.a.createElement(td.a,null):r.a.createElement($u.a,null)))):""!==o?r.a.createElement(r.a.Fragment,null,r.a.createElement(Qu.a,{variant:"permanent",anchor:"left",className:g,classes:{paper:"drawer"}},r.a.createElement(ml,{_size:"small",_color:"white"}),o)):void 0},e}return Object(l.a)(a,[{key:"render",value:function(){return this.prepareNavigation()}}]),a}(n.Component),Pd=a(1142),Id=a(1143),xd=a(62),Fd=a.n(xd),Td=a(557),Ad=a.n(Td),Ld=a(358),Md=a.n(Ld),zd=a(278),Rd=a.n(zd),Vd=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e._parentLink,a=e._parentText,n=e._pageTitle,s=this.props._backIcon?this.props._backIcon:"";return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Rd.a.breadcrumb},r.a.createElement("div",{className:Rd.a.path},r.a.createElement(kl.a,{to:t},""!==s&&r.a.createElement("i",{className:"zmdi zmdi-long-arrow-left"}),r.a.createElement("span",null,a))),r.a.createElement("div",{className:Rd.a.title},r.a.createElement("span",null,n))))}}]),a}(n.Component),Ud=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props._breadcrumbLink?this.props._breadcrumbLink:"",t=this.props._breadcrumbText?this.props._breadcrumbText:"",a=this.props._breadcrumbTitle?this.props._breadcrumbTitle:"",n=this.props._breadcrumbBackIcon?this.props._breadcrumbBackIcon:"",s=this.props._actionButtons?this.props._actionButtons:"";return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Md.a.header},""!==e&&r.a.createElement(Vd,{_parentLink:e,_parentText:t,_pageTitle:a,_backIcon:n}),""!==s&&r.a.createElement("div",{className:Md.a.buttonsHolder},s)))}}]),a}(n.Component),Wd=new(a(340));Wd.is().min(8).is().max(100).has().uppercase().has().lowercase().has().digits().has().not().spaces();var Bd=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={passwordValue:"",passwordValue2:"",passwordValue3:"",showPassword:!0,showPassword2:!0,showPassword3:!0,passErrorMsg:"",passErrorMsg2:"",passErrorMsg3:"",verificationCodeSubmitErrorMsg:"",verificationCodeSubmitErrorState:!1,resetpassSubmitErrorMsg:"",resetpassSubmitErrorState:!1,resetpassSubmitSuccessState:!1,resetpassSubmitSuccessMsg:"",snackbarOpen:!1,snackbarMessage:null,snackbarType:""},e.handleClickShowPassword=function(){!0===e.state.showPassword?e.setState({showPassword:!1}):e.setState({showPassword:!0})},e.handleClickShowPassword2=function(){!0===e.state.showPassword2?e.setState({showPassword2:!1}):e.setState({showPassword2:!0})},e.handleClickShowPassword3=function(){!0===e.state.showPassword3?e.setState({showPassword3:!1}):e.setState({showPassword3:!0})},e.handlePassChange=function(t){e.setState({passwordValue:t.target.value})},e.handlePassChange2=function(t){e.setState({passwordValue2:t.target.value})},e.handlePassChange3=function(t){e.setState({passwordValue3:t.target.value})},e.handleSnackbarClose=function(){e.setState({snackbarOpen:!1})},e.handleChangePassFormSubmit=function(t){t.preventDefault();var a=!1,s=!1,o=!1;""!==e.state.passwordValue?!0===Wd.validate(e.state.passwordValue)?(e.setState({passErrorMsg:""}),a=!0):(e.setState({passErrorMsg:"Password must contain uppercase and lowercase letter, number and be 8 - 16 characters long"}),a=!1):(e.setState({passErrorMsg:"Password is required"}),a=!1),""!==e.state.passwordValue?!0===Wd.validate(e.state.passwordValue2)?(e.setState({passErrorMsg2:""}),s=!0):(e.setState({passErrorMsg2:"Password must contain uppercase and lowercase letter, number and be 8 - 16 characters long"}),s=!1):(e.setState({passErrorMsg2:"New password is required"}),s=!1),""!==e.state.passwordValue3?e.state.passwordValue3===e.state.passwordValue2?(e.setState({passErrorMsg3:""}),o=!0):(e.setState({passErrorMsg3:"Passwords are not equal"}),o=!1):(e.setState({passErrorMsg3:"Confirm new password is required"}),o=!1),!0===a&&!0===s&&!0===o&&gr(e.props.email,e.state.passwordValue,e.state.passwordValue3).then((function(t){200===t.status?e.setState({verificationCodeSubmitErrorMsg:"",verificationCodeSubmitErrorState:!1,resetpassSubmitSuccessState:!0,resetpassSubmitSuccessMsg:"Congratulations. You have successfully created new password.",snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Congratulations. You have successfully created new password.")),snackbarType:"success",snackbarOpen:!0,passwordValue:"",passwordValue2:"",passwordValue3:""}):e.setState({verificationCodeSubmitErrorMsg:"",verificationCodeSubmitErrorState:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Error: Unable to change password.")),snackbarType:"error",snackbarOpen:!0})})).catch((function(t){e.setState({verificationCodeSubmitErrorMsg:"",verificationCodeSubmitErrorState:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Error: Unable to change password.")),snackbarType:"error",snackbarOpen:!0})}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.passwordValue,s=t.passwordValue2,o=t.passwordValue3,i=t.showPassword,l=t.showPassword2,c=t.showPassword3,u=t.passErrorMsg,d=t.passErrorMsg2,p=t.passErrorMsg3,m=t.verificationCodeSubmitErrorMsg,h=t.verificationCodeSubmitErrorState,f=t.resetpassSubmitSuccessState;return r.a.createElement(n.Fragment,null,r.a.createElement(Pd.a,{className:"main-container profile",component:"main",maxWidth:!1},r.a.createElement(Ri.a,{container:!0},r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(Ud,{_breadcrumbLink:"/dashboard",_breadcrumbText:"Dashboard",_breadcrumbTitle:"Profile"}))),r.a.createElement("div",{className:"cardbox-holder"},r.a.createElement(Ri.a,{container:!0,spacing:4},r.a.createElement(Ri.a,{item:!0,xs:12,md:4,lg:4},r.a.createElement(Eu.a,{className:"cardbox page-content"},r.a.createElement(Id.a,null,r.a.createElement("div",{className:"header"},r.a.createElement("span",{className:"title"},"User info")),r.a.createElement("div",{className:"content"},r.a.createElement(Ri.a,{container:!0,alignItems:"center"},r.a.createElement(Ri.a,{item:!0,xs:12,lg:4},r.a.createElement(Ad.a,{className:"avatar",fontSize:"large",color:"primary"})),r.a.createElement(Ri.a,{item:!0,xs:12,lg:8,className:"has-txt-left"},r.a.createElement(Pt.a,{mb:1,className:"user-name default-color"},this.props.email.split("@")[0]),r.a.createElement(Pt.a,{className:"user-email default-color"},this.props.email))))))),r.a.createElement(Ri.a,{item:!0,xs:12,md:8,lg:8},r.a.createElement(Eu.a,{className:"cardbox page-content"},r.a.createElement(Id.a,null,r.a.createElement("div",{className:"header"},r.a.createElement("span",{className:"title"},"Change password")),r.a.createElement("div",{className:"content"},r.a.createElement("form",{autoComplete:"off",noValidate:!0,onSubmit:this.handleChangePassFormSubmit},r.a.createElement(Na,{_label:"Password",_placeholder:"Enter current Password",_type:i?"password":"text",_autoComplete:"new-password",_value:a,_onChange:function(t){return e.handlePassChange(t)},_error:u,_required:!0,_fullWidth:!0,_endIcon:{_withButton:!0,_icon:r.a.createElement(n.Fragment,null,i?r.a.createElement(Fd.a,{fontSize:"small"}):r.a.createElement(pu.a,{fontSize:"small"})),_position:"end",_edge:"end",_size:"small",_onClick:this.handleClickShowPassword}}),r.a.createElement(Ri.a,{container:!0,alignItems:"center",alignContent:"center",justify:"center",spacing:2},r.a.createElement(Ri.a,{item:!0,xs:12,md:6,lg:6},r.a.createElement(Na,{_label:"New Password",_placeholder:"Enter new Password",_type:l?"password":"text",_autoComplete:"new-password",_value:s,_onChange:function(t){return e.handlePassChange2(t)},_error:d,_required:!0,_fullWidth:!0,_endIcon:{_withButton:!0,_icon:r.a.createElement(n.Fragment,null,l?r.a.createElement(Fd.a,{fontSize:"small"}):r.a.createElement(pu.a,{fontSize:"small"})),_position:"end",_edge:"end",_size:"small",_onClick:this.handleClickShowPassword2}})),r.a.createElement(Ri.a,{item:!0,xs:12,md:6,lg:6},r.a.createElement(Na,{_label:"Confirm Password",_placeholder:"Enter new Password again",_type:c?"password":"text",_autoComplete:"new-password",_value:o,_onChange:function(t){return e.handlePassChange3(t)},_error:p,_required:!0,_fullWidth:!0,_endIcon:{_withButton:!0,_icon:r.a.createElement(n.Fragment,null,c?r.a.createElement(Fd.a,{fontSize:"small"}):r.a.createElement(pu.a,{fontSize:"small"})),_position:"end",_edge:"end",_size:"small",_onClick:this.handleClickShowPassword3}}))),r.a.createElement("div",{className:"has-txt-right footer"},!0===h&&r.a.createElement(Pt.a,{mt:4,mb:4},r.a.createElement("div",{className:"submit-error"},m)),r.a.createElement(Pt.a,{mt:2,className:"txt-right"},r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Update",_type:"submit",_fullWidth:!1,_loading:!1,_disabled:f}))))))))))),r.a.createElement(Hu,{snackbarOpen:this.state.snackbarOpen,snackbarType:this.state.snackbarType,snackbarMsg:this.state.snackbarMessage,onSnackbarClose:this.handleSnackbarClose}))}}]),a}(n.Component),Yd=Object(d.c)((function(e){return{email:e.userReducerState.email,metabaseLoginId:e.flowReducerState.metabaseLoginId,activeProjectId:e.flowReducerState.activeProjectId}}),(function(e){return{cleanSession:function(){e(wt())},fireReturnToProject:function(t){e(yt(t))}}}))(Bd),qd=a(1163),Hd=a(98),Gd=a.n(Hd),Kd=a(130),Qd=a.n(Kd),Jd=a(131),Xd=a.n(Jd),Zd=a(560),$d=a.n(Zd),ep=a(558),tp=a.n(ep),ap=oa.a.bind(tp.a),np=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e._variant,a=e._color,n=e._buttons,s=this.props._size?this.props._size:"small",o=!!this.props._disabled&&this.props._disabled,i=ap({buttonGroup:!0,primary:"primary"===a,secondary:"secondary"===a});return r.a.createElement(r.a.Fragment,null,r.a.createElement(Tt.a,{variant:t,size:s,color:a,disabled:o,className:i},n))}}]),a}(n.Component),rp=a(73),sp=a.n(rp),op=oa.a.bind(sp.a),ip=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={clickedOnBoxMenu:!1},e.handleOnBoxMenuClick=function(){e.setState({clickedOnBoxMenu:!0})},e.handleCloseBoxMenuClick=function(){e.setState({clickedOnBoxMenu:!1})},e.handleBoxClick=function(e,t,a,n){"Project"===e||"Flow"===e?a[0].edit(t):"Dataset"===e?a[3].browse(t):"Dashboard"===e&&a[2].browse(t)},e}return Object(l.a)(a,[{key:"render",value:function(){var e,t=this,a=this.props,n=a._type,s=a._icon,o=a._functions,i="",l="",c="";this.props._data&&(e=this.props._data,"Project"===n?(i=e.name?e.name:"",l=e.project_id?e.project_id:"",c=e.owner?e.owner:""):"Flow"===n?(i=e.name?e.name:"",l=e.pipeline_id?e.pipeline_id:""):"Dataset"===n?(i=e.name?e.name:"",l=e.dataset_id?e.dataset_id:""):"Dashboard"===n&&(i=e.name?e.name:"",l=e.dashboard_id?e.dashboard_id:""));var u=this.props._uploadInfo?this.props._uploadInfo:[],d=!1,p=0,m="0.00",h=[];if(u&&u.length>0&&(h=u.filter((function(e){return"complete"!==e.status&&e.datasetId===l}))).length>0){var f=h.length-1;d=!0,m=(p=u[f].percentCompleted).toFixed(2)}var g=op({itemBox:!0,clicked:this.state.clickedOnBoxMenu,uploading:d});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:g},r.a.createElement("div",{className:sp.a.header},r.a.createElement("span",{className:sp.a.icon},s),r.a.createElement("span",{className:sp.a.type},n),""!==o&&r.a.createElement("span",{className:sp.a.menu},r.a.createElement(ql,{_type:n,_data:Object(Ot.a)({_id:l,_name:i},e),_functions:o,_open:function(){return t.handleOnBoxMenuClick()},_close:function(){return t.handleCloseBoxMenuClick()}}))),r.a.createElement("div",{className:sp.a.content},r.a.createElement("div",{className:d?"":sp.a.link,onClick:function(){return!d&&t.handleBoxClick(n,l,o,e)}},r.a.createElement("div",{className:sp.a.title},i),r.a.createElement("div",{className:sp.a.faded1},l),""!==c&&r.a.createElement("div",{className:sp.a.newSection},r.a.createElement("div",{className:sp.a.faded1},"Owner"),r.a.createElement("div",null,c)))),d&&r.a.createElement("div",{className:sp.a.uploadingDatabox},r.a.createElement("div",null,r.a.createElement(od.a,{className:sp.a.linearProgress,variant:"determinate",color:"primary",value:p}),r.a.createElement("span",{className:"linear-progress-val"}," ",m," %")))))}}]),a}(n.Component),lp=a(559),cp=a.n(lp),up=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e._type,a=e._icon,n=e._link,s=e._data,o=this.props._functions?this.props._functions:"",i=this.props._uploadInfo?this.props._uploadInfo:[];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:cp.a.grid},s.map((function(e,s){return r.a.createElement(ip,{key:s,_type:t,_icon:a,_link:n,_data:e,_functions:o,_uploadInfo:i})}))))}}]),a}(n.Component),dp=a(91),pp=a.n(dp),mp=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).filterOptions=[],e.state={sort:"all",newProjectDialogState:!1,newProjectName:"",newProjectNameError:!1,newProjectNameErrorMsg:"",deleteDialogState:!1,deleteProjectID:"",tblRowActionBtnState:!1,snackbarCreateProSuccessState:!1,projectDeleteDialogState:!1,deleteDialogProjectID:"",deleteDialogProjectName:"",projectShareDialogState:!1,shareDialogProjectID:"",shareDialogProjectName:"",emailValidation:!0,emailErrorMsg:"",projectShareDialogErrorState:!1,projectShareDialogErrorMsg:"",rowsPerPage:16,page:0,searchTerm:"",projectsFilter:"all",renderAsList:!0,tableSortAsc:!0,tableSortProperty:"",clickedBox:"",snackbarOpen:!1,snackbarMessage:null,snackbarType:"",sharingLoading:!1,newProjectLoading:!1,deletingLoading:!1,duplicateDialogProjectID:"",duplicateDialogProjectName:"",duplicateDialogProjectState:!1,duplicateLoading:!1},e.handleEditProject=function(t){e.props.history.push("/dashboard/project/".concat(t))},e.handleClickOverBox=function(t){e.setState({clickedBox:t})},e.handleCloseClickOverBox=function(t){e.setState({clickedBox:""})},e.handleDeleteProjectDialog=function(t,a){e.setState({deleteDialogProjectID:t,deleteDialogProjectName:a,projectDeleteDialogState:!0})},e.handleShareProjectDialog=function(t,a){e.setState({shareDialogProjectID:t,shareDialogProjectName:a,projectShareDialogState:!0})},e.handleDuplicateProjectDialog=function(t,a){e.setState({duplicateDialogProjectID:t,duplicateDialogProjectName:a,duplicateDialogProjectState:!0})},e.handleDialogOpen=function(){e.setState({newProjectDialogState:!0})},e.handleDialogClose=function(){e.setState({newProjectDialogState:!1,newProjectName:"",projectDeleteDialogState:!1,newProjectNameError:!1,newProjectNameErrorMsg:"",projectShareDialogState:!1,projectShareDialogErrorState:!1,projectShareDialogErrorMsg:"",duplicateDialogProjectState:!1})},e.handleDialogSave=function(){var t=e.props.projects,a=!1;t.map((function(t){return t.name===e.state.newProjectName&&(a=!0),""})),e.setState({newProjectLoading:!0});var s=e.state.newProjectName;""===s?e.setState({newProjectNameError:!0,newProjectLoading:!1,newProjectNameErrorMsg:"Project name required"}):!1!==a?e.setState({newProjectNameError:!0,newProjectLoading:!1,newProjectNameErrorMsg:"Project with same name already exists. Please choose different name"}):(e.props.createNewProject(s),setTimeout((function(){e.setState({newProjectNameError:!1,newProjectNameErrorMsg:"",newProjectDialogState:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"You have succesfully created new project"),r.a.createElement("div",{className:"val"},s)),snackbarType:"success",snackbarOpen:!0,newProjectName:"",newProjectLoading:!1})}),1500))},e.handleDeleteDialogOpen=function(t){e.setState({deleteDialogState:!0,deleteProjectID:t})},e.handleDeleteDialogClose=function(){e.setState({deleteDialogState:!1,deleteProjectID:""})},e.handleSnackbarClose=function(){e.setState({snackbarOpen:!1})},e.handleTableActionBtn=function(){!1===e.state.tblRowActionBtnState?e.setState({tblRowActionBtnState:!0}):e.setState({tblRowActionBtnState:!1})},e.handleTableActionBtnOpen=function(){e.setState({tblRowActionBtnState:!0})},e.handleOpenSuccesSnackbar=function(){e.setState({snackbarCreateProSuccessState:!0})},e.handleCloseSuccesSnackbar=function(){e.setState({snackbarCreateProSuccessState:!1})},e.handleOpenShareSuccesSnackbar=function(){e.setState({snackbarOpen:!0})},e.handleCloseShareSuccesSnackbar=function(){e.setState({snackbarOpen:!1})},e.handleDeleteDialogCancel=function(){e.setState({projectDeleteDialogState:!1})},e.handleDeleteDialogSubmit=function(){e.setState({deletingLoading:!0}),e.props.deleteProject(e.state.deleteDialogProjectID),setTimeout((function(){e.setState({projectDeleteDialogState:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"You have succesfully deleted project"),r.a.createElement("div",{className:"val"},e.state.deleteDialogProjectName)),snackbarType:"success",snackbarOpen:!0,deletingLoading:!1})}),1500)},e.handleShareDialogCancel=function(){e.setState({projectShareDialogState:!1,projectShareDialogErrorState:!1,projectShareDialogErrorMsg:""})},e.handleChangePage=function(t,a){e.setPage(a)},e.handleChangeRowsPerPage=function(t){e.setRowsPerPage(parseInt(t.target.value,10)),e.setPage(0)},e.setPage=function(t){e.setState({page:t})},e.setRowsPerPage=function(t){e.setState({rowsPerPage:t})},e.handleChangeSearchTerm=function(t){e.setState({searchTerm:t.target.value})},e.handleChangeProjectFilter=function(t){e.setState({projectsFilter:t.target.value})},e.filterProjects=function(t){return"shared"===e.state.projectsFilter&&(t=t.filter((function(t){return t.owner!==e.props.email}))),""!==e.state.searchTerm&&(t=t.filter((function(t){return t.name.toLowerCase().indexOf(e.state.searchTerm.toLowerCase())>-1}))),t},e.handleRenderAsList=function(){e.setState({renderAsList:!0})},e.handleRenderAsGrid=function(){e.setState({renderAsList:!1})},e.viewTypeSwitchButtons=function(){return[r.a.createElement(At.a,{key:1,color:e.state.renderAsList?"primary":"default",onClick:function(){return e.handleRenderAsList()}},r.a.createElement(Qd.a,null)),r.a.createElement(At.a,{key:2,color:e.state.renderAsList?"default":"primary",onClick:function(){return e.handleRenderAsGrid()}},r.a.createElement(Xd.a,null))]},e.getProjectFilters=function(t){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"filters-and-pagination"},r.a.createElement("div",{className:"table-filters"},r.a.createElement(Na,{_label:"",_placeholder:"Search...",_type:"text",_autoComplete:"new-password",_value:e.state.searchTerm,_size:"small",_margin:"none",_filterType:!0,_onChange:function(t){return e.handleChangeSearchTerm(t)},_startIcon:{_icon:r.a.createElement(tl.a,{fontSize:"small"})}}),r.a.createElement(Na,{_label:"",_placeholder:"",_type:"text",_autoComplete:"new-password",_value:e.state.projectsFilter,_size:"small",_margin:"none",_filterType:!0,_isSelect:!0,_selectOptions:e.filterOptions,_selectOptionsKeyForVal:"value",_selectOptionsKeyForTxt:"text",_onChange:function(t){return e.handleChangeProjectFilter(t)}}),r.a.createElement(np,{_variant:"contained",_size:"small",_color:"secondary",_buttons:e.viewTypeSwitchButtons()})),r.a.createElement("div",{className:"table-pagination"},r.a.createElement(qd.a,{component:"div",labelRowsPerPage:"Projects per page",rowsPerPageOptions:[8,16,32],colSpan:3,count:t.length,rowsPerPage:e.state.rowsPerPage,page:e.state.page,SelectProps:{inputProps:{"aria-label":"Projects per page"}},onChangePage:e.handleChangePage,onChangeRowsPerPage:e.handleChangeRowsPerPage,ActionsComponent:pp.a}))))},e.onRequestSort=function(t,a){e.setState({tableSortAsc:!e.state.tableSortAsc,tableSortProperty:a})},e.sortProjects=function(t){return""!==e.state.tableSortProperty?e.sortOn(t,e.state.tableSortProperty):t},e.sortOn=function(t,a){return t.sort((function(t,n){return n[a]<t[a]?e.state.tableSortAsc?1:-1:n[a]>t[a]?e.state.tableSortAsc?-1:1:0}))},e.getProjectsList=function(){var t=e.props,a=t.projectsLoaded,n=t.projects,s=t.metabaseLoginId,o=e.state,i=o.page,l=o.rowsPerPage;if(!a||""!==s&&void 0!==s)return null;var c=(n=e.sortProjects(e.filterProjects(n))).slice(i*l,i*l+l);return 0===c.length?r.a.createElement("div",{className:"cardbox-holder"},e.getProjectFilters(n),r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(Pt.a,{display:"flex",alignItems:"center",className:"no-results"},r.a.createElement(Gd.a,{className:"no-results-icon"}),r.a.createElement("span",{className:"no-results-txt"},"No projects found")))):r.a.createElement("div",{className:"cardbox-holder"},e.getProjectFilters(n),e.state.renderAsList&&r.a.createElement(Ri.a,{item:!0,xs:12,className:"i-pb-0"},r.a.createElement(Eu.a,{className:"cardbox has-table tableHolder"},r.a.createElement(Id.a,{className:"content table-inside"},r.a.createElement(Hl,{_type:"Project",_link:"/dashboard/project/",_header:[{key:"name",name:"Project"},{key:"project_id",name:"ID"},{key:"owner",name:"Owner"}],_data:c,_functions:[{edit:function(t){return e.handleEditProject(t)}},{delete:function(t,a){return e.handleDeleteProjectDialog(t,a)}},{share:function(t,a){return e.handleShareProjectDialog(t,a)}},{clone:function(t,a){return e.handleDuplicateProjectDialog(t,a)}}]})))),!e.state.renderAsList&&r.a.createElement(up,{_type:"Project",_link:"/dashboard/project/",_icon:r.a.createElement($d.a,null),_data:c,_functions:[{edit:function(t){return e.handleEditProject(t)}},{delete:function(t,a){return e.handleDeleteProjectDialog(t,a)}},{share:function(t,a){return e.handleShareProjectDialog(t,a)}},{clone:function(t,a){return e.handleDuplicateProjectDialog(t,a)}}]}),n.length>e.state.rowsPerPage&&r.a.createElement(qd.a,{component:"div",className:"pagination-sm",labelRowsPerPage:"Projects per page",rowsPerPageOptions:[8,16,32],colSpan:3,count:n.length,rowsPerPage:e.state.rowsPerPage,page:e.state.page,SelectProps:{inputProps:{"aria-label":"Projects per page"}},onChangePage:e.handleChangePage,onChangeRowsPerPage:e.handleChangeRowsPerPage,ActionsComponent:pp.a}))},e.handleDuplicateProjectDialogSubmit=function(t,a,s){e.setState({duplicateLoading:!0});var o=e.props.projects.filter((function(e){return e.name===a}));if(Object.keys(o).length>0)setTimeout((function(){e.setState({duplicateDialogProjectState:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Project with same name already exists. Please choose different name")),snackbarType:"error",snackbarOpen:!0,duplicateDialogProjectID:"",duplicateDialogProjectName:"",duplicateLoading:!1})}),1500);else{var i=!1;try{e.props.duplicateProject(t,a,s)}catch(l){i=!0}i?setTimeout((function(){e.setState({duplicateDialogProjectState:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Please try again")),snackbarType:"error",snackbarOpen:!0,duplicateDialogProjectID:"",duplicateDialogProjectName:"",duplicateLoading:!1})}),1500):setTimeout((function(){e.setState({duplicateDialogProjectState:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"You have succesfully cloned project")),snackbarType:"success",snackbarOpen:!0,duplicateDialogProjectID:"",duplicateDialogProjectName:"",duplicateLoading:!1})}),1500)}},e.handleShareDialogSubmit=function(t){e.setState({sharingLoading:!0});try{Qo(e.state.shareDialogProjectID,t).then((function(a){200===a.status?setTimeout((function(){e.setState({projectShareDialogState:!1,projectShareDialogErrorState:!1,projectShareDialogErrorMsg:"",snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"You have succesfully shared project"," ",r.a.createElement("span",{className:"val"},e.state.shareDialogProjectName)),r.a.createElement("div",null,"with user ",r.a.createElement("span",{className:"val"},t))),snackbarType:"success",snackbarOpen:!0,sharingLoading:!1})}),1500):e.setState({projectShareDialogErrorState:!0,projectShareDialogErrorMsg:"Sharing failed! Check user email and try again."})})).catch((function(t){e.setState({projectShareDialogErrorState:!0,projectShareDialogErrorMsg:"Sharing failed! Check user email and try again.",sharingLoading:!1})}))}catch(a){e.setState({projectShareDialogState:!1,projectShareDialogErrorState:!1,projectShareDialogErrorMsg:"",snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Sharing failed! Check user email and try again.")),snackbarType:"error",snackbarOpen:!0,sharingLoading:!1})}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.cleanSession(),this.filterOptions=[{value:"all",text:"All projects"},{value:"shared",text:"Shared with me"}]}},{key:"render",value:function(){var e=this,t=this.props,a=t.projectsLoaded,s=t.metabaseLoginId;return!a||""!==s&&void 0!==s?r.a.createElement(n.Fragment,null,r.a.createElement(Pd.a,{className:"main-container",component:"main",maxWidth:!1},r.a.createElement(Ri.a,{container:!0},r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(hl,{loadingTxt:"Loading Projects...",fadeOut:!1,placement:"next-to-nav"}))))):r.a.createElement(n.Fragment,null,r.a.createElement(Pd.a,{className:"main-container",component:"main",maxWidth:!1},r.a.createElement(Ri.a,{container:!0},r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(Ud,{_breadcrumbLink:"/dashboard",_breadcrumbText:"Dashboard",_breadcrumbTitle:"Projects",_actionButtons:r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"New Project",_type:"button",_fullWidth:!1,_loading:!1,_startIcon:r.a.createElement("i",{className:"zmdi zmdi-plus zmdi-hc-fw"}),_onClick:this.handleDialogOpen})}))),this.getProjectsList()),r.a.createElement(Wa,{_open:this.state.newProjectDialogState,_onClose:this.handleDialogClose,_type:"regular",_icon:!1,_title:"New project",_subtitle:"",_size:"xs",_content:r.a.createElement(Na,{_label:"Project name",_placeholder:"Enter project name",_type:"text",_value:this.state.newProjectName,_onChange:function(t){e.setState({newProjectName:t.target.value})},_characterCounter:40,_autoFocus:!0,_fullWidth:!0,_error:this.state.newProjectNameErrorMsg}),_actions:r.a.createElement(n.Fragment,null,r.a.createElement(ua,{_variant:"text",_color:"default",_label:"Cancel",_type:"button",_fullWidth:!1,_loading:!1,_onClick:this.handleDialogClose}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Create",_type:"button",_fullWidth:!1,_loading:this.state.newProjectLoading,_disabled:this.state.newProjectLoading,_isAlternate:!0,_onClick:this.handleDialogSave}))}),r.a.createElement(Wa,{_open:this.state.projectDeleteDialogState,_onClose:this.handleDialogClose,_type:"delete",_icon:!1,_title:"Delete project",_subtitle:"",_size:"xs",_align:"center",_content:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"txt-dialog-faded1"},this.state.deleteDialogProjectID),r.a.createElement("div",{className:"txt-dialog-impact1"},this.state.deleteDialogProjectName)),r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"txt-dialog-impact2 error"},"Are you sure ?"),r.a.createElement("div",{className:"error"},"All your pipelines inside will be deleted as well."))),_actions:r.a.createElement(n.Fragment,null,r.a.createElement(ua,{_variant:"text",_color:"default",_label:"Cancel",_type:"button",_fullWidth:!1,_loading:!1,_onClick:this.handleDeleteDialogCancel}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Delete",_type:"button",_fullWidth:!1,_loading:this.state.deletingLoading,_disabled:this.state.deletingLoading,_isDanger:!0,_onClick:this.handleDeleteDialogSubmit}))}),r.a.createElement($l,{handleDialogClose:this.handleDialogClose,handleShareDialogCancel:this.handleShareDialogCancel,open:this.state.projectShareDialogState,projectId:this.state.shareDialogProjectID,projectName:this.state.shareDialogProjectName,projectShareDialogErrorState:this.state.projectShareDialogErrorState,projectShareDialogErrorMsg:this.state.projectShareDialogErrorMsg,onSubmit:this.handleShareDialogSubmit,shareSubmitLoading:this.state.sharingLoading}),r.a.createElement(cc,{projectID:this.state.duplicateDialogProjectID,projectName:this.state.duplicateDialogProjectName,open:this.state.duplicateDialogProjectState,onSubmit:function(t,a,n){return e.handleDuplicateProjectDialogSubmit(t,a,n)},handleDialogClose:this.handleDialogClose,duplicateSubmitLoading:this.state.duplicateLoading}),r.a.createElement(Hu,{snackbarOpen:this.state.snackbarOpen,snackbarType:this.state.snackbarType,snackbarMsg:this.state.snackbarMessage,onSnackbarClose:this.handleSnackbarClose}))}}]),a}(n.Component),hp=Object(d.c)((function(e){return{projects:e.flowReducerState.projects,projectsLoaded:e.flowReducerState.projectsLoaded,projectsLoadedError:e.flowReducerState.projectsLoadedError,email:e.userReducerState.email,metabaseLoginId:e.flowReducerState.metabaseLoginId,activeProjectId:e.flowReducerState.activeProjectId}}),(function(e){return{createNewProject:function(t){e(function(e){return{type:H,payload:e}}(t))},deleteProject:function(t){e(tt(t))},duplicateProject:function(t,a,n){e(et(t,a,n))},cleanSession:function(){e(wt())},fireReturnToProject:function(t){e(yt(t))}}}))(mp);a(1064);function fp(e){var t=r.a.useState(null),a=Object(Ht.a)(t,2),s=a[0],o=a[1],i=function(){o(null)};return r.a.createElement(n.Fragment,null,r.a.createElement(fa.a,{className:"more-button",onClick:function(e){o(e.currentTarget)},size:"small"},r.a.createElement(Yc.a,null)),r.a.createElement(Pl.a,{classes:{paper:"action-btn-menu"},anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:i},r.a.createElement(va.a,{onClick:function(){i(),e.onEdit()}},r.a.createElement(Tl.a,null),r.a.createElement("span",null,"Edit Project")),r.a.createElement(va.a,{onClick:function(){i(),e.onDelete()}},r.a.createElement(qt.a,null),r.a.createElement("span",null,"Delete Project")),r.a.createElement(va.a,{onClick:function(){i(),e.onShare()}},r.a.createElement(Ll.a,null),r.a.createElement("span",null,"Share Project")),r.a.createElement(va.a,{onClick:function(){i(),e.onDuplicate()}},r.a.createElement(zl.a,null),r.a.createElement("span",null,"Clone Project"))))}var gp=a(267),bp=a.n(gp),vp=a(268),_p=a.n(vp),Ep=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={sort:"all",deletePipeline:null,deleteDialogState:!1,deletePipelineName:"",deletePipelineID:"",newFlowDialogState:!1,newFlowName:"",newFlowNameError:!1,newFlowNameErrorMsg:"",projectId:"",projectNameEditMode:!1,title:"",projectDeleteDialogState:!1,projectShareDialogState:!1,projectShareDialogErrorState:!1,projectShareDialogErrorMsg:"",snackbarShareProSuccessState:!1,editProjectDialogState:!1,addDatasetDialogState:!1,addDashboardtDialogState:!1,deleteDatasetDialogState:!1,uploadDatasetDialogState:!1,editDatasetDialogState:!1,editDashboardDialogState:!1,duplicateDialogProjectState:!1,tabValue:0,datasetEditMode:!1,addDatasetMinimize:!1,dashEditMode:!1,snackbarOpen:!1,snackbarMessage:null,snackbarType:"",sharingLoading:!1,renamingLoading:!1,deletingLoading:!1,newlyAddedDatasetNameExists:!1,newlyAddedDashNameExists:!1,addFlowLoading:!1,rowsPerPage:16,page:0,searchTerm:"",flowsFilter:"all",renderAsList:!1,tableSortAsc:!0,tableSortProperty:"",toggleFilterDisplay:!1,clickedBox:"",importFlowDialogState:!1,importFlowNameExists:!1,cloneFlowDialogState:!1,cloneFlowId:"",cloneFlowName:"",cloneFlowNameError:!1,cloneFlowNameErrorMsg:"",cloneProcess:!1,sessionCreated:!1,sessionID:"",showContent:!1,loadingTxt:""},e.onRequestSort=function(t,a){e.setState({tableSortAsc:!e.state.tableSortAsc,tableSortProperty:a})},e.handleDialogkOpen=function(t){e.setState({deleteDialogState:!0,deletePipeline:t,deletePipelineName:t._name,deletePipelineID:t._id})},e.handleOnClone=function(t,a){e.setState({cloneFlowDialogState:!0,cloneFlowId:t,cloneFlowName:a})},e.handleChangeSearchTerm=function(t){e.setState({searchTerm:t.target.value})},e.handleRenderAsList=function(){e.setState({renderAsList:!0})},e.handleRenderAsGrid=function(){e.setState({renderAsList:!1})},e.handleChangePage=function(t,a){e.setPage(a)},e.handleChangeRowsPerPage=function(t){e.setRowsPerPage(parseInt(t.target.value,10)),e.setPage(0)},e.setPage=function(t){e.setState({page:t})},e.setRowsPerPage=function(t){e.setState({rowsPerPage:t})},e.handleToggleFilter=function(){!0===e.state.toggleFilterDisplay?e.setState({toggleFilterDisplay:!1}):e.setState({toggleFilterDisplay:!0})},e.sortFlows=function(t){return""!==e.state.tableSortProperty?e.sortOn(t,e.state.tableSortProperty):t},e.sortOn=function(t,a){return t.sort((function(t,n){return n[a]<t[a]?e.state.tableSortAsc?1:-1:n[a]>t[a]?e.state.tableSortAsc?-1:1:0}))},e.filterFlows=function(t){return""!==e.state.searchTerm&&(t=t.filter((function(t){return t.name.toLowerCase().indexOf(e.state.searchTerm.toLowerCase())>-1}))),t},e.viewTypeSwitchButtons=function(){return[r.a.createElement(At.a,{key:1,color:e.state.renderAsList?"primary":"default",onClick:function(){return e.handleRenderAsList()}},r.a.createElement(Qd.a,null)),r.a.createElement(At.a,{key:2,color:e.state.renderAsList?"default":"primary",onClick:function(){return e.handleRenderAsGrid()}},r.a.createElement(Xd.a,null))]},e.getFlowsFilters=function(t){if(t)return r.a.createElement("div",{className:"filters-and-pagination"},r.a.createElement("div",{className:"table-filters"},r.a.createElement(Na,{_label:"",_placeholder:"Search...",_type:"text",_autoComplete:"new-password",_value:e.state.searchTerm,_size:"small",_margin:"none",_filterType:!0,_onChange:function(t){return e.handleChangeSearchTerm(t)},_startIcon:{_icon:r.a.createElement(tl.a,{fontSize:"small"})}}),r.a.createElement(np,{_variant:"contained",_size:"small",_color:"secondary",_buttons:e.viewTypeSwitchButtons()})),r.a.createElement("div",{className:"table-pagination"},r.a.createElement(qd.a,{component:"div",className:"flows-pagination",labelRowsPerPage:"Flows per page",rowsPerPageOptions:[8,16,32],colSpan:3,count:t.length,rowsPerPage:e.state.rowsPerPage,page:e.state.page,SelectProps:{inputProps:{"aria-label":"Flows per page"}},onChangePage:e.handleChangePage,onChangeRowsPerPage:e.handleChangeRowsPerPage,ActionsComponent:pp.a})))},e.handleFlowDialogClose=function(){e.setState({newFlowDialogState:!1,newFlowName:"",newFlowNameError:!1,addFlowLoading:!1})},e.handleDeleteDialogClose=function(){e.setState({deleteDialogState:!1,deletePipeline:null,deletePipelineName:"",deletePipelineID:""})},e.handleNewFlowDialogSave=function(){if(!e.props.creatingFlow){var t=e.state.newFlowName,a=!1;e.props.flows.map((function(e){return e.name===t&&(a=!0),""})),""===t?e.setState({newFlowNameError:!0,newFlowNameErrorMsg:"Flow name required"}):!1!==a?e.setState({newFlowNameError:!0,newFlowNameErrorMsg:"Flow with same name already exists. Please choose different name"}):(e.setState({newFlowNameError:!1,newFlowNameErrorMsg:"",addFlowLoading:!0}),setTimeout((function(){var a=t,n=e.props.projectId;Lo({name:a,projectId:n,definition:{}}).then((function(t){e.props.subpageClick("/flow/".concat(t))}))}),2e3))}},e.handleSnackbarClose=function(){e.setState({snackbarOpen:!1})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"handleOnDownloadClick",value:function(e,t){var a=this;Mo(e).then((function(e){var t=e.pipeline.definition;if(t.facets){t.facets.map((function(e){return"IMPORTED"===e.facet_type&&"DATASET"===e.facet_group?(delete e.arguments.bucket,Object.keys(e.arguments).map((function(t){return"path"===t&&e.arguments[t]&&(e.arguments[t]=""),""}))):"EXPORTED"===e.facet_type&&"DATASET"===e.facet_group?(delete e.arguments.bucket,delete e.arguments.project_id,delete e.arguments.user_email,delete e.arguments.dataset_id,delete e.arguments.overwrite,Object.keys(e.arguments).map((function(t){"dataset_name"===t&&e.arguments[t]&&(e.arguments[t]="")}))):"S3"===e.facet_type&&Object.keys(e.arguments).map((function(t){"bucket"!==t&&"path"!==t&&"aws_access_key_id"!==t&&"aws_secret_access_key"!==t||!e.arguments[t]||(e.arguments[t]="")})),e}));var s=new Blob([JSON.stringify(t)],{type:"text/json"});bp.a.saveAs(s,e.pipeline.name+".iki")}else a.setState({snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"This pipeline is empty")),snackbarType:"error",snackbarOpen:!0})}))}},{key:"onImportFlowClick",value:function(){this.setState({importFlowDialogState:!0})}},{key:"onNewFlowItemClick",value:function(){this.setState({newFlowDialogState:!0})}},{key:"handleImportFlowDialogCancel",value:function(){this.setState({importFlowDialogState:!1,importFlowNameExists:!1})}},{key:"handleCloneFlowDialogCancel",value:function(){this.setState({cloneFlowDialogState:!1,cloneFlowId:"",cloneFlowName:"",cloneFlowNameError:!1,cloneFlowNameErrorMsg:""})}},{key:"handleImportFlowDialogSubmit",value:function(e,t){var a=this,n=!1;if(this.props.flows.map((function(t){return t.name===e&&(n=!0),""})),!1!==n)this.setState({importFlowNameExists:!0});else{this.setState({importFlowNameExists:!1});var r=e,s=this.props.projectId;Lo({name:r,projectId:s,definition:t}).then((function(e){a.props.subpageClick("/flow/".concat(e))}))}}},{key:"handleCloneFlowDialogSubmit",value:function(e,t,a,n){var r=this,s=!1;this.props.flows.forEach((function(t){t.name===e&&(s=!0)})),""===e?this.setState({cloneFlowNameError:!0,cloneFlowNameErrorMsg:"Flow name required",cloneProcess:!1}):!1!==s?this.setState({cloneFlowNameError:!0,cloneFlowNameErrorMsg:"Flow with same name already exists. Please choose different name",cloneProcess:!1}):(this.setState({cloneFlowNameError:!1,cloneFlowNameErrorMsg:"",addFlowLoading:!0}),Mo(t).then((function(t){var s=t.pipeline.definition;s.facets&&s.facets.map((function(e){return"with-data"!==n&&("IMPORTED"===e.facet_type&&"DATASET"===e.facet_group?(delete e.arguments.bucket,Object.keys(e.arguments).map((function(t){return"path"===t&&e.arguments[t]&&(e.arguments[t]=""),""}))):"EXPORTED"===e.facet_type&&"DATASET"===e.facet_group?(delete e.arguments.bucket,delete e.arguments.project_id,delete e.arguments.user_email,delete e.arguments.dataset_id,delete e.arguments.overwrite,Object.keys(e.arguments).map((function(t){return"dataset_name"===t&&e.arguments[t]&&(e.arguments[t]=""),""}))):"S3"===e.facet_type&&Object.keys(e.arguments).map((function(t){return"bucket"!==t&&"path"!==t&&"aws_access_key_id"!==t&&"aws_secret_access_key"!==t||!e.arguments[t]||(e.arguments[t]=""),""}))),e})),Lo({name:e,projectId:a,definition:s}).then((function(e){r.props.subpageClick("/flow/".concat(e))}))})))}},{key:"getFlows",value:function(e){var t=this,a=(e=this.sortFlows(this.filterFlows(e))).slice(this.state.page*this.state.rowsPerPage,this.state.page*this.state.rowsPerPage+this.state.rowsPerPage);return e&&0===e.length?r.a.createElement(n.Fragment,null,this.getFlowsFilters(e),r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(Pt.a,{display:"flex",alignItems:"center",className:"no-results"},r.a.createElement(Gd.a,{className:"no-results-icon"}),r.a.createElement("span",{className:"no-results-txt"},"No flows found")))):r.a.createElement(n.Fragment,null,this.getFlowsFilters(e),this.state.renderAsList?r.a.createElement(Ri.a,{item:!0,xs:12,className:"i-pb-0"},r.a.createElement(Eu.a,{className:"cardbox has-table tableHolder"},r.a.createElement(Id.a,{className:"content table-inside"},r.a.createElement(Hl,{_type:"Flow",_link:"/flow/",_header:[{key:"name",name:"Flow"},{key:"pipeline_id",name:"ID"}],_data:a,_functions:[{edit:function(e){return t.props.subpageClick("/flow/".concat(e))}},{delete:function(e){return t.handleDialogkOpen(e)}},{download:function(e,a){return t.handleOnDownloadClick(e,a)}},{clone:function(e,a){return t.handleOnClone(e,a)}}]})))):r.a.createElement(up,{_type:"Flow",_link:"/flow/",_icon:r.a.createElement(_p.a,null),_data:a,_functions:[{edit:function(e){return t.props.subpageClick("/flow/".concat(e))}},{delete:function(e){return t.handleDialogkOpen(e)}},{download:function(e,a){return t.handleOnDownloadClick(e,a)}},{clone:function(e,a){return t.handleOnClone(e,a)}}]}),e.length>this.state.rowsPerPage&&r.a.createElement(qd.a,{component:"div",className:"pagination-sm",labelRowsPerPage:"Flows per page",rowsPerPageOptions:[8,16,32],colSpan:3,count:e.length,rowsPerPage:this.state.rowsPerPage,page:this.state.page,SelectProps:{inputProps:{"aria-label":"Flows per page"}},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage,ActionsComponent:pp.a}))}},{key:"render",value:function(){var e=this,t=[];return this.props.flows&&(t=this.props.flows),r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"under-tab-buttons"},r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Add New Flow",_type:"button",_fullWidth:!1,_loading:!1,_startIcon:r.a.createElement("i",{className:"zmdi zmdi-plus zmdi-hc-fw"}),_onClick:function(){return e.onNewFlowItemClick()}}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Import a Flow",_type:"button",_fullWidth:!1,_loading:!1,_startIcon:r.a.createElement("i",{className:"zmdi zmdi-upload zmdi-hc-fw"}),_onClick:function(){return e.onImportFlowClick()}})),r.a.createElement("div",{className:"cardbox-holder"},this.getFlows(t)),this.newFlowDialog(),this.deleteFlowDialog(),r.a.createElement(uc,{isImportingProgress:this.props.creatingFlow,open:this.state.importFlowDialogState,handleCancel:function(){return e.handleImportFlowDialogCancel()},importFlowNameExists:this.state.importFlowNameExists,handleSubmit:function(t,a){return e.handleImportFlowDialogSubmit(t,a)}}),r.a.createElement(mc,{isCloningProgress:this.state.cloneProcess,cloneFlowId:this.state.cloneFlowId,cloneFlowName:this.state.cloneFlowName,cloneFlowError:this.state.cloneFlowNameErrorMsg,projectsList:this.props.projects,projectId:this.props.projectId,open:this.state.cloneFlowDialogState,handleCancel:function(){return e.handleCloneFlowDialogCancel()},handleSubmit:function(t,a,n,r){e.setState({cloneProcess:!0}),e.handleCloneFlowDialogSubmit(t,a,n,r)}}),r.a.createElement(Hu,{snackbarOpen:this.state.snackbarOpen,snackbarType:this.state.snackbarType,snackbarMsg:this.state.snackbarMessage,onSnackbarClose:this.handleSnackbarClose}))}},{key:"newFlowDialog",value:function(){var e=this;return r.a.createElement(Wa,{_open:this.state.newFlowDialogState,_onClose:this.handleFlowDialogClose,_type:"regular",_icon:!1,_title:"New flow",_subtitle:"",_size:"xs",_content:r.a.createElement(Na,{_label:"Flow name",_placeholder:"Enter flow name",_type:"text",_value:this.state.newFlowName,_onChange:function(t){e.setState({newFlowName:t.target.value})},_characterCounter:40,_autoFocus:!0,_fullWidth:!0,_error:this.state.newFlowNameErrorMsg}),_actions:r.a.createElement(n.Fragment,null,r.a.createElement(ua,{_variant:"text",_color:"default",_label:"Cancel",_type:"button",_fullWidth:!1,_loading:!1,_onClick:this.handleFlowDialogClose}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Create",_type:"button",_fullWidth:!1,_loading:this.state.addFlowLoading,_disabled:this.state.addFlowLoading,_isAlternate:!0,_onClick:this.handleNewFlowDialogSave}))})}},{key:"deleteFlowDialog",value:function(){var e=this;return r.a.createElement(Wa,{_open:this.state.deleteDialogState,_onClose:this.handleDeleteDialogClose,_type:"delete",_icon:!1,_title:"Delete pipeline",_subtitle:"",_size:"xs",_align:"center",_content:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"txt-dialog-faded1"},this.state.deletePipelineID),r.a.createElement("div",{className:"txt-dialog-impact1"},this.state.deletePipelineName)),r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"txt-dialog-impact2 error"},"Are you sure ?"))),_actions:r.a.createElement(n.Fragment,null,r.a.createElement(ua,{_variant:"text",_color:"default",_label:"Cancel",_type:"button",_fullWidth:!1,_loading:!1,_onClick:this.handleDeleteDialogClose}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Delete",_type:"button",_fullWidth:!1,_loading:!1,_disabled:!1,_isDanger:!0,_onClick:function(){return e.onDelete(e.state.deletePipeline)}}))})}},{key:"onDelete",value:function(e){this.props.deleteFlow(e),this.setState({deleteDialogState:!1,deletePipeline:"",snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"You have succesfully deleted pipeline"),r.a.createElement("div",{className:"val"},this.state.deletePipelineName)),snackbarType:"success",snackbarOpen:!0})}}]),a}(n.Component),Sp=a(561),yp=a.n(Sp),wp=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={sort:"all",d_sort:"all",deletePipeline:null,deleteDialogState:!1,deletePipelineName:"",deletePipelineID:"",newFlowDialogState:!1,newFlowName:"",newFlowNameError:!1,newFlowNameErrorMsg:"",projectId:"",projectNameEditMode:!1,title:"",projectDeleteDialogState:!1,projectShareDialogState:!1,projectShareDialogErrorState:!1,projectShareDialogErrorMsg:"",snackbarShareProSuccessState:!1,editProjectDialogState:!1,addDatasetDialogState:!1,addDashboardtDialogState:!1,deleteDatasetDialogState:!1,uploadDatasetDialogState:!1,editDatasetDialogState:!1,editDashboardDialogState:!1,duplicateDialogProjectState:!1,tabValue:0,datasetEditMode:!1,addDatasetMinimize:!1,dashEditMode:!1,snackbarOpen:!1,snackbarMessage:null,snackbarType:"",sharingLoading:!1,renamingLoading:!1,deletingLoading:!1,newlyAddedDatasetNameExists:!1,newlyAddedDashNameExists:!1,addFlowLoading:!1,rowsPerPage:16,page:0,searchTerm:"",flowsFilter:"all",renderAsList:!1,tableSortAsc:!0,tableSortProperty:"",toggleFilterDisplay:!1,clickedBox:"",d_rowsPerPage:16,d_page:0,d_searchTerm:"",d_flowsFilter:"all",d_renderAsList:!1,d_tableSortAsc:!0,d_tableSortProperty:"",d_toggleFilterDisplay:!1,d_clickedBox:"",importFlowDialogState:!1,importFlowNameExists:!1,cloneFlowDialogState:!1,cloneFlowId:"",cloneFlowName:"",cloneFlowNameError:!1,cloneFlowNameErrorMsg:"",cloneProcess:!1,sessionCreated:!1,sessionID:"",showContent:!1,loadingTxt:""},e.onRequestSort=function(t,a){e.setState({tableSortAsc:!e.state.tableSortAsc,tableSortProperty:a})},e.handleChangeSearchTerm=function(t){e.setState({searchTerm:t.target.value})},e.handleRenderAsList=function(){e.setState({renderAsList:!0})},e.handleRenderAsGrid=function(){e.setState({renderAsList:!1})},e.handleChangePage=function(t,a){e.setPage(a)},e.handleChangeRowsPerPage=function(t){e.setRowsPerPage(parseInt(t.target.value,10)),e.setPage(0)},e.setPage=function(t){e.setState({page:t})},e.setRowsPerPage=function(t){e.setState({rowsPerPage:t})},e.handleToggleFilter=function(){!0===e.state.toggleFilterDisplay?e.setState({toggleFilterDisplay:!1}):e.setState({toggleFilterDisplay:!0})},e.sortDatasets=function(t){return""!==e.state.tableSortProperty?e.sortOn(t,e.state.tableSortProperty):t},e.sortOn=function(t,a){return t.sort((function(t,n){return n[a]<t[a]?e.state.tableSortAsc?1:-1:n[a]>t[a]?e.state.tableSortAsc?-1:1:0}))},e.filterDatasets=function(t){return""!==e.state.searchTerm&&(t=t.filter((function(t){return t.name.toLowerCase().indexOf(e.state.searchTerm.toLowerCase())>-1}))),t},e.viewTypeSwitchButtons=function(){return[r.a.createElement(At.a,{key:1,color:e.state.renderAsList?"primary":"default",onClick:function(){return e.handleRenderAsList()}},r.a.createElement(Qd.a,null)),r.a.createElement(At.a,{key:2,color:e.state.renderAsList?"default":"primary",onClick:function(){return e.handleRenderAsGrid()}},r.a.createElement(Xd.a,null))]},e.getDatasetsFilters=function(t){if(t)return r.a.createElement("div",{className:"filters-and-pagination"},r.a.createElement("div",{className:"table-filters"},r.a.createElement(Na,{_label:"",_placeholder:"Search...",_type:"text",_autoComplete:"new-password",_value:e.state.searchTerm,_size:"small",_margin:"none",_filterType:!0,_onChange:function(t){return e.handleChangeSearchTerm(t)},_startIcon:{_icon:r.a.createElement(tl.a,{fontSize:"small"})}}),r.a.createElement(np,{_variant:"contained",_size:"small",_color:"secondary",_buttons:e.viewTypeSwitchButtons()})),r.a.createElement("div",{className:"table-pagination"},r.a.createElement(qd.a,{component:"div",className:"flows-pagination",labelRowsPerPage:"Datasets per page",rowsPerPageOptions:[8,16,32],colSpan:3,count:t.length,rowsPerPage:e.state.rowsPerPage,page:e.state.page,SelectProps:{inputProps:{"aria-label":"Datasets per page"}},onChangePage:e.handleChangePage,onChangeRowsPerPage:e.handleChangeRowsPerPage,ActionsComponent:pp.a})))},e.handleSnackbarClose=function(){e.setState({snackbarOpen:!1})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"onNewDatasetItemClick",value:function(){this.setState({addDatasetDialogState:!0,datasetEditMode:!1})}},{key:"getDatasets",value:function(e){var t,a,s=this,o=[],i=[];return this.props.datasets&&(o=this.props.datasets,t=(o=this.sortDatasets(this.filterDatasets(o))).slice(this.state.page*this.state.rowsPerPage,this.state.page*this.state.rowsPerPage+this.state.rowsPerPage),o.forEach((function(e,t){a=s.props.uploadProgress.filter((function(t){return"complete"!==t.status&&e.dataset_id===t.datasetId})),Object.keys(a).length>0&&(i[e.dataset_id]=e.dataset_id)}))),o&&0===o.length?r.a.createElement(n.Fragment,null,this.getDatasetsFilters(o),r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(Pt.a,{display:"flex",alignItems:"center",className:"no-results"},r.a.createElement(Gd.a,{className:"no-results-icon"}),r.a.createElement("span",{className:"no-results-txt"},"No datasets found")))):r.a.createElement(n.Fragment,null,this.getDatasetsFilters(o),this.state.renderAsList?r.a.createElement(Ri.a,{item:!0,xs:12,className:"i-pb-0"},r.a.createElement(Eu.a,{className:"cardbox has-table tableHolder"},r.a.createElement(Id.a,{className:"content table-inside"},r.a.createElement(Hl,{_type:"Dataset",_link:"/dataset/",_header:[{key:"name",name:"Dataset"},{key:"dataset_id",name:"ID"}],_data:t,_functions:[{edit:function(e){return s.handleDatasetEdit(e)}},{delete:function(e){return s.handleDatasetDelete(e)}},{download:function(e){return s.handleDatasetDownload(e)}},{browse:function(e){return s.props.subpageClick("/dataset/".concat(e))}}]})))):r.a.createElement(up,{_type:"Dataset",_link:"/dataset/",_icon:r.a.createElement(yp.a,null),_data:t,_uploadInfo:a,_functions:[{edit:function(e){return s.handleDatasetEdit(e)}},{delete:function(e){return s.handleDatasetDelete(e)}},{download:function(e){return s.handleDatasetDownload(e)}},{browse:function(e){return s.props.subpageClick("/dataset/".concat(e))}}]}),o.length>this.state.rowsPerPage&&r.a.createElement(qd.a,{component:"div",className:"pagination-sm",labelRowsPerPage:"Datasets per page",rowsPerPageOptions:[8,16,32],colSpan:3,count:o.length,rowsPerPage:this.state.rowsPerPage,page:this.state.page,SelectProps:{inputProps:{"aria-label":"Datasets per page"}},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage,ActionsComponent:pp.a}))}},{key:"render",value:function(){var e=this,t=[];this.props.datasets&&(t=this.props.datasets);var a=this.props.projects.filter((function(t){return t.project_id===e.props.projectId}))[0];return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"under-tab-buttons"},r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Upload New Dataset",_type:"button",_fullWidth:!1,_loading:!1,_startIcon:r.a.createElement("i",{className:"zmdi zmdi-cloud-upload zmdi-hc-fw"}),_onClick:function(){return e.onNewDatasetItemClick()}})),r.a.createElement("div",{className:"cardbox-holder"},this.getDatasets(t)),r.a.createElement(sc,{projectId:this.props.projectId,projectName:a?a.name:"",isEdit:this.state.datasetEditMode,open:this.state.addDatasetDialogState,name:this.state.selectedDatasetData?this.state.selectedDatasetData._name:"",datasetID:this.state.selectedDatasetData?this.state.selectedDatasetData._id:"",uploadStatus:this.props.uploadStatus,handleDialogClose:function(){return e.handleAddDatasetDialogClose()},handleSubmit:function(t,a){return e.handleAddDatasetDialogSubmit(t,a)},handleSubmitOverwrite:function(t,a){return e.handleAddDatasetDialogSubmitOverwrite(t,a)},handleCancel:function(){return e.handleAddDatasetDialogClose()},newDatasetNameExists:this.state.newlyAddedDatasetNameExists,dismissAlert:function(){return e.handleDismissDatasetNameExists()}}),r.a.createElement(oc,{datasetId:this.state.selectedDatasetData?this.state.selectedDatasetData._id:"",datasetName:this.state.selectedDatasetData?this.state.selectedDatasetData._name:"",open:this.state.deleteDatasetDialogState,handleDialogClose:function(){return e.handleDeleteDatasetDialogClose()},handleSubmit:function(){return e.handleDeleteDatsetDialogSubmit()},handleCancel:function(){return e.handleDeleteDatasetDialogClose()}}),r.a.createElement(ic,{datasetId:this.state.selectedDatasetData?this.state.selectedDatasetData._id:"",datasetName:this.state.selectedDatasetData?this.state.selectedDatasetData._name:"",open:this.state.editDatasetDialogState,handleDialogClose:function(){return e.handleEditDatasetDialogClose()},handleSubmit:function(){return e.handleEditDatasetDialogSubmit()},handleCancel:function(){return e.handleEditDatasetDialogClose()}}),r.a.createElement(Hu,{snackbarOpen:this.state.snackbarOpen,snackbarType:this.state.snackbarType,snackbarMsg:this.state.snackbarMessage,onSnackbarClose:this.handleSnackbarClose}))}},{key:"handleEditDatasetDialogSubmit",value:function(){this.handleEditDatasetDialogClose()}},{key:"handleUploadDatasetDialogClose",value:function(){this.setState({uploadDatasetDialogState:!1})}},{key:"handleUploadDatasetDialogSubmit",value:function(){this.handleUploadDatasetDialogClose()}},{key:"handleDeleteDatsetDialogSubmit",value:function(){this.state.selectedDatasetData&&(this.props.deleteDataset(this.state.selectedDatasetData._id),this.setState({snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"You have succesfully deleted dataset: "),r.a.createElement("div",{className:"val"},this.state.selectedDatasetData._name)),snackbarType:"success",snackbarOpen:!0})),this.handleDeleteDatasetDialogClose()}},{key:"handleDeleteDatasetDialogClose",value:function(){this.setState({deleteDatasetDialogState:!1})}},{key:"handleDismissDatasetNameExists",value:function(){this.setState({newlyAddedDatasetNameExists:!1})}},{key:"handleAddDatasetDialogSubmitOverwrite",value:function(e,t){var a=this,n="";this.props.datasets.filter((function(e){return e.project_id===a.props.projectId})).forEach((function(t){t.name===e&&t.project_id===a.props.projectId&&(n=t.dataset_id)})),""!==n&&(this.props.editDataset(this.props.projectId,n,e,t),this.setState({newlyAddedDatasetNameExists:!1}),this.handleAddDatasetDialogClose())}},{key:"handleAddDatasetDialogSubmit",value:function(e,t){var a=this,n=!1;this.props.datasets.filter((function(e){return e.project_id===a.props.projectId})).forEach((function(t){t.name===e&&t.project_id===a.props.projectId&&(n=!0)})),!1!==n?this.setState({newlyAddedDatasetNameExists:!0}):(this.state.datasetEditMode?(this.props.editDataset(this.props.projectId,this.state.selectedDatasetData._id,e,t),this.handleAddDatasetDialogClose()):(this.props.createDataset(this.props.projectId,e,t),this.handleAddDatasetDialogClose()),this.handleAddDatasetDialogClose())}},{key:"handleAddDatasetDialogClose",value:function(){this.setState({addDatasetDialogState:!1})}},{key:"handleEditDatasetDialogClose",value:function(){this.setState({addDatasetDialogState:!1})}},{key:"handleDatasetEdit",value:function(e){console.log("handleDatasetEdit: ",e),this.setState({addDatasetDialogState:!0,selectedDatasetData:e,datasetEditMode:!0})}},{key:"handleDatasetDelete",value:function(e){this.setState({deleteDatasetDialogState:!0,selectedDatasetData:e})}},{key:"handleDatasetUpload",value:function(e){this.setState({uploadDatasetDialogState:!0,selectedDatasetData:e})}},{key:"handleDatasetDownload",value:function(e){(function(e,t,a){var n={dataset_id:a};return new Promise((function(e,t){Ye.get("/get-dataset-download-url",{params:n}).then((function(a){if(200===a.status){var n=a.data.url,r=a.data.filename,s=a.data.content_type;hi(n,r,s).then((function(t){e({file:t,fullFileName:r,fileType:s,fileUrl:n})}))}else t("Erorr: Unable to get Dataset download link!")}))}))})(e.name,e.project_id,e.dataset_id).then((function(e){bp.a.saveAs(e.file.blobFile,e.file.fileName)}))}}]),a}(n.Component),kp=a(562),jp=a.n(kp),Dp=a(188),Op=(a(1065),function(e){var t=Object(n.useState)(!1),a=Object(Ht.a)(t,2),s=a[0],o=a[1],i=Object(n.useCallback)((function(t){e.onFileAdded(t[0]),o(!1)}),[e]),l=Object(tc.a)({onDrop:i,accept:e.accept?e.accept:".py"}),c=l.getRootProps,u=l.getInputProps;return Object(n.useEffect)((function(){return function(){o(!1)}}),[]),r.a.createElement("section",{className:"dropzone-container"},!e.fileData||s?r.a.createElement("div",c({className:e.disabled?"dropzone disabled":"dropzone"}),r.a.createElement("input",u()),r.a.createElement("p",null,"Drop the file or click to select file.")):r.a.createElement("div",{className:"upload-file"},r.a.createElement("div",{className:"upload-file-title"},r.a.createElement(nc.a,null),r.a.createElement("span",{className:"upload-name"},e.fileData.name),r.a.createElement("span",{className:"upload-size"},"(",(e.fileData.size/1e3).toFixed(2)," KB)")),r.a.createElement(fa.a,{disabled:e.disabled,onClick:function(){o(!0)}},r.a.createElement(qt.a,{color:"primary"}))))});function Np(e){var t=e.dashboardId,a=e.name,s=e.handleDialogClose,o=e.handleSubmit,i=e.handleSubmitOverwrite,l=e.handleCancel,c=e.open,u=e.isEdit,d=e.dashUploadStatus,p=e.newDashboardNameExists,m=e.dismissAlert,h=e.datasetIds,f=e.datasets,g=Object(n.useState)(""),b=Object(Ht.a)(g,2),v=b[0],_=b[1],E=Object(n.useState)(""),S=Object(Ht.a)(E,2),y=S[0],w=S[1],k=Object(n.useState)(h),j=Object(Ht.a)(k,2),D=j[0],O=j[1],N=Object(n.useState)(),C=Object(Ht.a)(N,2),P=C[0],I=C[1],x=Object(n.useState)([]),F=Object(Ht.a)(x,2),T=F[0],A=F[1],L=Object(n.useState)(!1),M=Object(Ht.a)(L,2),z=M[0],R=M[1],V=function(){I(null),R(!1),_(""),w(""),s()};return r.a.createElement(Wa,{_open:c,_onExit:V,_onEnter:function(){_(u?a:""),w(""),O(u?h:[""]),A(u?h:[]),I(null)},_onClose:V,_type:"clouploadne",_icon:!1,_title:u?"Edit Dashboard":"Upload New Dashboard",_subtitle:"",_size:"xs",_align:"left",_content:r.a.createElement(r.a.Fragment,null,!0===p?r.a.createElement(n.Fragment,null,r.a.createElement(aa,{alertType:"warning",alertContent:r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement("span",null,"Dashboard with same name already exists."),r.a.createElement("br",null),r.a.createElement("strong",null,v)),r.a.createElement("div",null,"Please note:",r.a.createElement("br",null)," All flows which contain this dashboard will be reflected by this change."),r.a.createElement("div",null,r.a.createElement("strong",null,"Are you sure you want to continue and overwrite dashboard?"))),alertButtons:r.a.createElement(n.Fragment,null,r.a.createElement(ua,{_variant:"contained",_color:"default",_label:"No, go back",_type:"button",_fullWidth:!1,_loading:!1,_onClick:function(){return m()}}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Yes, overwrite",_type:"button",_isWarning:!0,_fullWidth:!1,_loading:!1,_onClick:function(){""!==v&&""!==P?u?(P||""!==v)&&D.length>0?(i(v,P,D),R(!1)):R(!0):P&&""!==v&&D.length>0?(i(v,P,D),R(!1)):R(!0):R(!0)}}))})):r.a.createElement("div",null,u&&r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"txt-dialog-faded1"},t),r.a.createElement("div",{className:"txt-dialog-impact1"},a)),r.a.createElement("div",{className:"section"},r.a.createElement(Na,{_label:"Dashboard name",_placeholder:"Enter new name for Dashboard",_type:"text",_autoComplete:"new-password",_value:v,_onChange:function(e){_(e.target.value)},_characterCounter:40,_autoFocus:!0,_fullWidth:!0,_error:y}),r.a.createElement(Pt.a,{mt:2},r.a.createElement(Dp.a,{variant:"caption",color:"textSecondary"},"Python Script File * ")),r.a.createElement(Op,{onFileAdded:function(e){return I(e)},disabled:"pending"===d,fileData:P}),z&&!u&&!P&&r.a.createElement(Ft.a,{className:"input-error",error:!0},r.a.createElement(Mt.a,null),r.a.createElement("span",null,"File is required"))),r.a.createElement("div",{className:"section"},r.a.createElement(Pt.a,{mt:2},r.a.createElement("div",{className:"flow-nested-arg in-add-dash-dialog",key:"ASSOCIATED_DATASET"},r.a.createElement("div",{className:"flow-nested-arg-title"},r.a.createElement("div",{className:"flow-nested-arg-label"},"ASSOCIATED DATASETS")),D.map((function(e,t){return r.a.createElement("div",{className:"flow-addon-associated_datasets",key:t},r.a.createElement(It.a,{color:"primary","aria-label":"delete",size:"small",className:"flow-nested-associated-btn",disabled:1===D.length,onClick:function(){var e=D.filter((function(e,a){return a!=t}));O(e),A(e)}},r.a.createElement(qt.a,null)),r.a.createElement(Na,{key:"ikinputselect-"+t,_required:!0,_error:!z||" "!==D[t]&&""!==D[t]?"":"Cannot be empty",_label:"Associated Dataset # "+(t+1),_placeholder:"Select Associated Dataset",_type:"text",_autoComplete:"new-password",_value:T[t]?D[t]:" ",_isSelect:!0,_fullWidth:!0,_selectOptions:f,_selectOptionsKeyForVal:"dataset_id",_selectOptionsKeyForTxt:"name",_onChange:function(e){var a=D;a[t]=e.target.value;var n=T;n[t]=e.target.value;var r=a.map((function(e,t){return!!n[t]&&n[t]})).filter((function(e){return 0!=e}));O(r),A(r)}}))})),r.a.createElement("div",null,r.a.createElement(ua,{_variant:"contained",_color:"default",_label:"Add Associated Dataset",_type:"button",_fullWidth:!0,_loading:!1,_disabled:!1,_onClick:function(){return O([].concat(Object(jt.a)(D),[""]))},_startIcon:r.a.createElement(Bt.a,null)}))),z&&D.length<1&&r.a.createElement(Ft.a,{className:"input-error",error:!0},r.a.createElement(Mt.a,null),r.a.createElement("span",null,"Minimum one Dataset's required")))))),_actions:!0!==p&&r.a.createElement(n.Fragment,null,r.a.createElement(ua,{_variant:"text",_color:"default",_label:"Cancel",_type:"button",_fullWidth:!1,_loading:!1,_onClick:function(){return l()}}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:u?"Update":"Upload",_type:"button",_fullWidth:!1,_loading:"pending"===d,_disabled:"pending"===d,_onClick:function(){""!==v&&""!==P?u?D.filter((function(e){return""===e||""===e})).length>0?R(!0):(P||""!==v)&&D.length>0?(o(v,P,D,t),R(!1)):R(!0):D.filter((function(e){return""===e||""===e})).length>0?R(!0):P&&""!==v&&D.length>0?(o(v,P,D,t),R(!1)):R(!0):""===v?(w("Required"),R(!1)):R(!0)}}))})}function Cp(e){var t=e.dashboardId,a=e.handleDialogClose,s=e.handleSubmit,o=e.handleCancel,i=e.open,l=Object(n.useState)(""),c=Object(Ht.a)(l,2),u=c[0],d=c[1],p=Object(n.useState)(!1),m=Object(Ht.a)(p,2),h=m[0],f=m[1];return r.a.createElement(Aa.a,{onClose:a,"aria-labelledby":"customized-dialog-title",open:i,className:"dialog",fullWidth:!0,maxWidth:"xs",disableBackdropClick:!0},r.a.createElement(Ma.a,{className:"dialog-content"},r.a.createElement("div",null,r.a.createElement(Pt.a,{className:"dialog-title default-color",mb:2},"Edit dashboard"),r.a.createElement("div",null,r.a.createElement("div",{className:"project-id"},t),r.a.createElement("div",{className:"project-name"},e.dashboardName)),r.a.createElement(ba.a,{variant:"outlined",margin:"normal",fullWidth:!0,required:!0,label:"Dashboard name",placeholder:"Enter new name for Dashboard",type:"search",autoComplete:"new-username",value:u,onChange:function(e){d(e.target.value)},error:h&&""===u,autoFocus:!0,InputLabelProps:{shrink:!0}}),h&&""===u&&r.a.createElement(Ft.a,{className:"input-error",error:!0},r.a.createElement(Mt.a,null),r.a.createElement("span",null,"Dashboard name required")))),r.a.createElement(za.a,{className:"footer"},r.a.createElement(At.a,{autoFocus:!0,onClick:function(){return o()},color:"default",className:"button"},"Cancel"),r.a.createElement(At.a,{variant:"contained",color:"primary",className:"button",onClick:function(){""!==u?(s(u),f(!1)):f(!0)}},"Update")))}var Pp=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={sort:"all",d_sort:"all",deletePipeline:null,deleteDialogState:!1,deletePipelineName:"",deletePipelineID:"",newFlowDialogState:!1,newFlowName:"",newFlowNameError:!1,newFlowNameErrorMsg:"",projectId:"",projectNameEditMode:!1,title:"",projectDeleteDialogState:!1,projectShareDialogState:!1,projectShareDialogErrorState:!1,projectShareDialogErrorMsg:"",snackbarShareProSuccessState:!1,editProjectDialogState:!1,addDatasetDialogState:!1,addDashboardtDialogState:!1,deleteDatasetDialogState:!1,uploadDatasetDialogState:!1,editDatasetDialogState:!1,editDashboardDialogState:!1,duplicateDialogProjectState:!1,tabValue:0,datasetEditMode:!1,addDatasetMinimize:!1,dashEditMode:!1,snackbarOpen:!1,snackbarMessage:null,snackbarType:"",sharingLoading:!1,renamingLoading:!1,deletingLoading:!1,newlyAddedDatasetNameExists:!1,newlyAddedDashNameExists:!1,addFlowLoading:!1,rowsPerPage:16,page:0,searchTerm:"",flowsFilter:"all",renderAsList:!1,tableSortAsc:!0,tableSortProperty:"",toggleFilterDisplay:!1,clickedBox:"",dash_rowsPerPage:16,dash_page:0,dash_searchTerm:"",dash_flowsFilter:"all",dash_renderAsList:!1,dash_tableSortAsc:!0,dash_tableSortProperty:"",dash_toggleFilterDisplay:!1,dash_clickedBox:"",importFlowDialogState:!1,importFlowNameExists:!1,cloneFlowDialogState:!1,cloneFlowId:"",cloneFlowName:"",cloneFlowNameError:!1,cloneFlowNameErrorMsg:"",cloneProcess:!1,sessionCreated:!1,sessionID:"",showContent:!1,loadingTxt:""},e.onRequestSort=function(t,a){e.setState({tableSortAsc:!e.state.tableSortAsc,tableSortProperty:a})},e.handleChangeSearchTerm=function(t){e.setState({searchTerm:t.target.value})},e.handleRenderAsList=function(){e.setState({renderAsList:!0})},e.handleRenderAsGrid=function(){e.setState({renderAsList:!1})},e.handleChangePage=function(t,a){e.setPage(a)},e.handleChangeRowsPerPage=function(t){e.setRowsPerPage(parseInt(t.target.value,10)),e.setPage(0)},e.setPage=function(t){e.setState({page:t})},e.setRowsPerPage=function(t){e.setState({rowsPerPage:t})},e.handleToggleFilter=function(){!0===e.state.toggleFilterDisplay?e.setState({toggleFilterDisplay:!1}):e.setState({toggleFilterDisplay:!0})},e.sortDashboards=function(t){return""!==e.state.tableSortProperty?e.sortOn(t,e.state.tableSortProperty):t},e.sortOn=function(t,a){return t.sort((function(t,n){return n[a]<t[a]?e.state.tableSortAsc?1:-1:n[a]>t[a]?e.state.tableSortAsc?-1:1:0}))},e.filterDashboards=function(t){return""!==e.state.searchTerm&&(t=t.filter((function(t){return t.name.toLowerCase().indexOf(e.state.searchTerm.toLowerCase())>-1}))),t},e.viewTypeSwitchButtons=function(){return[r.a.createElement(At.a,{key:1,color:e.state.renderAsList?"primary":"default",onClick:function(){return e.handleRenderAsList()}},r.a.createElement(Qd.a,null)),r.a.createElement(At.a,{key:2,color:e.state.renderAsList?"default":"primary",onClick:function(){return e.handleRenderAsGrid()}},r.a.createElement(Xd.a,null))]},e.getDashboardsFilters=function(t){if(t)return r.a.createElement("div",{className:"filters-and-pagination"},r.a.createElement("div",{className:"table-filters"},r.a.createElement(Na,{_label:"",_placeholder:"Search...",_type:"text",_autoComplete:"new-password",_value:e.state.searchTerm,_size:"small",_margin:"none",_filterType:!0,_onChange:function(t){return e.handleChangeSearchTerm(t)},_startIcon:{_icon:r.a.createElement(tl.a,{fontSize:"small"})}}),r.a.createElement(np,{_variant:"contained",_size:"small",_color:"secondary",_buttons:e.viewTypeSwitchButtons()})),r.a.createElement("div",{className:"table-pagination"},r.a.createElement(qd.a,{component:"div",className:"flows-pagination",labelRowsPerPage:"Dashboards per page",rowsPerPageOptions:[8,16,32],colSpan:3,count:t.length,rowsPerPage:e.state.rowsPerPage,page:e.state.page,SelectProps:{inputProps:{"aria-label":"Dashboards per page"}},onChangePage:e.handleChangePage,onChangeRowsPerPage:e.handleChangeRowsPerPage,ActionsComponent:pp.a})))},e.handleSnackbarClose=function(){e.setState({snackbarOpen:!1})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"onNewDatasetItemClick",value:function(){this.setState({addDatasetDialogState:!0,datasetEditMode:!1})}},{key:"getDashboards",value:function(e){var t,a,s=this,o=[],i=[];return this.props.dashboards&&(o=this.props.dashboards,t=(o=this.sortDashboards(this.filterDashboards(o))).slice(this.state.page*this.state.rowsPerPage,this.state.page*this.state.rowsPerPage+this.state.rowsPerPage),o.forEach((function(e,t){a=s.props.uploadProgress.filter((function(t){return"complete"!==t.status&&e.dataset_id===t.datasetId})),Object.keys(a).length>0&&(i[e.dataset_id]=e.dataset_id)}))),o&&0===o.length?r.a.createElement(n.Fragment,null,this.getDashboardsFilters(o),r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(Pt.a,{display:"flex",alignItems:"center",className:"no-results"},r.a.createElement(Gd.a,{className:"no-results-icon"}),r.a.createElement("span",{className:"no-results-txt"},"No dashboards found")))):r.a.createElement(n.Fragment,null,this.getDashboardsFilters(o),this.state.renderAsList?r.a.createElement(Ri.a,{item:!0,xs:12,className:"i-pb-0"},r.a.createElement(Eu.a,{className:"cardbox has-table tableHolder"},r.a.createElement(Id.a,{className:"content table-inside"},r.a.createElement(Hl,{_type:"Dashboard",_link:"/dash/",_header:[{key:"name",name:"Dashboard"},{key:"dashboard_id",name:"ID"}],_data:t,_functions:[{edit:function(e){return s.handleDashEdit(e)}},{delete:function(e){return s.handleDashboardDelete(e)}},{browse:function(e){return s.props.subpageClick("/dash/".concat(e))}}]})))):r.a.createElement(up,{_type:"Dashboard",_link:"/dash/",_icon:r.a.createElement(jp.a,null),_data:t,_uploadInfo:a,_functions:[{edit:function(e){return s.handleDashEdit(e)}},{delete:function(e){return s.handleDashboardDelete(e)}},{browse:function(e){return s.props.subpageClick("/dash/".concat(e))}}]}),o.length>this.state.rowsPerPage&&r.a.createElement(qd.a,{component:"div",className:"pagination-sm",labelRowsPerPage:"Datasets per page",rowsPerPageOptions:[8,16,32],colSpan:3,count:o.length,rowsPerPage:this.state.rowsPerPage,page:this.state.page,SelectProps:{inputProps:{"aria-label":"Datasets per page"}},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage,ActionsComponent:pp.a}))}},{key:"render",value:function(){var e=this,t=[];this.props.dashboards&&(t=this.props.dashboards);var a=this.props.projects.filter((function(t){return t.project_id===e.props.projectId}))[0],s=!1;return this.props.datasets&&this.props.datasets.length>0&&(s=!0),r.a.createElement(n.Fragment,null,r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"under-tab-buttons"},r.a.createElement(ua,{_disabled:!s,_variant:"contained",_color:"primary",_label:"Upload New Dashboard",_type:"button",_fullWidth:!1,_loading:!1,_startIcon:r.a.createElement("i",{className:"zmdi zmdi-cloud-upload zmdi-hc-fw"}),_onClick:function(){return e.onDashboardItemClick()}})),r.a.createElement("div",{className:"cardbox-holder"},this.getDashboards(t)),r.a.createElement(Np,{projectId:this.props.projectId,projectName:a?a.name:"",isEdit:this.state.dashEditMode,open:this.state.addDashboardtDialogState||"pending"===this.props.dashUploadStatus,name:this.state.selectedDashData?this.state.selectedDashData.name:"",datasetIds:this.state.selectedDashData?this.state.selectedDashData.dataset_id:[],dashboardId:this.state.selectedDashData?this.state.selectedDashData.dashboard_id:"",datasets:this.handleDatasetsForDash(),dashUploadStatus:this.props.dashUploadStatus,handleDialogClose:function(){return e.handleAddDashboardDialogClose()},handleSubmit:function(t,a,n,r){return e.handleAddDashDailogSubmit(n,t,a,r)},handleSubmitOverwrite:function(t,a,n){return e.handleAddDashDialogSubmitOverwrite(t,a,n)},handleCancel:function(){return e.handleAddDashboardDialogClose()},newDashboardNameExists:this.state.newlyAddedDashNameExists,dismissAlert:function(){return e.handleDismissDashNameExists()}}),r.a.createElement(Cp,{dashboardId:this.state.selectedDashData?this.state.selectedDashData.dashboard_id:"",dashboardName:this.state.selectedDashData?this.state.selectedDashData.name:"",open:this.state.editDashboardDialogState,handleDialogClose:function(){return e.handleEditDashboardDialogClose()},handleSubmit:function(){return e.handleEditDashboardDialogSubmit()},handleCancel:function(){return e.handleEditDashboardDialogClose()}}),r.a.createElement(Hu,{snackbarOpen:this.state.snackbarOpen,snackbarType:this.state.snackbarType,snackbarMsg:this.state.snackbarMessage,onSnackbarClose:this.handleSnackbarClose})))}},{key:"handleDismissDashNameExists",value:function(){this.setState({newlyAddedDashNameExists:!1})}},{key:"handleAddDashDailogSubmit",value:function(e,t,a,s){var o=this,i=!1;this.props.dashboards.filter((function(e){return e.project_id===o.props.projectId})).map((function(e){return e.name===t&&e.project_id===o.props.projectId&&(i=!0),""})),!1!==i?this.setState({newlyAddedDashNameExists:!0}):(this.state.dashEditMode?(this.props.editDashboard(this.props.projectId,e,t,s,a),this.setState({snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"You have succesfully edited dashboard: "),r.a.createElement("div",{className:"val"},t)),snackbarType:"success",snackbarOpen:!0})):(this.props.createDashboard(this.props.projectId,e,t,a),this.setState({snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"You have succesfully uploaded new dashboard."),r.a.createElement("div",{className:"val"},t)),snackbarType:"success",addDashboardtDialogState:!1,snackbarOpen:!0})),this.handleAddDashboardDialogClose())}},{key:"handleAddDashDialogSubmitOverwrite",value:function(e,t,a){var s=this,o="";this.props.dashboards.filter((function(e){return e.project_id===s.props.projectId})).map((function(t){return t.name===e&&t.project_id===s.props.projectId&&(o=t.dashboard_id),""})),""!==o&&(this.props.editDashboard(this.props.projectId,a,e,o,t),this.setState({newlyAddedDashNameExists:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"You have succesfully updated dashboard: "),r.a.createElement("div",{className:"val"},e)),snackbarType:"success",snackbarOpen:!0}),this.handleAddDashboardDialogClose())}},{key:"handleAddDashboardDialogClose",value:function(){this.setState({addDashboardtDialogState:!1})}},{key:"handleDatasetsForDash",value:function(){var e=this;return this.props.datasets&&this.props.datasets.length>0?this.props.datasets.filter((function(t){return t.project_id===e.props.projectId})):null}},{key:"onDashboardItemClick",value:function(){this.setState({addDashboardtDialogState:!0,dashEditMode:!1})}},{key:"handleDashEdit",value:function(e){this.setState({addDashboardtDialogState:!0,selectedDashData:e,dashEditMode:!0})}},{key:"handleEditDashboardDialogClose",value:function(){this.setState({addDashboardtDialogState:!1})}},{key:"handleEditDashboardDialogSubmit",value:function(){this.handleEditDashboardDialogClose()}},{key:"handleDashboardBrowse",value:function(e){var t="/dash/".concat(e.dashboard_id);this.props.subpageClick(t)}},{key:"handleDashboardDelete",value:function(e){this.props.deleteDashboard(e.dashboard_id),this.setState({snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"You have succesfully deleted dashboard: "),r.a.createElement("div",{className:"val"},e.dashboard_id)),snackbarType:"success",snackbarOpen:!0})}}]),a}(n.Component),Ip=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).subpageClicked=!1,e.state={sort:"all",deletePipeline:null,deleteDialogState:!1,deletePipelineName:"",deletePipelineID:"",newFlowDialogState:!1,newFlowName:"",newFlowNameError:!1,newFlowNameErrorMsg:"",projectId:"",projectNameEditMode:!1,title:"",projectDeleteDialogState:!1,projectShareDialogState:!1,projectShareDialogErrorState:!1,projectShareDialogErrorMsg:"",snackbarShareProSuccessState:!1,editProjectDialogState:!1,addDatasetDialogState:!1,addDashboardtDialogState:!1,deleteDatasetDialogState:!1,uploadDatasetDialogState:!1,editDatasetDialogState:!1,editDashboardDialogState:!1,duplicateDialogProjectState:!1,tabValue:0,datasetEditMode:!1,addDatasetMinimize:!1,dashEditMode:!1,snackbarOpen:!1,snackbarMessage:null,snackbarType:"",sharingLoading:!1,renamingLoading:!1,deletingLoading:!1,newlyAddedDatasetNameExists:!1,newlyAddedDashNameExists:!1,addFlowLoading:!1,rowsPerPage:16,page:0,searchTerm:"",flowsFilter:"all",renderAsList:!1,tableSortAsc:!0,tableSortProperty:"",toggleFilterDisplay:!1,clickedBox:"",importFlowDialogState:!1,importFlowNameExists:!1,cloneFlowDialogState:!1,cloneFlowId:"",cloneFlowName:"",cloneFlowNameError:!1,cloneFlowNameErrorMsg:"",cloneProcess:!1,sessionCreated:!1,sessionID:"",showContent:!1,loadingTxt:""},e.handleDialogkOpen=function(t){e.setState({deleteDialogState:!0,deletePipeline:t,deletePipelineName:t.name,deletePipelineID:t.pipeline_id})},e.handleOnClone=function(t,a){e.setState({cloneFlowDialogState:!0,cloneFlowId:t,cloneFlowName:a})},e.handleDialogClose=function(){e.setState({deleteDialogState:!1,deletePipeline:null,deletePipelineName:"",deletePipelineID:"",projectShareDialogState:!1,projectShareDialogErrorState:!1,projectShareDialogErrorMsg:""})},e.handleToggleFilter=function(){!0===e.state.toggleFilterDisplay?e.setState({toggleFilterDisplay:!1}):e.setState({toggleFilterDisplay:!0})},e.handleDuplicateProjectDialogSubmit=function(t,a,s){var o=e.props.data.projects.filter((function(e){return e.name===a}));Object.keys(o).length>0?setTimeout((function(){e.setState({duplicateDialogProjectState:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Project with same name already exists. Please choose different name")),snackbarType:"error",snackbarOpen:!0})}),1500):(e.props.duplicateProject(e.state.projectId,a,s),setTimeout((function(){e.setState({duplicateDialogProjectState:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"You have succesfully cloned project")),snackbarType:"success",snackbarOpen:!0})}),1500)),e.handleDuplicateProjectDialogClose()},e.handleCloseShareSuccesSnackbar=function(){e.setState({snackbarShareProSuccessState:!1})},e.handleSnackbarClose=function(){e.setState({snackbarOpen:!1})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({loadingTxt:"Creating Project Session..."});var t=this.props.match.params.id,a="";this.props.history.action&&(a=this.props.history.action),t&&""!==t?"schedule"===this.props.activePageType||"pipeline"===this.props.activePageType||"dataset"===this.props.activePageType||"dash"===this.props.activePageType?("pipeline"===this.props.activePageType?this.setState({projectId:t,tabValue:0}):"dataset"===this.props.activePageType?this.setState({projectId:t,tabValue:1}):"dash"===this.props.activePageType?this.setState({projectId:t,tabValue:2}):this.setState({projectId:t,tabValue:0}),this.props.getFlows(t),this.props.getDatasets(t),this.props.getDashboards(t),this.setState({sessionCreated:!0,loadingTxt:"Preparing Project View..."}),setTimeout((function(){e.setState({showContent:!0})}),2e3)):(this.setState({projectId:t,tabValue:0}),"POP"!==a?Ei(t).then((function(a){e.props.getFlows(t),e.props.getDatasets(t),e.props.getDashboards(t),e.setState({sessionCreated:!0,loadingTxt:"Preparing Project View..."}),e.props.fillSessions(a,t),setTimeout((function(){e.setState({showContent:!0})}),2e3)})).catch((function(t){e.setState({snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Redirecting to Projects...")),snackbarType:"error",snackbarOpen:!0}),setTimeout((function(){e.props.history.push("/dashboard/projects")}),3e3)})):(this.props.getFlows(t),this.props.getDatasets(t),this.props.getDashboards(t),this.setState({sessionCreated:!0,loadingTxt:"Preparing Project View..."}),setTimeout((function(){e.setState({showContent:!0})}),2e3))):this.props.history.push("/dashboard")}},{key:"componentWillUnmount",value:function(){var e=this,t=!1;if(this.props.history.location.pathname){var a=this.props.history.location.pathname.split("/");a[a.length-1];"project-schedules"===a[2]&&(t=!0)}var n="";this.props.history.action&&(n=this.props.history.action),"POP"===n||t||(this.subpageClicked?0===this.state.tabValue?this.props.fireReturnToProject("pipeline"):1===this.state.tabValue?this.props.fireReturnToProject("dataset"):2===this.state.tabValue?this.props.fireReturnToProject("dash"):this.props.fireReturnToProject("pipeline"):(this.props.fireReturnToProject(""),this.setState({sessionCreated:!1}),Si(this.state.projectId).then((function(t){e.props.cleanSession()})).catch((function(t){e.props.cleanSession()}))))}},{key:"showStatus",value:function(e,t){this.setState({snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},t)),snackbarType:e,snackbarOpen:!0})}},{key:"toggleProjectNameEditMode",value:function(e){this.state.projectNameEditMode?(this.setState({projectNameEditMode:!1}),this.props.renameProject(this.state.projectId,this.state.title)):this.setState({projectNameEditMode:!0,title:e})}},{key:"logoutHandler",value:function(){this.props.logout()}},{key:"onChangeTitle",value:function(e){this.setState({title:e.target.value})}},{key:"onChangeTabs",value:function(e,t){this.setState({tabValue:t})}},{key:"onEditClick",value:function(e){var t="/flow/".concat(e);this.handleSubpageClick(t)}},{key:"handleDismissDatasetNameExists",value:function(){this.setState({newlyAddedDatasetNameExists:!1})}},{key:"handleDismissDashNameExists",value:function(){this.setState({newlyAddedDashNameExists:!1})}},{key:"handleSubpageClick",value:function(e){this.subpageClicked=!0,this.props.history.push(e)}},{key:"render",value:function(){var e,t,a,s,o,i=this;return this.state.sessionCreated&&this.props.data.flowsLoaded&&this.props.data.datasetsLoaded&&this.props.data.dashboardsLoaded&&(e=this.state.projectId,t=this.props.data.flows[e],this.state.selectedDatasetData?this.state.selectedDatasetData.dataset_id:"",this.state.selectedDashData?this.state.selectedDashData.dashboard_id:"",this.state.selectedDashData?this.state.selectedDashData.name:"",this.state.selectedDatasetData?this.state.selectedDatasetData.name:"",a=this.props.data.projects.filter((function(t){return t.project_id===e}))[0],s=this.props.data.datasets.filter((function(t){return t.project_id===e})),o=this.props.data.dashboards.filter((function(t){return t.project_id===e})),(this.props.data.projects.length>0&&!a&&""!==e||this.props.data.projectsLoaded&&0===this.props.data.projects.length)&&this.props.history.push("/dashboard"),this.props.data.flowsLoaded,this.props.data.datasetsLoaded,this.props.data.dashboardsLoaded),r.a.createElement(n.Fragment,null,r.a.createElement(Pd.a,{className:"main-container",component:"main",maxWidth:!1},r.a.createElement(Ri.a,{container:!0},r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(hl,{loadingTxt:this.state.loadingTxt,fadeOut:this.state.showContent,placement:"next-to-nav",history:this.props.history,backLink:"/dashboard"}),r.a.createElement(Ud,{_breadcrumbLink:"/dashboard",_breadcrumbText:"Home / Projects",_breadcrumbBackIcon:!0,_breadcrumbTitle:a?a.name:"",_actionButtons:r.a.createElement(fp,{onEdit:function(){i.setState({editProjectDialogState:!0})},onDelete:function(){i.setState({projectDeleteDialogState:!0})},onShare:function(){i.setState({projectShareDialogState:!0})},onDuplicate:function(){i.setState({duplicateDialogProjectState:!0})}})}))),r.a.createElement(Ri.a,{container:!0,className:"tab-container flow-tab-container"},r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(Gt.a,{value:this.state.tabValue,classes:{indicator:"flow-tab-indicator"},onChange:this.onChangeTabs.bind(this)},r.a.createElement(Kt.a,{label:"Flows"}),r.a.createElement(Kt.a,{label:"Datasets"}),r.a.createElement(Kt.a,{label:"Dashboards"})))),r.a.createElement("div",{hidden:0!==this.state.tabValue},r.a.createElement(Ep,{flows:t,subpageClick:function(e){return i.handleSubpageClick(e)},addFlow:function(e){return i.props.addFlow(e)},deleteFlow:function(e){return i.props.deleteFlow(e)},creatingFlow:this.props.data.creatingFlow,projects:this.props.data.projects,projectId:this.state.projectId})),r.a.createElement("div",{hidden:1!==this.state.tabValue},r.a.createElement(wp,{datasets:s,subpageClick:function(e){return i.handleSubpageClick(e)},createDataset:function(e,t,a){return i.props.createDataset(e,t,a)},editDataset:function(e,t,a,n){return i.props.editDataset(e,t,a,n)},deleteDataset:function(e){return i.props.deleteDataset(e)},uploadProgress:this.props.uploadProgress,uploadStatus:this.props.data.uploadStatus,projects:this.props.data.projects,projectId:this.state.projectId})),r.a.createElement("div",{hidden:2!==this.state.tabValue},r.a.createElement(Pp,{dashboards:o,datasets:s,subpageClick:function(e){return i.handleSubpageClick(e)},createDashboard:function(e,t,a,n){return i.props.createDashboard(e,t,a,n)},editDashboard:function(e,t,a,n,r){return i.props.editDashboard(e,t,a,n,r)},deleteDashboard:function(e){return i.props.deleteDashboard(e)},uploadProgress:this.props.uploadProgress,dashUploadStatus:this.props.data.dashUploadStatus,projects:this.props.data.projects,projectId:this.state.projectId}))),r.a.createElement(Xl,{projectId:this.state.projectId,projectName:a?a.name:"",handleDialogClose:function(){return i.handleDeleteDialogCancel()},handleDeleteDialogSubmit:function(){return i.handleDeleteDialogSubmit()},handleDeleteDialogCancel:function(){return i.handleDeleteDialogCancel()},open:this.state.projectDeleteDialogState,deleteSubmitLoading:this.state.deletingLoading}),r.a.createElement($l,{handleDialogClose:function(){return i.handleShareDialogCancel()},handleShareDialogCancel:function(){return i.handleShareDialogCancel()},open:this.state.projectShareDialogState,projectId:this.state.projectId,projectName:a?a.name:"",projectShareDialogErrorState:this.state.projectShareDialogErrorState,projectShareDialogErrorMsg:this.state.projectShareDialogErrorMsg,onSubmit:function(e){return i.handleShareDialogSubmit(e)},shareSubmitLoading:this.state.sharingLoading}),r.a.createElement(ec,{handleDialogClose:function(){return i.handleEditProjectDialogClose()},handleEditCancel:function(){return i.handleEditProjectDialogClose()},onSubmit:function(e){return i.handleEditProjectDialogSubmit(e)},open:this.state.editProjectDialogState,projectName:a?a.name:"",projectID:this.state.projectId,renameSubmitLoading:this.state.renamingLoading}),r.a.createElement(cc,{projectName:a?a.name:"",projectID:this.state.projectId,open:this.state.duplicateDialogProjectState,onSubmit:function(e,t,a){return i.handleDuplicateProjectDialogSubmit(e,t,a)},handleDialogClose:function(){i.handleDuplicateProjectDialogClose()}}),r.a.createElement(Hu,{snackbarOpen:this.state.snackbarOpen,snackbarType:this.state.snackbarType,snackbarMsg:this.state.snackbarMessage,onSnackbarClose:this.handleSnackbarClose}))}},{key:"handleDuplicateProjectDialogClose",value:function(){this.setState({duplicateDialogProjectState:!1})}},{key:"handleEditProjectDialogClose",value:function(){this.setState({editProjectDialogState:!1})}},{key:"handleEditProjectDialogSubmit",value:function(e){var t=this;this.setState({renamingLoading:!0}),this.props.renameProject(this.state.projectId,e),setTimeout((function(){t.setState({editProjectDialogState:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"You have succesfully renamed project"),r.a.createElement("div",{className:"val"},e)),snackbarType:"success",snackbarOpen:!0,renamingLoading:!1})}),1500)}},{key:"handleShareDialogCancel",value:function(){this.setState({projectShareDialogState:!1,projectShareDialogErrorState:!1,projectShareDialogErrorMsg:""})}},{key:"handleShareDialogSubmit",value:function(e){var t=this;this.setState({sharingLoading:!0});var a=this.props.data.projects.filter((function(e){return e.project_id===t.state.projectId}))[0];try{Qo(this.state.projectId,e).then((function(s){200===s.status?setTimeout((function(){t.setState({projectShareDialogState:!1,projectShareDialogErrorState:!1,projectShareDialogErrorMsg:"",snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"You have succesfully shared project"," ",r.a.createElement("span",{className:"val"},a?a.name:"")),r.a.createElement("div",null,"with user ",r.a.createElement("span",{className:"val"},e))),snackbarType:"success",snackbarOpen:!0,sharingLoading:!1})}),1500):t.setState({projectShareDialogErrorState:!0,projectShareDialogErrorMsg:"Sharing failed! Check user email and try again.",sharingLoading:!1})})).catch((function(e){t.setState({projectShareDialogErrorState:!0,projectShareDialogErrorMsg:"Sharing failed! Check user email and try again.",sharingLoading:!1})}))}catch(s){this.setState({projectShareDialogState:!1,projectShareDialogErrorState:!1,projectShareDialogErrorMsg:"",snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Sharing failed. Something went wrong. Please try again")),snackbarType:"error",snackbarOpen:!0,sharingLoading:!1})}}},{key:"handleDeleteDialogSubmit",value:function(){var e=this;this.setState({deletingLoading:!0});var t=this.props.data.projects.filter((function(t){return t.project_id===e.state.projectId}))[0];this.setState({snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Deleting project ..."),r.a.createElement("div",{className:"val"},t?t.name:"")),snackbarType:"processing",snackbarOpen:!0}),setTimeout((function(){e.props.deleteProject(e.state.projectId),e.setState({projectDeleteDialogState:!1,deletingLoading:!1})}),2e3)}},{key:"handleDeleteDialogCancel",value:function(){this.setState({projectDeleteDialogState:!1})}},{key:"onDelete",value:function(e){this.props.deleteFlow(e),this.setState({deleteDialogState:!1,deletePipeline:"",snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"You have succesfully deleted pipeline"),r.a.createElement("div",{className:"val"},this.state.deletePipelineName)),snackbarType:"success",snackbarOpen:!0})}}]),a}(n.Component),xp=Object(d.c)((function(e){return{data:e.flowReducerState,email:e.userReducerState.email,metabaseLoginId:e.flowReducerState.metabaseLoginId,activePageType:e.flowReducerState.activePageType,uploadProgress:e.flowReducerState.uploadProgress}}),(function(e){return{addFlow:function(t){return e(function(e){return{type:k,payload:e}}(t))},deleteFlow:function(t){return e(function(e){return{type:D,payload:e}}(t))},getFlows:function(t){return e(function(e){return{type:P,payload:e}}(t))},logout:function(){return e(qe())},renameProject:function(t,a){return e(at(t,a))},deleteProject:function(t){return e(tt(t))},getDatasets:function(t){return e(ot(t))},getDashboards:function(t){return e(lt(t))},createDataset:function(t,a,n){return e(ct(t,a,n))},createDashboard:function(t,a,n,r){return e(function(e,t,a,n){return{type:Te,payload:{name:a,project_id:e,dataset_id:t,file:n}}}(t,a,n,r))},editDataset:function(t,a,n,r){return e(gt(t,a,n,r))},editDashboard:function(t,a,n,r,s){return e(function(e,t,a,n,r){return{type:xe,payload:{project_id:e,dataset_id:t,name:a,dashboard_id:n,file:r}}}(t,a,n,r,s))},uploadDashboard:function(t,a){return e(function(e,t){return{type:Le,payload:{dashboardId:t,file:e}}}(a,t))},deleteDataset:function(t){return e(mt(t))},deleteDashboard:function(t){return e(function(e){return{type:ze,payload:e}}(t))},enterSession:function(t){e(Et(t))},fireReturnToProject:function(t){e(yt(t))},cleanSession:function(){e(wt())},fillSessions:function(t,a){e(kt(t,a))},duplicateProject:function(t,a,n){e(et(t,a,n))}}}))(Ip),Fp=a(1164),Tp=a(1144),Ap=a(1155),Lp=a(1145),Mp=a(279),zp=a(563),Rp=a.n(zp);function Vp(e){var t=e.handleDialogClose,a=e.open,s=e.newScheduleDialogErrorMsg,o=e.onSubmit,i=e.newScheduleSubmitLoading,l=e.appData,c=r.a.useState(0),u=Object(Ht.a)(c,2),d=u[0],p=u[1],m=r.a.useState(""),h=Object(Ht.a)(m,2),f=h[0],g=h[1],b=r.a.useState(""),v=Object(Ht.a)(b,2),_=v[0],E=v[1],S=r.a.useState(""),y=Object(Ht.a)(S,2),w=(y[0],y[1],r.a.useState("")),k=Object(Ht.a)(w,2),j=(k[0],k[1],r.a.useState([])),D=Object(Ht.a)(j,2),O=(D[0],D[1],r.a.useState("")),N=Object(Ht.a)(O,2),C=N[0],P=N[1],I=r.a.useState(""),x=Object(Ht.a)(I,2),F=x[0],T=x[1],A=r.a.useState("once"),L=Object(Ht.a)(A,2),M=L[0],z=L[1],R=r.a.useState({type:"once",enabled:!0,startDate:wa()(),startTime:wa()(),endDate:wa()(),recur:!1,days:0,weeks:0,weekDays:[],cron:""}),V=Object(Ht.a)(R,2),U=V[0],W=V[1],B=r.a.useState(1),Y=Object(Ht.a)(B,2),q=Y[0],H=Y[1],G=r.a.useState(""),K=Object(Ht.a)(G,2),Q=K[0],J=(K[1],r.a.useState(1)),X=Object(Ht.a)(J,2),Z=X[0],$=X[1],ee=r.a.useState(""),te=Object(Ht.a)(ee,2),ae=te[0],ne=(te[1],["What would you like to Schedule?","Which subject would you like to run","Set time frame of execution","Enter Schedule Name and Description"]),re=function(){var e=[];return Object.keys(l).forEach((function(t){var a=[];if(l[t].pipelines){a=l[t].pipelines;var n=l[t].project.name;Object.keys(a).forEach((function(t){var r=a[t].pipeline_id,s=a[t].name,o={projectName:n,pipelineId:r,pipelineName:s};e.push(o)}))}})),e}(),se=r.a.useState([{day:"Monday",value:!1,shortForm:"mon"},{day:"Tuesday",value:!1,shortForm:"tue"},{day:"Wednesday",value:!1,shortForm:"wed"},{day:"Thursday",value:!1,shortForm:"thu"},{day:"Friday",value:!1,shortForm:"fri"},{day:"Saturday",value:!1,shortForm:"sat"},{day:"Sunday",value:!1,shortForm:"sun"}]),oe=Object(Ht.a)(se,2),ie=oe[0],le=(oe[1],r.a.useState("")),ce=Object(Ht.a)(le,2),ue=(ce[0],ce[1],function(e){g(e.target.value)}),de=function(e){var t=e.target.value;H(e.target.value),W({type:U.type,enabled:U.enabled,startDate:U.startDate,startTime:U.startTime,endDate:U.endDate,recur:U.recur,days:t,weeks:U.weeks,weekDays:U.weekDays,cron:U.cron})},pe=function(e){var t=e.target.value;$(e.target.value),W({type:U.type,enabled:U.enabled,startDate:U.startDate,startTime:U.startTime,endDate:U.endDate,recur:U.recur,days:U.days,weeks:t,weekDays:U.weekDays,cron:U.cron})},me=function(e){P(null!==e&&void 0!==e&&""!==e?e:"")},he=function(e){var t=e.target.value;z(t),W({type:t,enabled:!0,startDate:wa()(),startTime:wa()(),endDate:wa()(),recur:!1,days:0,weeks:0,weekDays:[],cron:""})},fe=function(e){var t=e.target.value;ie.forEach((function(e){e.shortForm===t&&(e.value?e.value=!1:e.value=!0)}));var a;a=ie.filter((function(e){return e.value})).map((function(e){return e.shortForm})),W({type:U.type,enabled:U.enabled,startDate:U.startDate,startTime:U.startTime,endDate:U.endDate,recur:U.recur,days:U.days,weeks:U.weeks,weekDays:a,cron:U.cron})},ge=function(){g(""),E(""),P(""),T(""),t()};return r.a.createElement(Wa,{_open:a,_onEnter:function(){},_onClose:function(){return ge()},_onExit:function(){return ge()},_type:"share",_icon:!1,_title:"New Schedule",_subtitle:"Step "+(d+1)+" / 4",_size:"xs",_align:"left",_content:r.a.createElement(r.a.Fragment,null,r.a.createElement(Fp.a,{activeStep:d,orientation:"vertical",className:"newSchedule"},ne.map((function(e,t){return r.a.createElement(Tp.a,{key:e},r.a.createElement(Ap.a,null,e),r.a.createElement(Lp.a,null,r.a.createElement("div",null,function(e){switch(e){case 0:return r.a.createElement("div",{className:"subject-cardbox-wrap"},r.a.createElement("div",{className:"subject-cardbox active"},r.a.createElement("div",{className:"subject-cardbox-icon"},r.a.createElement(_p.a,null)),r.a.createElement("div",{className:"subject-cardbox-title"},"Flow")),r.a.createElement("div",{className:"subject-cardbox disabled"},r.a.createElement("div",{className:"subject-cardbox-icon"},r.a.createElement(Rp.a,null)),r.a.createElement("div",{className:"subject-cardbox-title"},"Connector")));case 1:return r.a.createElement(Ga,{_label:"Subject",_placeholder:"Select Subject...",_value:C,_isMultiple:!1,_selectOptions:re,_fullWidth:!0,_groupByValue:"projectName",_keyValue:"pipelineId",_nameValue:"pipelineName",_onChange:function(e,t){return me(t)},_error:F});case 2:return r.a.createElement(r.a.Fragment,null,r.a.createElement(ga.a,{className:"radio-btn-holder with-label horizontal",component:"fieldset",margin:"normal"},r.a.createElement(pc.a,{"aria-label":"schedule-time",name:"schedule-time",value:M,onChange:he},r.a.createElement(Yi.a,{value:"once",key:"once",control:r.a.createElement(qi.a,{color:"primary",size:"small"}),label:"Once"}),r.a.createElement(Yi.a,{value:"daily",key:"daily",control:r.a.createElement(qi.a,{color:"primary",size:"small"}),label:"Daily"}),r.a.createElement(Yi.a,{value:"weekly",key:"weekly",control:r.a.createElement(qi.a,{color:"primary",size:"small"}),label:"Weekly"}))),r.a.createElement("div",{className:"time-controls-holder"},"once"===M&&r.a.createElement("div",{className:"time-controls once"},r.a.createElement(Ui.b,{utils:Mp.a},r.a.createElement(ga.a,null,r.a.createElement(Ui.a,{value:U.startDate,onChange:function(e){W({type:U.type,enabled:U.enabled,startDate:e,startTime:U.startTime,endDate:e,recur:U.recur,days:U.days,weeks:U.weeks,weekDays:U.weekDays,cron:U.cron})},disabled:!1,variant:"outlined",label:"Date",InputLabelProps:{shrink:!0}})),r.a.createElement(ga.a,null,r.a.createElement(Ui.c,{value:U.startTime,onChange:function(e){W({type:U.type,enabled:U.enabled,startDate:U.startDate,startTime:e,endDate:U.endDate,recur:U.recur,days:U.days,weeks:U.weeks,weekDays:U.weekDays,cron:U.cron})},disabled:!1,variant:"outlined",label:"Time",InputLabelProps:{shrink:!0}})))),"daily"===M&&r.a.createElement(Ui.b,{utils:Mp.a},r.a.createElement("div",{className:"time-controls once"},r.a.createElement(ga.a,null,r.a.createElement(Ui.a,{value:U.startDate,onChange:function(e){W({type:U.type,enabled:U.enabled,startDate:e,startTime:U.startTime,endDate:U.endDate,recur:U.recur,days:U.days,weeks:U.weeks,weekDays:U.weekDays,cron:U.cron})},disabled:!1,variant:"outlined",label:"Start Date",InputLabelProps:{shrink:!0}})),r.a.createElement(ga.a,null,r.a.createElement(Ui.a,{value:U.endDate,onChange:function(e){W({type:U.type,enabled:U.enabled,startDate:U.startDate,startTime:U.startTime,endDate:e,recur:U.recur,days:U.days,weeks:U.weeks,weekDays:U.weekDays,cron:U.cron})},disabled:!1,variant:"outlined",label:"End Date",InputLabelProps:{shrink:!0}}))),r.a.createElement("div",{className:"time-controls once"},r.a.createElement(ga.a,{className:"time-control"},r.a.createElement(Ui.c,{value:U.startTime,onChange:function(e){W({type:U.type,enabled:U.enabled,startDate:U.startDate,startTime:e,endDate:U.endDate,recur:U.recur,days:U.days,weeks:U.weeks,weekDays:U.weekDays,cron:U.cron})},disabled:!1,variant:"outlined",label:"Time",InputLabelProps:{shrink:!0}})),r.a.createElement(Na,{_label:"Recur every X days",_placeholder:"",_type:"number",_autoComplete:"new-password",_value:q>0?q:1,_onChange:de,_autoFocus:!1,_fullWidth:!0,_error:Q}))),"weekly"===M&&r.a.createElement(Ui.b,{utils:Mp.a},r.a.createElement("div",{className:"time-controls once"},r.a.createElement(ga.a,null,r.a.createElement(Ui.a,{value:U.startDate,onChange:function(e){W({type:U.type,enabled:U.enabled,startDate:e,startTime:U.startTime,endDate:U.endDate,recur:U.recur,days:U.days,weeks:U.weeks,weekDays:U.weekDays,cron:U.cron})},disabled:!1,variant:"outlined",label:"Start Date",InputLabelProps:{shrink:!0}})),r.a.createElement(ga.a,null,r.a.createElement(Ui.a,{value:U.endDate,onChange:function(e){W({type:U.type,enabled:U.enabled,startDate:U.startDate,startTime:U.startTime,endDate:e,recur:U.recur,days:U.days,weeks:U.weeks,weekDays:U.weekDays,cron:U.cron})},disabled:!1,variant:"outlined",label:"End Date",InputLabelProps:{shrink:!0}}))),r.a.createElement("div",{className:"time-controls once"},r.a.createElement(ga.a,{className:"time-control"},r.a.createElement(Ui.c,{value:U.startTime,onChange:function(e){W({type:U.type,enabled:U.enabled,startDate:U.startDate,startTime:e,endDate:U.endDate,recur:U.recur,days:U.days,weeks:U.weeks,weekDays:U.weekDays,cron:U.cron})},disabled:!1,variant:"outlined",label:"Time",InputLabelProps:{shrink:!0}})),r.a.createElement(Na,{_label:"Recur every X weeks",_placeholder:"",_type:"number",_autoComplete:"new-password",_value:Z>0?Z:1,_onChange:pe,_autoFocus:!1,_fullWidth:!0,_error:ae})),r.a.createElement("div",null,r.a.createElement(ga.a,{fullWidth:!0},ie.map((function(e){return r.a.createElement(Yi.a,{className:"checkbox-label",control:r.a.createElement(Hi.a,{color:"primary",onChange:fe,value:e.shortForm}),label:e.day})})))))));case 3:return r.a.createElement(r.a.Fragment,null,r.a.createElement(Na,{_label:"Name",_placeholder:"Enter Schedule Name...",_type:"text",_autoComplete:"new-password",_value:f,_onChange:ue,_characterCounter:40,_autoFocus:!0,_fullWidth:!0,_error:_}));default:return"Unknown step"}}(t)),r.a.createElement(Pt.a,{mt:1},r.a.createElement(ua,{_disabled:0===d,_variant:"text",_color:"default",_label:"Back",_type:"button",_fullWidth:!1,_loading:!1,_onClick:function(){p((function(e){return e-1}))}}),t+1!==ne.length&&r.a.createElement(ua,{_variant:"text",_color:"primary",_label:"Next",_type:"button",_fullWidth:!1,_loading:!1,_onClick:function(){p((function(e){return e+1}))}}))))}))),""!==s&&r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"submit-error has-txt-centered"},s))),_actions:r.a.createElement(n.Fragment,null,r.a.createElement(ua,{_variant:"text",_color:"default",_label:"Cancel",_type:"button",_fullWidth:!1,_loading:!1,_onClick:function(){return ge()}}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Submit",_type:"button",_fullWidth:!1,_loading:i,_disabled:i,_onClick:function(e){var t=0;""===f&&(E("Required"),t++),""===C&&(T("Required"),t++),0===t&&o(C,U,f)}}))})}var Up=a(1165),Wp=a(1146),Bp=a(1147);function Yp(e){var t=e.handleDialogClose,a=e.open;e.data;console.log("PreviewScheduleDialog...",e);var s=r.a.useState(""),o=Object(Ht.a)(s,2),i=o[0],l=o[1],c=r.a.useState(""),u=Object(Ht.a)(c,2),d=u[0],p=u[1],m=function(){t()};return r.a.createElement(Wa,{_open:a,_onEnter:function(){return function(){var t=wa()(e.data.start).format("MM/DD/YYYY h:mm A");l(t);var a="";a="SUCCESS"===e.data.status?"success":"FAILED"===e.data.status?"error":"pending",p(a)}()},_onClose:function(){return m()},_type:"share",_icon:!1,_title:"Event",_subtitle:""!==e.data.category?e.data.category:"",_size:"xs",_align:"left",_content:r.a.createElement(r.a.Fragment,null,r.a.createElement(Ri.a,{container:!0,spacing:1},r.a.createElement(Ri.a,{item:!0,xs:6},r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"txt-dialog-faded1"},"Type: "),r.a.createElement("div",{className:"txt-dialog-impact1"},"Flow"))),r.a.createElement(Ri.a,{item:!0,xs:6},r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"txt-dialog-faded1"},"Status: "),r.a.createElement("div",{className:"txt-dialog-impact1 "+d},""!==e.data.status?e.data.status.toLowerCase():"-")))),r.a.createElement(Ri.a,{container:!0,spacing:1},r.a.createElement(Ri.a,{item:!0,xs:6},r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"txt-dialog-faded1"},"Item: "),r.a.createElement("div",{className:"txt-dialog-impact1"},e.data.pipeline.name))),r.a.createElement(Ri.a,{item:!0,xs:6},r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"txt-dialog-faded1"},"Project: "),r.a.createElement("div",{className:"txt-dialog-impact1"},e.data.project.name)))),r.a.createElement(Ri.a,{container:!0,spacing:1},r.a.createElement(Ri.a,{item:!0,xs:6},r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"txt-dialog-faded1"},"Time: "),r.a.createElement("div",{className:"txt-dialog-impact1"},i))),r.a.createElement(Ri.a,{item:!0,xs:6},r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"txt-dialog-faded1"},"Schedule name: "),r.a.createElement("div",{className:"txt-dialog-impact1"},e.data.schedule.name)))),"FAILED"===e.data.status&&r.a.createElement(n.Fragment,null,r.a.createElement(Pt.a,{mt:2}),r.a.createElement(Ri.a,{container:!0,spacing:1},r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(Up.a,{className:"expand-panel"},r.a.createElement(Wp.a,{expandIcon:r.a.createElement(Sc.a,null),"aria-controls":"log-content",id:"log-header"},r.a.createElement("div",null,"Error Log Message")),r.a.createElement(Bp.a,null,r.a.createElement("div",{className:"error error-log-string"},e.data.message))))))),_actions:r.a.createElement(n.Fragment,null,r.a.createElement(ua,{_variant:"text",_color:"default",_label:"Close",_type:"button",_fullWidth:!1,_loading:!1,_onClick:function(){return m()}}))})}var qp=a(360),Hp=(a(1066),a(1067),a(1068),Object(qp.b)(wa.a)),Gp=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).subpageClicked=!1,e.state={schedules:{},upcomingSchedules:{},pastSchedules:{},loading:!0,loadingTxt:"Loading Schedules...",renderAsList:!0,tableSortAsc:!0,tableSortProperty:"",rowsPerPage:16,page:0,searchTerm:"",scheduleCategory:"upcoming",newScheduleDialogOpen:!1,newScheduleDialogError:"",addingNewScheduleLoading:!1,appData:{},previewScheduleDialogOpen:!1,previewScheduleData:{},breadCrumbLink:"",breadCrumbTxt:"",projectId:"",projectName:"",subjectName:"",subjectId:"",snackbarOpen:!1,snackbarMessage:null,snackbarType:""},e.constructBreadcrumb=function(t,a,n){"flow-schedules"===n?e.setState({breadCrumbLink:"/flow/"+t,breadCrumbTxt:"Flow / "}):"project-schedules"===n?e.setState({breadCrumbLink:"/dashboard/project/"+t,breadCrumbTxt:"Project / "}):e.setState({breadCrumbLink:"/dashboard",breadCrumbTxt:"Home"})},e.handleChangeSearchTerm=function(t){e.setState({searchTerm:t.target.value})},e.setScheduleCategory=function(t){e.setState({scheduleCategory:t.target.value})},e.getScheduleFilters=function(){return r.a.createElement("div",{className:"filter-cardbox-holder"},r.a.createElement(Pt.a,{mt:2},r.a.createElement(ga.a,{fullWidth:!0,className:"checkbox-form-control"},r.a.createElement(Yi.a,{className:"checkbox-label",control:r.a.createElement(Hi.a,{color:"primary",checked:!0,disabled:!0}),label:"Flow",disabled:!0}),r.a.createElement(Yi.a,{className:"checkbox-label",control:r.a.createElement(Hi.a,{color:"primary",disabled:!0}),label:"Connector",disabled:!0}))),r.a.createElement(Pt.a,{mt:2},r.a.createElement(ga.a,{fullWidth:!0,className:"checkbox-form-control"},r.a.createElement(pc.a,{"aria-label":"schedule-time",name:"schedule-category"},r.a.createElement(Yi.a,{value:"upcoming",key:"upcoming",control:r.a.createElement(qi.a,{color:"primary",size:"small",onClick:function(t){return e.setScheduleCategory(t)},checked:"upcoming"===e.state.scheduleCategory}),label:"Upcoming Events"}),r.a.createElement(Yi.a,{value:"past",key:"past",control:r.a.createElement(qi.a,{color:"primary",size:"small",onClick:function(t){return e.setScheduleCategory(t)},checked:"past"===e.state.scheduleCategory}),label:"Past Logs"})))))},e.handleEditSchedule=function(e){},e.handleDeleteSchedule=function(e){},e.handleRenderAsList=function(){e.setState({renderAsList:!0})},e.handleRenderAsGrid=function(){e.setState({renderAsList:!1})},e.calendarEventClick=function(t){e.setState({previewScheduleData:t,previewScheduleDialogOpen:!0})},e.openNewScheduleDialog=function(){e.setState({newScheduleDialogOpen:!0})},e.closeNewScheduleDialog=function(){e.setState({newScheduleDialogOpen:!1})},e.submitNewSchedule=function(t,a,s){var o={};e.state.appData.forEach((function(e){e.pipelines.forEach((function(e){e.pipeline_id===t.pipelineId&&(o=e)}))}));var i=a.type,l=new Date(a.startTime).getUTCHours(),c=new Date(a.startTime).getUTCMinutes(),u=a.startTime.format("HH:mm"),d=a.startDate.format("YYYY-MM-DD"),p=(new Date(d+" "+u+":00").getTime()/1e3).toFixed(0),m=a.startTime.add(2,"hours").format("HH:mm"),h=a.endDate.format("YYYY-MM-DD"),f=(new Date(h+" "+m+":00").getTime()/1e3).toFixed(0),g="";if("once"===i)g=Bi({value:c},{value:l},null,null,null);else if("daily"===i){var b=a.days>0?a.days:1;g=Bi({value:c},{value:l},{value:b,recur:!0},null,null)}else if("weekly"===i){var v=a.weeks>0?a.weeks:1;g=Bi({value:c},{value:l},{value:7*v,recur:!0},null,a.weekDays)}if(""!==g){var _={cron:g,start_time:p,end_time:f,name:s};o.schedule=_,o.modifiedAt=ka(),e.props.updateFlowData(o),e.closeNewScheduleDialog(),setTimeout((function(){e.setState({snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"You have succesfully scheduled new event")),snackbarType:"success",snackbarOpen:!0});var t;if("flow-schedules"===(t=e.props.history.location.pathname.split("/")[2])){var a=e.props.match.params.id;Ti("",a,1e3,"").then((function(t){e.setState({pastSchedules:t.schedule_logs})})),Mi("",a,1e3,"").then((function(t){e.setState(Object(Ot.a)(Object(Ot.a)({},e.state.schedules),{},{upcomingSchedules:[t.schedule_log]}))}))}else if("project-schedules"===t){var s=e.props.match.params.id;Fi(s,"",1e3,"").then((function(t){e.setState({pastSchedules:t.schedule_logs})})),Li(s,"",1e3,"").then((function(t){e.setState(Object(Ot.a)(Object(Ot.a)({},e.state.schedules),{},{upcomingSchedules:t.schedule_logs}))}))}else xi("","",1e3,"").then((function(t){e.setState({pastSchedules:t.schedule_logs})})),Ai("","",1e3,"").then((function(t){e.setState(Object(Ot.a)(Object(Ot.a)({},e.state.schedules),{},{upcomingSchedules:t.schedule_logs}))}))}),1500)}else setTimeout((function(){e.setState({snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Please try again")),snackbarType:"error",snackbarOpen:!0})}),1500)},e.closePreviewScheduleDialog=function(){e.setState({previewScheduleDialogOpen:!1})},e.handleSnackbarClose=function(){e.setState({snackbarOpen:!1})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.fireReturnToProject("schedule");var t,a=[],n="",r="",s="",o="";if("flow-schedules"===(t=this.props.history.location.pathname.split("/")[2])){this.setState({loadingTxt:"Loading Flow Schedules..."}),s=this.props.match.params.id;var i={};Mo(s).then((function(t){i.pipelines=[t.pipeline],n=t.pipeline.project_id,o=t.pipeline.name,Yo(n).then((function(t){i.project=[t.project],r=t.project.name,n=t.project.project_id,a=[i],e.setState({appData:a,loading:!1,subjectName:o,projectId:n})}))}))}else"project-schedules"===t?(this.setState({loadingTxt:"Loading Project Schedules..."}),n=this.props.match.params.id,Bo().then((function(t){t.forEach((function(t){var s={};s.project=t,t.project_id===n&&(r=t.name,e.setState({subjectName:t.name,projectId:n}),Vo(t.project_id).then((function(e){s.pipelines=e.data.pipelines})),a.push(s))})),e.setState({appData:a,loading:!1})}))):(this.setState({loadingTxt:"Loading Schedules..."}),Bo().then((function(t){t.forEach((function(e){var t={};t.project=e,e.project_id===n&&(r=e.name),Vo(e.project_id).then((function(e){t.pipelines=e.data.pipelines})),a.push(t)})),e.setState({appData:a,loading:!1})})));"flow-schedules"===t?(Ti("",s,1e3,"").then((function(t){e.setState({pastSchedules:t.schedule_logs})})),Mi("",s,1e3,"").then((function(t){e.setState({upcomingSchedules:[t.schedule_log]})})),this.constructBreadcrumb(s,o,t)):"project-schedules"===t?(Fi(n,"",1e3,"").then((function(t){e.setState({pastSchedules:t.schedule_logs})})),Li(n,"",1e3,"").then((function(t){e.setState({upcomingSchedules:t.schedule_logs})})),this.constructBreadcrumb(n,r,t)):(xi("","",1e3,"").then((function(t){e.setState({pastSchedules:t.schedule_logs})})),Ai("","",1e3,"").then((function(t){e.setState({upcomingSchedules:t.schedule_logs})})),this.constructBreadcrumb(n,r,t))}},{key:"componentWillUnmount",value:function(){var e=this,t=!0,a="",n="";if(this.props.history.location.pathname&&this.props.match.path){a=this.props.history.location.pathname,n=this.props.match.path;var r=a.split("/");r[r.length-1];"projects"===r[2]&&"/dashboard/schedules"!==n&&(t=!1)}t||Si(this.state.projectId).then((function(t){e.props.cleanSession()})).catch((function(t){e.props.cleanSession()}))}},{key:"getSchedules",value:function(e){var t=this,a=[],s=wa()(),o="upcoming",i="";return"past"===this.state.scheduleCategory?(i="No past schedules found",o="Past"):"upcoming"===this.state.scheduleCategory&&(i="No upcoming schedules found",o="Upcoming"),e.forEach((function(e){e.pipeline_logs&&e.pipeline_logs.length>0&&e.pipeline_logs.forEach((function(n){var r=new Date,i=1e3*n.timestamp,l=wa()(i);if(""!==n.timestamp){var c=parseInt(wa()(l).format("YYYY")),u=parseInt(wa()(l).format("MM"))-1,d=parseInt(wa()(l).format("DD")),p=parseInt(wa()(l).format("H")),m=parseInt(wa()(l).format("mm"));r=new Date(c,u,d,p,m)}var h=wa()(l).isBefore(s),f=wa()(l).isAfter(s),g={title:e.pipeline.name+" | "+e.project.name,start:r,end:r,desc:e.schedule.name,status:n.status,message:n.message,project:e.project,pipeline:e.pipeline,schedule:e.schedule,category:o};("past"===t.state.scheduleCategory&&h||"upcoming"===t.state.scheduleCategory&&f)&&a.push(g)}))})),a&&0===a.length?r.a.createElement(n.Fragment,null,r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(Pt.a,{display:"flex",alignItems:"center",className:"no-results"},r.a.createElement(Gd.a,{className:"no-results-icon"}),r.a.createElement("span",{className:"no-results-txt"},i)))):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"rbc-calendar-holder"},r.a.createElement(qp.a,{localizer:Hp,events:a,startAccessor:"start",endAccessor:"end",eventPropGetter:function(e){return{style:{backgroundColor:""===e.status?"rgba(63, 81, 181, 0.6)":"SUCCESS"===e.status?"#4caf50":"#f44336"}}},onSelectEvent:function(e){return t.calendarEventClick(e)}})))}},{key:"render",value:function(){var e=this,t={},a="";return"past"===this.state.scheduleCategory?(t=this.state.pastSchedules,a="No past schedules found"):"upcoming"===this.state.scheduleCategory&&(t=this.state.upcomingSchedules,a="No upcoming schedules found"),r.a.createElement(n.Fragment,null,r.a.createElement(hl,{loadingTxt:this.state.loadingTxt,fadeOut:!this.state.loading,placement:"next-to-nav"}),r.a.createElement(Pd.a,{className:"main-container h_100-100",component:"main",maxWidth:!1},r.a.createElement(Ri.a,{container:!0},r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(Ud,{_breadcrumbLink:this.state.breadCrumbLink,_breadcrumbText:this.state.breadCrumbTxt+""+this.state.subjectName,_breadcrumbTitle:"Schedules",_breadcrumbBackIcon:!0,_actionButtons:r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"New Schedule",_type:"button",_fullWidth:!1,_loading:!1,_startIcon:r.a.createElement("i",{className:"zmdi zmdi-plus zmdi-hc-fw"}),_onClick:function(){return e.openNewScheduleDialog()}})}))),r.a.createElement("div",{className:t.length>0?"with-filter-wrapper h-100":"with-filter-wrapper"},r.a.createElement("div",{className:"filter-holder"},this.getScheduleFilters()),r.a.createElement("div",{className:t.length>0?"next-to-filter-content h-100":"next-to-filter-content"},r.a.createElement("div",{className:"cardbox-holder contains-calendar"},t.length>0?this.getSchedules(t):r.a.createElement(n.Fragment,null,r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(Pt.a,{display:"flex",alignItems:"center",className:"no-results"},r.a.createElement(Gd.a,{className:"no-results-icon"}),r.a.createElement("span",{className:"no-results-txt"},a)))))))),this.state.newScheduleDialogOpen&&r.a.createElement(Vp,{open:this.state.newScheduleDialogOpen,handleDialogClose:this.closeNewScheduleDialog,newScheduleDialogErrorMsg:this.state.newScheduleDialogError,newScheduleSubmitLoading:this.state.addingNewScheduleLoading,appData:this.state.appData,onSubmit:function(t,a,n){return e.submitNewSchedule(t,a,n)}}),this.state.previewScheduleDialogOpen&&r.a.createElement(Yp,{open:this.state.previewScheduleDialogOpen,handleDialogClose:this.closePreviewScheduleDialog,data:this.state.previewScheduleData}),r.a.createElement(Hu,{snackbarOpen:this.state.snackbarOpen,snackbarType:this.state.snackbarType,snackbarMsg:this.state.snackbarMessage,onSnackbarClose:this.handleSnackbarClose}))}}]),a}(n.Component),Kp=Object(d.c)((function(e){return{data:e.flowReducerState,email:e.userReducerState.email,metabaseLoginId:e.flowReducerState.metabaseLoginId,activePageType:e.flowReducerState.activePageType,uploadProgress:e.flowReducerState.uploadProgress}}),(function(e){return{cleanSession:function(){e(wt())},fireReturnToProject:function(t){e(yt(t))},fillSessions:function(t,a){e(kt(t,a))},updateFlowData:function(t){e(Xe(t))}}}))(Gp),Qp=a(566),Jp=a.n(Qp),Xp=oa.a.bind(Jp.a),Zp=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).prepareContent=function(){var t=e.props._type?e.props._type:"",a=e.props._type?e.props._content:"",n=!!e.props._navMinimzed&&e.props._navMinimzed,s=Xp({contentArea:!0,minimized:n});return"sub-page"===t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:s},a)):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:s},r.a.createElement(ad.d,null,r.a.createElement(ad.b,{path:"/dashboard/project/:id",component:xp}),r.a.createElement(ad.b,{path:"/dashboard/projects",component:hp}),r.a.createElement(ad.b,{path:"/dashboard/flow-schedules/:id",component:Kp}),r.a.createElement(ad.b,{path:"/dashboard/project-schedules/:id",component:Kp}),r.a.createElement(ad.b,{path:"/dashboard/schedules",component:Kp}),r.a.createElement(ad.b,{path:"/dashboard/profile",component:Yd}),r.a.createElement(ad.b,{path:"/dashboard",component:hp}))))},e}return Object(l.a)(a,[{key:"render",value:function(){return this.prepareContent()}}]),a}(n.Component),$p=a(567),em=a.n($p),tm=oa.a.bind(em.a),am=(n.Component,function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).prepareLayout=function(){var e=n.props._type?n.props._type:"",t=n.props._page?n.props._page:"",a=n.props._appData?n.props._appData:null,s=(n.props._historyData&&n.props._historyData,n.props._email?n.props._email:""),o=n.props._uploadProgress?n.props._uploadProgress:"",i=n.props._logoutHandler?n.props._logoutHandler:"",l=n.props._leftSidebar?n.props._leftSidebar:"",c=n.props._filterSidebar?n.props._filterSidebar:"",u=n.props._rightSidebar?n.props._rightSidebar:"",d=n.props._content?n.props._content:"",p=n.props._handleGoBack?n.props._handleGoBack:"";null!==a&&a.activePageType;var m=n.state.navMinimized;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Cd,{_type:e,_page:t,_email:s,_logoutHandler:i,_handleGoBack:p,_leftSidebar:l,_filterSidebar:c,_uploadProgress:o,_toggleNavigation:function(){return n.toggleNavigation()},_navMinimzed:m,_getMenuItemActive:function(e){return n._getMenuItemActive(e)},_menuItemActive:n.state.menuItem,_appData:a}),r.a.createElement(Zp,{_type:e,_content:d,_navMinimzed:m}),""!==u&&r.a.createElement(Cd,{_type:e,_page:t,_email:s,_logoutHandler:i,_rightSidebar:u}))},n.toggleNavigation=function(){n.state.navMinimized?n.setState({navMinimized:!1}):n.setState({navMinimized:!0})},n.state={navMinimized:!1,menuItem:""},n}return Object(l.a)(a,[{key:"_getMenuItemActive",value:function(e){this.state.menuItem!==e&&(this.setState({menuItem:e}),"schedule"===e&&this.setState({navMinimized:!0}))}},{key:"render",value:function(){return this.prepareLayout()}}]),a}(n.Component)),nm=a(280),rm=a.n(nm),sm=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s)))._isMounted=!1,e.selectedNodeId="",e._engine=Cu(),e._commandManager=new Ku,e.autoLayoutApplied=!1,e.definition={facets:[],arrows:[]},e.pipelineCheckIntervalId=-1,e.pipelineLogIntervalId=-1,e.enterInteractiveModePending=!1,e.pipelineLogPromise=null,e.isPipelineRunningPromise=null,e.maxRetriesForPipelineLog=20,e.currentRetryForPipelineLog=0,e.hideAutoLayoutLoadingTimeout=-1,e.hideAutoLayoutLoading=!1,e.peekLinkObject=new fu,e.saveFacetIntervalId=-1,e.state={dashboardCreateLoading:!1,browseStatus:"",sessionCreated:!1,createSessionDialogOpened:!1,snackbarOpen:!1,snackbarVariant:"success",snackbarMessage:"",isMetabase:!1,iFrameURL:"",iFrameLoadingDone:!1,iFrameContentLoaded:!1,clearIframeLoader:!1,browseURLLoading:!0,pipelineLoaded:!1,editRunFlowRunning:!1,drawerOpened:!1,scheduleOpened:!1,editNodeModalOpened:!1,editArrowModalOpened:!1,visualizationOpened:!1,vizInitiated:!1,vizLoading:!1,vizFacetInfo:{},vizType:"",vizFacetId:"",vizFacetParentId:"",vizFacetSourceId:"",vizFacetDestinationId:"",peekInitiated:!1,peekContent:{},peekLoading:!1,peekMinMax:"min",vizElements:[],createNewDatasetDialogOpened:!1,newlyAddedDatasetName:"",newlyAddedDatasetFileName:"",newlyAddedDatasetNameExists:!1,pipeline:{schedule:{},pipeline_id:"",name:"",modifiedAt:"",createdAt:"",project_id:"",definition:e.definition},selectedNode:null,selectedArrow:null,selectedArrowArgumentTypes:null,selectedNodeName:"",projectId:"",projectName:"",mode:"edit",loadingDone:!1,pipelineRunning:!1,loadingLogs:!1,modeChangePending:!1,pipelineLogs:[],columnNames:[],isDashView:!1,pipelineSpecs:[],pipelineSpecsLoaded:!1,tableSort:"all",tableSortAsc:!0,tableSortProperty:"",zoomScale:1,pastScheduledActions:[{name:"Action 1",date:"24.08.2019",execution:"15s"},{name:"Action 2",date:"21.08.2019",execution:"2m 12s"},{name:"Action 3",date:"18.08.2019",execution:"49s"}],upcomingScheduledActions:[{name:"Action 4",date:"28.08.2019",execution:"30s"},{name:"Action 5",date:"29.08.2019",execution:"1m"},{name:"Action 6",date:"30.08.2019",execution:"2m 5s"}]},e.onRunClick=function(){e.validateDiagram()&&(e.props.sendAppData(e.state.pipeline.pipeline_id),e.setState({pipelineRunning:!0}),e.checkIsPipelineRunning(e.state.pipeline.pipeline_id))},e.checkIsPipelineRunning=function(t){e.isPipelineRunningPromise=Gu(Ii(t)),e.isPipelineRunningPromise.promise.then((function(a){"true"===a.data?e.pipelineCheckIntervalId=setTimeout((function(){e.checkIsPipelineRunning(t)}),2e3):(e.currentRetryForPipelineLog=0,e.getPipelineLogs(e.state.pipeline.pipeline_id,!0),setTimeout((function(){e.props.getDatasets(e.state.projectId),e.props.getDashboards(e.state.projectId)}),2e3))})).catch((function(t){e.setState({pipelineRunning:!1})}))},e.handleAutoSaveFacet=function(t,a,n,r){e.saveFacetIntervalId=setTimeout((function(){ki(t,a,n,r).then((function(s){e.saveFacetIntervalId>0&&e.handleAutoSaveFacet(t,a,n,r)})).catch((function(s){ki(t,a,n,r).then((function(s){e.saveFacetIntervalId>0&&e.handleAutoSaveFacet(t,a,n,r)}))}))}),2e4)},e.closeVisulaize=function(){if(clearTimeout(e.saveFacetIntervalId),"Facet"===e.state.vizType)if("PYTHON_SCRIPT"===e.state.vizFacetInfo.facet_type||"API"===e.state.vizFacetInfo.facet_type)wi(e.state.pipeline.pipeline_id,e.state.pipeline.project_id,e.state.vizFacetId,e.state.vizFacetParentId).then((function(t){e.setState({vizInitiated:!1,vizLoading:!1,vizFacetInfo:{},vizType:"",vizFacetId:"",vizFacetParentId:"",mode:"edit",iFrameURL:"",iFrameLoadingDone:!1,iFrameContentLoaded:!1,clearIframeLoader:!1}),Mo(e.state.pipeline.pipeline_id).then((function(t){t.pipeline.pipeline_id=e.state.pipeline.pipeline_id;var a=t.pipeline;e.setState(Object(Ot.a)(Object(Ot.a)({},e.state),{},{pipeline:a}))}))})).catch((function(t){e.setState({vizInitiated:!1,vizLoading:!1,vizFacetInfo:{},vizType:"",vizFacetId:"",vizFacetParentId:"",mode:"edit",iFrameURL:"",iFrameLoadingDone:!1,iFrameContentLoaded:!1,clearIframeLoader:!1}),Mo(e.state.pipeline.pipeline_id).then((function(t){t.pipeline.pipeline_id=e.state.pipeline.pipeline_id;var a=t.pipeline;e.setState(Object(Ot.a)(Object(Ot.a)({},e.state),{},{pipeline:a}))}))}));else{var t=e.state.pipeline.definition.facets.filter((function(t){return t.facet_id===e.state.vizFacetInfo.facet_id}));ji(t[0].arguments.dashboard_id,e.state.pipeline.project_id).then((function(e){})).catch((function(e){})),e.setState({vizInitiated:!1,vizLoading:!1,vizFacetInfo:{},vizType:"",isDashView:!1,vizFacetId:"",vizFacetParentId:"",mode:"edit",iFrameURL:"",iFrameLoadingDone:!1,iFrameContentLoaded:!1,clearIframeLoader:!1})}else Ci(e.state.pipeline.pipeline_id,e.state.pipeline.project_id,e.state.vizFacetSourceId,e.state.vizFacetDestinationId).then((function(e){})).catch((function(e){})),e.setState({vizInitiated:!1,vizLoading:!1,vizFacetInfo:{},vizType:"",vizFacetSourceId:"",vizFacetDestinationId:"",mode:"edit",iFrameURL:"",iFrameLoadingDone:!1,iFrameContentLoaded:!1,clearIframeLoader:!1})},e.handleSubmitFacetName=function(t){e.setState({selectedNodeName:t})},e.closePeekArrow=function(){e.peekLinkObject.handleButtonsStateDisabled(),e.setState({mode:"edit",peekInitiated:!1,peekContent:{},peekMinMax:"min"})},e.minmaxPeekArrow=function(t){e.setState({peekMinMax:t})},e.handleMinimizeVizElement=function(t,a,n,r){var s,o;""!==r?(s=!0,o=!0):(s=!1,o=!1);var i="";"Facet"===t?i="facet-"+a.facet_id:"Link"===t&&(i="link-"+a.sourcePort.parent.facet_id+"-"+a.targetPort.parent.facet_id);var l={open:!0,vizID:i,vizType:t,vizFacetInfo:a,isDashView:n,iFrameURL:r,vizFacet:a.facet_type,vizInitiated:s,vizLoading:o,vizFacetId:a.facet_id,vizFacetParentId:e.state.vizFacetParentId,vizFacetSourceId:e.state.vizFacetSourceId,vizFacetDestinationId:e.state.vizFacetDestinationId,iFrameLoadingDone:!1,iFrameContentLoaded:!1,clearIframeLoader:!1};e.setState({vizElements:Object(Ot.a)(Object(Ot.a)({},e.state.vizElements),{},Object(Dt.a)({},i,l))},(function(){}))},e.handleMinimizeVisualization=function(t){if(t){var a=t.vizID;""!==t.iFrameURL?(!0,!0):(!1,!1);Object.keys(e.state.vizElements).filter((function(a){return e.state.vizElements[a].iFrameURL!==t.iFrameURL}));var n=t;n.open=!1,e.setState({vizElements:Object(Ot.a)(Object(Ot.a)({},e.state.vizElements),{},Object(Dt.a)({},a,n))},(function(){}))}e.setState({mode:"edit"})},e.removeVizElement=function(t){if(""!==t&&void 0!==t){var a={};if(Object.keys(e.state.vizElements).map((function(n,r){return n===t.vizID&&e.state.vizElements[n].iFrameURL===t.iFrameURL||(a[n]=e.state.vizElements[n]),""})),e.setState({vizElements:a},(function(){})),"Facet"===t.vizType)if(t.isDashView){var n=e.state.pipeline.definition.facets.filter((function(e){return e.facet_id===t.vizFacetId}));ji(n[0].arguments.dashboard_id,e.state.pipeline.project_id).then((function(e){})).catch((function(e){}))}else clearTimeout(e.saveFacetIntervalId),wi(e.state.pipeline.pipeline_id,e.state.pipeline.project_id,e.state.vizFacetId,e.state.vizFacetParentId).then((function(t){Mo(e.state.pipeline.pipeline_id).then((function(t){t.pipeline.pipeline_id=e.state.pipeline.pipeline_id;var a=t.pipeline;e.setState(Object(Ot.a)(Object(Ot.a)({},e.state),{},{pipeline:a}))}))})).catch((function(t){Mo(e.state.pipeline.pipeline_id).then((function(t){t.pipeline.pipeline_id=e.state.pipeline.pipeline_id;var a=t.pipeline;e.setState(Object(Ot.a)(Object(Ot.a)({},e.state),{},{pipeline:a}))}))}));else Ci(e.state.pipeline.pipeline_id,e.state.pipeline.project_id,e.state.vizFacetSourceId,e.state.vizFacetDestinationId).then((function(e){})).catch((function(e){}));e.setState({mode:"edit"})}},e._visualizeMinimizedTab=function(t){if(t){var a=t.vizID;""!==t.iFrameURL?(!0,!0):(!1,!1);Object.keys(e.state.vizElements).filter((function(a){return e.state.vizElements[a].iFrameURL!==t.iFrameURL}));var n=t;n.open=!0,e.setState({vizElements:Object(Ot.a)(Object(Ot.a)({},e.state.vizElements),{},Object(Dt.a)({},a,n))},(function(){}))}},e.visualizationElementRender=function(){return n.createElement("div",{className:rm.a.interactiveFrame},Object.keys(e.state.vizElements).length>0&&n.createElement("div",{className:"interactive-frame-tabs"},n.createElement("div",{className:"tabs-title"},n.createElement("span",{className:"title"},"Minimized")),Object.keys(e.state.vizElements).map((function(t){return n.createElement("div",{className:"interactive-frame-tab",key:"ift-"+t},n.createElement("div",{className:"inner-tab-div",onClick:function(){return e._visualizeMinimizedTab(e.state.vizElements[t])}},"Link"===e.state.vizElements[t].vizType?n.createElement(n.Fragment,null,n.createElement("i",{className:"zmdi zmdi-arrow-right-top zmdi-hc-fw"}),n.createElement("span",{className:"tab-txt"},e.state.vizElements[t].vizFacetInfo.sourcePort.parent.name&&""!==e.state.vizElements[t].vizFacetInfo.sourcePort.parent.name?e.state.vizElements[t].vizFacetInfo.sourcePort.parent.name:"Link")):!0===e.state.vizElements[t].isDashView?n.createElement(n.Fragment,null,n.createElement("i",{className:"zmdi zmdi-view-dashboard zmdi-hc-fw"}),n.createElement("span",{className:"tab-txt"},"Dash")):n.createElement(n.Fragment,null,n.createElement("i",{className:"zmdi zmdi-code zmdi-hc-fw"}),n.createElement("span",{className:"tab-txt"},e.state.vizElements[t].vizFacetInfo.name&&""!==e.state.vizElements[t].vizFacetInfo.name?e.state.vizElements[t].vizFacetInfo.name:"Script"))),n.createElement(fa.a,{className:"close-interactive-tab",onClick:function(){return e.removeVizElement(e.state.vizElements[t])},size:"small",color:"default"},n.createElement(il.a,{fontSize:"small",className:"close-interactive-tab-icon"})))}))),e.state.vizElements&&Object.keys(e.state.vizElements).length>0&&Object.keys(e.state.vizElements).map((function(t){return n.createElement(_l,{key:"vc-"+t,open:e.state.vizElements[t].open,minimized:!0,inFocus:!0,url:"",isMetabase:!0,status:"",loading:e.state.vizElements[t].vizLoading,projectName:e.state.projectName,pipeline:e.state.pipeline,vizElement:e.state.vizElements[t],onClose:function(t){return e.removeVizElement(t)},onMinimize:function(t){return e.handleMinimizeVisualization(t)}})})))},e.handleGoBack=function(t){e.props.history.push("/dashboard/project/".concat(e.state.projectId))},e.peekElementRender=function(){return n.createElement(Jl,{peekInitiated:e.state.peekInitiated,peekMinMax:e.state.peekMinMax,peekLoading:e.state.peekLoading,peekContent:e.state.peekContent,handleClosePeekArrow:function(){return e.closePeekArrow()},handleMinMaxPeekArrow:function(t){return e.minmaxPeekArrow(t)}})},e.sortPeek=function(t){return""!==e.state.tableSortProperty?e.sortOn(t,e.state.tableSortProperty):t},e.sortOn=function(t,a){return t.sort((function(t,n){return n[a]<t[a]?e.state.tableSortAsc?1:-1:n[a]>t[a]?e.state.tableSortAsc?-1:1:0}))},e.onRequestSort=function(t,a){e.setState({tableSortAsc:!e.state.tableSortAsc,tableSortProperty:a})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,document.body.style.overflow="hidden",this.pipelineCheckIntervalId=-1,this.pipelineLogIntervalId=-1,this.hideAutoLayoutLoadingTimeout=-1,this.hideAutoLayoutLoading=!1,this.currentRetryForPipelineLog=0,this.saveFacetIntervalId=-1;var t=this.props.match.params.id;this.props.facetDocLoaded||this.props.getFacetDoc(),this.props.fireReturnToProject("pipeline"),this.setState({createSessionDialogOpened:!1,pipelineLogs:[],snackbarOpen:!1,pipelineLoaded:!1,pipelineRunning:!1,sessionCreated:!1,loadingLogs:!1}),Mo(t).then((function(a){a.pipeline.pipeline_id=t;var n=a.pipeline,r=n.project_id;e.setState(Object(Ot.a)(Object(Ot.a)({},e.state),{},{pipeline:n,pipelineLoaded:!0,projectId:r,mode:"edit"})),e.props.data.datasetsLoaded||e.props.getDatasets(r),e.props.data.dashboardsLoaded||e.props.getDashboards(r),e.getPipelineLogs(t),e.selectedNodeId=e.props.data.selectedNodeId;var s=Au();n.definition.facets&&(console.log("pipeline: "),console.log(n),function(e,t){for(var a=0;a<e.length;a++){var n=e[a],r=parseInt(n.facet_id);r>Ou&&(Ou=r),Ou++;var s=Mu(n.name,n.facet_id,n.facet_type,n.facet_group,n.chain_group,n.custom_facet_type,n.custom_facet_group,n.custom_chain_group);Gc.addNode(s),Du["facet_"+n.facet_id]=s}t&&Pu(t),e.length>0&&setTimeout((function(){Lu()}),1e3)}(n.definition.facets,n.definition.arrows)),s.getModels().forEach((function(t,a){t.registerListener({editNode:function(t){e.showEditor(t.node)},deleteNode:function(t){e.deleteNodeCommand(t.node)},visualize:function(t){e._visualize(t.node)},selectionChanged:function(t){e._selectionChangedEventHandler()}})})),s.getLinks().forEach((function(t){t.listenerRef=t.registerListener({deleteLink:function(t){e.deleteLinkCommand(t.model)},editLink:function(t){e._editLink(t.model)},browseLink:function(t){e._browseLink(t.model)},peek:function(t){e._peekArrow(t.model)}})})),s.registerListener({linksUpdated:function(t){if(t.isCreated){var a=t.link;a.listenerRef&&a.deregisterListener(a.listenerRef),a.listenerRef=a.registerListener({targetPortChanged:function(t){a.added||(a.added=!0,e.addArrowCommand(t.entity.sourcePort,t.entity.targetPort,a))},deleteLink:function(t){e.deleteLinkCommand(t.model)},editLink:function(t){e._editLink(t.model)},browseLink:function(t){e._browseLink(t.model)},peek:function(t){e._peekArrow(t.model)},selectionChanged:function(t){e._selectionChangedEventHandler()}})}}}),new Promise((function(e,t){Ye.get("/get-pipeline-specs").then((function(a){200===a.status?e(a.data.pipeline_arguments):t("Error loading projects")}))})).then((function(t){e.setState({pipelineSpecsLoaded:!0,pipelineSpecs:t})}))}),(function(){e.handlePipelineLoadError("Error while loading pipeline with id ".concat(t))}))}},{key:"componentWillUnmount",value:function(){var e=this,t="";if(this.props.history.location.pathname){t=this.props.history.location.pathname;var a="";this.state.pipeline.project_id&&(a=this.state.pipeline.project_id),"/dashboard/projects"!==t&&"/dashboard/profile"!==t||Si(a).then((function(t){e.props.cleanSession()})).catch((function(t){e.props.cleanSession()}))}this._isMounted=!1,this.state.mode,-1!==this.pipelineCheckIntervalId&&clearTimeout(this.pipelineCheckIntervalId),-1!==this.pipelineLogIntervalId&&clearTimeout(this.pipelineLogIntervalId),-1!==this.saveFacetIntervalId&&clearTimeout(this.saveFacetIntervalId),-1!==this.hideAutoLayoutLoadingTimeout&&clearTimeout(this.hideAutoLayoutLoadingTimeout),this.pipelineLogPromise&&this.pipelineLogPromise.cancel(),this.isPipelineRunningPromise&&this.isPipelineRunningPromise.cancel(),this._commandManager.empty(),this.hideAutoLayoutLoading=!1}},{key:"refreshPipeline",value:function(){var e=this;Mo(this.state.pipeline.pipeline_id).then((function(t){var a=t.pipeline;e.setState(Object(Ot.a)(Object(Ot.a)({},e.state),{},{pipeline:a}))}),(function(t){e.handlePipelineLoadError(t)}))}},{key:"enterInteractiveSession",value:function(e,t){this.enterInteractiveModePending=!1,this.showStatus("success","Entered Interactive Mode!"),this.handleFlowDiagramModeChanged(t)}},{key:"_browseLink",value:function(e){var t,a=this,n="",r="",s="",o="",i={},l="";this.state.pipeline&&void 0!==e&&(t=e,n=this.state.pipeline.pipeline_id,r=this.state.pipeline.project_id,o=t.targetPort.parent.facet_id,s=t.sourcePort.parent.facet_id,this.state.pipeline.definition.facets.map((function(e){return s===e.facet_id&&(i.source=e),o===e.facet_id&&(i.target=e),l="link-"+s+"-"+o})),this.setState({vizFacetInfo:i})),""!==l?(this.handleMinimizeVizElement("Link",e,!1,""),Oi(n,r,s,o).then((function(t){var n=f+""+t.url;a.setState({iFrameURL:n,iFrameLoadingDone:!0,vizFacetSourceId:s,vizFacetDestinationId:o}),a.handleMinimizeVizElement("Link",e,!1,n)})).catch((function(t){501===t?Ei(r).then((function(t){Oi(n,r,s,o).then((function(t){var n=f+""+t.url;a.setState({iFrameURL:n,iFrameLoadingDone:!0,vizFacetSourceId:s,vizFacetDestinationId:o}),a.handleMinimizeVizElement("Link",e,!1,n)})).catch((function(e){a.setState({snackbarMessage:"Something went wrong. Please try again",snackbarOpen:!0,snackbarVariant:"error",vizInitiated:!1,vizLoading:!1,vizFacetInfo:{},vizType:"",mode:"edit"}),a.removeVizElement(a.state.vizElements[l])}))})).catch((function(e){a.setState({snackbarMessage:"Something went wrong. Please try again",snackbarOpen:!0,snackbarVariant:"error",vizInitiated:!1,vizLoading:!1,vizFacetInfo:{},vizType:"",mode:"edit"})})):Oi(n,r,s,o).then((function(t){var n=f+""+t.url;a.setState({iFrameURL:n,iFrameLoadingDone:!0,vizFacetSourceId:s,vizFacetDestinationId:o}),a.handleMinimizeVizElement("Link",e,!1,n)})).catch((function(e){a.setState({snackbarMessage:"Something went wrong. Please try again",snackbarOpen:!0,snackbarVariant:"error",vizInitiated:!1,vizLoading:!1,vizFacetInfo:{},vizType:"",mode:"edit"}),a.removeVizElement(a.state.vizElements[l])}))}))):this.setState({snackbarMessage:"Something went wrong. Please try again",snackbarOpen:!0,snackbarVariant:"error",vizInitiated:!1,vizLoading:!1,vizFacetInfo:{},vizType:"",mode:"edit"})}},{key:"recreateSessionAndBrowseArrow",value:function(e,t,a){}},{key:"browseDashboard",value:function(e,t){var a=this;Ni(t,e).then((function(e){a.setState({iFrameURL:e.url,iFrameLoadingDone:!0,isMetabase:!0})})).catch((function(n){501===n?Ei(t).then((function(){Ni(t,e).then((function(e){a.setState({iFrameURL:e.url,iFrameLoadingDone:!0,isMetabase:!0})})).catch((function(){a.setState({visualizationOpened:!1,browseURLLoading:!1,snackbarMessage:"Error! Can not browse Dashboard.",snackbarOpen:!0,snackbarVariant:"error"})}))})).catch((function(){a.setState({visualizationOpened:!1,snackbarMessage:"Error! Can not browse Dashboard.",snackbarOpen:!0,snackbarVariant:"error",vizInitiated:!1,iFrameLoadingDone:!1,browseURLLoading:!1,iFrameURL:"",mode:"edit"})})):a.setState({visualizationOpened:!1,snackbarMessage:"Error! Can not browse Dashboard.",snackbarOpen:!0,snackbarVariant:"error",vizInitiated:!1,iFrameLoadingDone:!1,browseURLLoading:!1,iFrameURL:"",mode:"edit"})}))}},{key:"recreateSessionAndBrowseFacet",value:function(e,t){}},{key:"handleSessionError500",value:function(e){var t=this;this.showStatus("error",e),setTimeout((function(){t.props.history.push("/dashboard/project/".concat(t.state.projectId))}),3e3)}},{key:"handlePipelineLoadError",value:function(e){var t=this;this.showStatus("error",e),setTimeout((function(){t.props.history.push("/dashboard/project/".concat(t.state.projectId))}),3e3)}},{key:"toggleCreateSessionDialog",value:function(e){this.setState({createSessionDialogOpened:e})}},{key:"showStatus",value:function(e,t){this.setState({snackbarOpen:!0,snackbarMessage:t,snackbarVariant:e})}},{key:"_selectionChangedEventHandler",value:function(){if("interactive"===this.state.mode){var e=Au();if(e.getSelectedEntities().length>0){var t=e.getSelectedEntities()[e.getSelectedEntities().length-1];if("custom-link"===t.options.type){var a=t.getTargetPort(),n=t.getSourcePort();a.getParent().facet_id,n.getParent().facet_id}else"custom-node"===t.options.type&&(("PYTHON_SCRIPT"===t.options.facet_type||"API"===t.options.facet_type||"DASH"===t.options.facet_type)&&(t.options.selected=!1),t.setSelected(!1))}}}},{key:"_editLink",value:function(e){var t=this,a=this.state.pipeline,n=e.getTargetPort(),r=e.getSourcePort();if(n&&r){var s=n.getParent().facet_id,o=r.getParent().facet_id,i=a.definition.facets.filter((function(e){return e.facet_id===o}))[0],l=this.getComponentArrowArguments(i.chain_group,i.facet_group,i.facet_type,"source");Object.keys(l).length>0&&(l=Object(Ot.a)({title1:{argument_type:"title",title1:"".concat(ja(i.chain_group),"/").concat(ja(i.facet_group)),title2:"".concat(ja(i.facet_type))}},l));var c=a.definition.facets.filter((function(e){return e.facet_id===s}))[0],u=this.getComponentArrowArguments(c.chain_group,c.facet_group,c.facet_type,"target");Object.keys(u).length>0&&(u=Object(Ot.a)({title2:{argument_type:"title",title1:"".concat(ja(c.chain_group),"/").concat(c.facet_group),title2:"".concat(ja(c.facet_type))}},u));var d=Object(Ot.a)(Object(Ot.a)({},l),u),p=a.definition.arrows.filter((function(e){return e.source===o&&e.destination===s}))[0];this.setState(Object(Ot.a)(Object(Ot.a)({},this.state),{},{selectedArrow:p,selectedArrowArgumentTypes:d}),(function(){t.toggleUpdateArrowModal(!0)}))}}},{key:"getComponent",value:function(e,t,a){if(""!==e&&""!==t&&""!==a){var n=this.props.componentList[e][t][a];return"CUSTOM"!==t||"PYTHON_SCRIPT"!==a&&"API"!==a||(n.facet_arguments.libraries={name:"libraries",is_list:!0,is_required:!1,have_options:!1,argument_type:"TEXT"}),Object.keys(n).length>0?n:null}return null}},{key:"getComponentArrowArguments",value:function(e,t,a,n){var r=this.props.componentList[e][t][a];return Object.keys(r).length>0?"source"===n?r.out_arrow_arguments||{}:r.in_arrow_arguments||{}:null}},{key:"_deleteLink",value:function(e){e.isConnectedToANode=!1,function(e){Gc.removeLink(e),console.log("should delete link",e),Hc.repaintCanvas()}(e);var t=this.state.pipeline,a=e.getSourcePort(),n=e.getTargetPort();if(a&&n){var r=a.getParent().facet_id,s=n.getParent().facet_id,o=t.definition.arrows.filter((function(e){return e.source!==r||e.destination!==s})),i=t.definition.arrows.filter((function(e){return e.source===r&&e.destination===s})),l={};i.length>0&&(l=i[0].arguments);var c=t.definition.facets.find((function(e){return e.facet_id===r})),u=t.definition.facets.find((function(e){return e.facet_id===s}));c.children=c.children.filter((function(e){return e!==s})),u.parents=u.parents.filter((function(e){return e!==r}));var d=t.definition.facets.filter((function(e){return e.facet_id!==r&&e.facet_id!==s})),p=[].concat(Object(jt.a)(d),[c,u]);return t.definition.facets=p,t.definition.arrows=o,t.modifiedAt=ka(),this.setState(Object(Ot.a)(Object(Ot.a)({},this.state),{},{pipeline:t})),this.props.updateFlowData(t),l}}},{key:"addArrowCommand",value:function(e,t,a){var n=this,r=new ou((function(r){n.addArrow(e,t,r),a.isConnectedToANode=!0,a.clearPort(e),a.clearPort(t),a.setSourcePort(e),a.setTargetPort(t),Au().addLink(a)}),(function(){return n._deleteLink(a)}));this._commandManager.addCommand(r)}},{key:"deleteLinkCommand",value:function(e){var t=this,a=new ou((function(){return t._deleteLink(e)}),(function(a){t.addArrow(e.getSourcePort(),e.getTargetPort(),a);var n=e.getSourcePort(),r=e.getTargetPort();e.isConnectedToANode=!0,e.clearPort(n),e.clearPort(r),e.setSourcePort(n),e.setTargetPort(r),Au().addLink(e)}));this._commandManager.addCommand(a)}},{key:"addArrow",value:function(e,t,a){if(e&&t){for(var n=this.state.pipeline,r=e.parent.facet_id,s=t.parent.facet_id,o=n.definition.facets,i=0;i<o.length;i++){var l=o[i];l.facet_id===r&&l.children.push(s),l.facet_id===s&&l.parents.push(r)}n.definition.facets=o;var c={source:r,destination:s,arguments:a||{}};n.definition.arrows?n.definition.arrows.push(c):n.definition.arrows=[c],n.modifiedAt=ka(),this.setState(Object(Ot.a)(Object(Ot.a)({},this.state),{},{pipeline:n})),this.props.updateFlowData(n)}}},{key:"toggleUpdateNodeModal",value:function(e){this.setState({editNodeModalOpened:e})}},{key:"toggleUpdateArrowModal",value:function(e){this.setState({editArrowModalOpened:e})}},{key:"getPipelineLogs",value:function(e,t){var a=this;this.setState({loadingLogs:!0}),this.pipelineLogPromise=Gu(function(e){var t={pipeline_id:e};return new Promise((function(e,a){Ye.get("".concat(h,"/get-pipeline-log"),{params:t}).then((function(t){200===t.status?e(t):a("Error: Unable to get pipeline logs!")}))}))}(e)),this.pipelineLogPromise.promise.then((function(n){var r=n.data.pipeline_log;0!==r.length&&Object.keys(a.state.pipelineLogs).length===Object.keys(r).length&&a.currentRetryForPipelineLog<a.maxRetriesForPipelineLog||t&&0===r.length&&a.currentRetryForPipelineLog<a.maxRetriesForPipelineLog?(a.currentRetryForPipelineLog++,a.pipelineLogIntervalId=setTimeout((function(){a.getPipelineLogs(e,t)}),2e3)):(a.currentRetryForPipelineLog=0,a.setState({pipelineRunning:!1,loadingLogs:!1,pipelineLogs:r}))})).catch()}},{key:"onScheduleClick",value:function(){this.props.history.push("/dashboard/flow-schedules/".concat(this.state.pipeline.pipeline_id))}},{key:"_vizLoader",value:function(e,t,a){return n.createElement(n.Fragment,null,e&&n.createElement(hl,{loadingTxt:"Preparing Preview...",fadeOut:t,placement:this.state.mode}))}},{key:"_visualize",value:function(e){var t=this,a="facet-"+e.facet_id,n=!1,r={};if(Object.keys(this.state.vizElements).map((function(e,s){return e===a&&(n=!0,r=t.state.vizElements[e]),""})),n)this._visualizeMinimizedTab(r);else{this.handleMinimizeVizElement("Facet",e,!1,"");var s=e.facet_id,o="",i="",l=[],c="";if(this.state.pipeline)if(o=this.state.pipeline.pipeline_id,i=this.state.pipeline.project_id,l=this.state.pipeline.definition.facets.filter((function(e){return e.facet_id===s})),c=l[0].parents[0],l[0].children[0],"PYTHON_SCRIPT"===e.facet_type||"API"===e.facet_type)yi(o,i,s,c).then((function(a){t.setState({isDashView:!1,iFrameURL:a.url,iFrameLoadingDone:!0,vizFacetId:s,vizFacetParentId:c}),t.handleAutoSaveFacet(o,i,s,c),t.handleMinimizeVizElement("Facet",e,!1,a.url)})).catch((function(n){501===n?Ei(i).then((function(n){yi(o,i,s,c).then((function(a){t.setState({iFrameURL:a.url,iFrameLoadingDone:!0,vizFacetId:s,vizFacetParentId:c}),t.handleAutoSaveFacet(o,i,s,c),t.handleMinimizeVizElement("Facet",e,!1,a.url)})).catch((function(e){t.setState({snackbarMessage:"Something went wrong. Please try again",snackbarOpen:!0,snackbarVariant:"error",vizInitiated:!1,vizLoading:!1,vizFacetInfo:{},vizType:"",mode:"edit",iFrameLoadingDone:!1,browseURLLoading:!1}),t.removeVizElement(t.state.vizElements[a])}))})).catch((function(e){t.setState({snackbarMessage:"Something went wrong. Please try again",snackbarOpen:!0,snackbarVariant:"error",vizInitiated:!1,vizLoading:!1,vizFacetInfo:{},vizType:"",mode:"edit"})})):yi(o,i,s,c).then((function(a){t.setState({isDashView:!1,iFrameURL:a.url,iFrameLoadingDone:!0,vizFacetId:s,vizFacetParentId:c}),t.handleAutoSaveFacet(o,i,s,c),t.handleMinimizeVizElement("Facet",e,!1,a.url)})).catch((function(e){t.setState({snackbarMessage:"Something went wrong. Please try again",snackbarOpen:!0,snackbarVariant:"error",vizInitiated:!1,vizLoading:!1,vizFacetInfo:{},vizType:"",mode:"edit",iFrameLoadingDone:!1,browseURLLoading:!1}),t.removeVizElement(t.state.vizElements[a])}))}));else{var u=this.state.pipeline.definition.facets.filter((function(t){return t.facet_id===e.facet_id}));Ni(u[0].arguments.project_id,u[0].arguments.dashboard_id).then((function(a){t.setState({iFrameURL:a.url,iFrameLoadingDone:!0,isMetabase:!0}),t.handleMinimizeVizElement("Facet",e,!0,a.url)})).catch((function(n){console.log("browseDash error: "),console.log(n),501===n?Ei(u[0].arguments.project_id).then((function(){Ni(u[0].arguments.project_id,u[0].arguments.dashboard_id).then((function(a){t.setState({iFrameURL:a.url,iFrameLoadingDone:!0,isMetabase:!0}),t.handleMinimizeVizElement("Facet",e,!0,a.url)})).catch((function(){t.setState({visualizationOpened:!1,browseURLLoading:!1,snackbarMessage:"Error! Can not browse Dashboard.",snackbarOpen:!0,snackbarVariant:"error"})}))})).catch((function(){t.setState({visualizationOpened:!1,snackbarMessage:"Error! Can not browse Dashboard.",snackbarOpen:!0,snackbarVariant:"error",vizInitiated:!1,iFrameLoadingDone:!1,browseURLLoading:!1,iFrameURL:"",mode:"edit"})})):Ni(u[0].arguments.project_id,u[0].arguments.dashboard_id).then((function(a){t.setState({iFrameURL:a.url,iFrameLoadingDone:!0,isMetabase:!0}),t.handleMinimizeVizElement("Facet",e,!0,a.url)})).catch((function(e){t.setState({visualizationOpened:!1,snackbarMessage:"Error! Can not browse Dashboard.",snackbarOpen:!0,snackbarVariant:"error",vizInitiated:!1,iFrameLoadingDone:!1,browseURLLoading:!1,iFrameURL:"",mode:"edit"}),t.removeVizElement(t.state.vizElements[a])}))}))}}}},{key:"_peekArrow",value:function(e){var t,a=this;this.peekLinkObject=e,this.setState({mode:"peek",peekInitiated:!0,peekLoading:!0});var n="",r="",s="",o="",i={};this.state.pipeline&&void 0!==e&&(t=e,n=this.state.pipeline.pipeline_id,r=this.state.pipeline.project_id,o=t.targetPort.parent.facet_id,s=t.sourcePort.parent.facet_id,this.state.pipeline.definition.facets.map((function(e){return s===e.facet_id&&(i.source=e),o===e.facet_id&&(i.target=e),""})),this.setState({vizFacetInfo:i})),""!==n&&""!==r&&""!==s&&""!==o?Pi(n,r,s,o).then((function(e){a.peekLinkObject.handleButtonsStateDisabled(),a.setState({peekContent:e,peekLoading:!1})})).catch((function(e){501===e?Ei(r).then((function(e){Pi(n,r,s,o).then((function(e){a.peekLinkObject.handleButtonsStateDisabled(),a.setState({peekContent:e,peekLoading:!1})})).catch((function(e){a.peekLinkObject.handleButtonsStateDisabled(),a.setState({snackbarMessage:"Something went wrong. Please try again",snackbarOpen:!0,snackbarVariant:"error",mode:"edit",peekContent:{},peekInitiated:!1,peekLoading:!1})}))})).catch((function(e){a.peekLinkObject.handleButtonsStateDisabled(),a.setState({snackbarMessage:"Something went wrong. Please try again",snackbarOpen:!0,snackbarVariant:"error",mode:"edit",peekContent:{},peekInitiated:!1,peekLoading:!1})})):Pi(n,r,s,o).then((function(e){a.peekLinkObject.handleButtonsStateDisabled(),a.setState({peekContent:e,peekLoading:!1})})).catch((function(e){a.peekLinkObject.handleButtonsStateDisabled(),a.setState({snackbarMessage:"Something went wrong. Please try again",snackbarOpen:!0,snackbarVariant:"error",mode:"edit",peekContent:{},peekInitiated:!1,peekLoading:!1})}))})):this.setState({snackbarMessage:"Something went wrong. Please try again",snackbarOpen:!0,snackbarVariant:"error",mode:"edit",peekContent:{},peekInitiated:!1,peekLoading:!1})}},{key:"_deleteNode",value:function(e){!function(e){var t=[],a=e.getPorts(),n=a.in,r=a.out;if(n){var s=n.getLinks();Object.keys(s).map((function(e){return t.push(s[e])}))}if(r){var o=r.getLinks();Object.keys(o).map((function(e){return t.push(o[e])}))}e.linksRef=t,e.remove(),console.log(e),Hc.repaintCanvas()}(e);for(var t=this.state.pipeline,a=t.definition.facets,n=0;n<a.length;n++)a[n].parents=a[n].parents.filter((function(t){return t!==e.facet_id})),a[n].children=a[n].children.filter((function(t){return t!==e.facet_id}));t.definition.facets=a.filter((function(t){return t.facet_id!==e.facet_id}));var r=t.definition.arrows;r&&(t.definition.arrows=r.filter((function(t){return t.source!==e.facet_id&&t.destination!==e.facet_id}))),t.modifiedAt=ka(),this.setState(Object(Ot.a)(Object(Ot.a)({},this.state),{},{pipeline:t})),this.props.updateFlowData(t)}},{key:"updateArrowAttributes",value:function(e){if(this.state.selectedArrow){var t=this.state.selectedArrow;t.arguments=e;var a=this.state.pipeline,n=a.definition.arrows.filter((function(e){return e.source!==t.source||e.destination!==t.destination}));a.definition.arrows=[].concat(Object(jt.a)(n),[t]),a.modifiedAt=ka(),this.setState(Object(Ot.a)(Object(Ot.a)({},this.state),{},{pipeline:a})),this.props.updateFlowData(a),this.closeUpdateArrowAttributes()}}},{key:"updateNodeAttributes",value:function(e,t){if(null!==this.state.selectedNode){var a=this.state.pipeline,n=this.state.selectedNode,r=Au().getModels().filter((function(e){return e.facet_id===n.facet_id}))[0];this.setValidityOfNode(r,!0,[]),this.setUpdatedNodeName(r,this.state.selectedNodeName),n.arguments=e,n.name=this.state.selectedNodeName;var s=a.definition.facets.filter((function(e){return e.facet_id!==n.facet_id}));a.definition.facets=[].concat(Object(jt.a)(s),[n]),a.modifiedAt=ka(),this.setState(Object(Ot.a)(Object(Ot.a)({},this.state),{},{pipeline:a})),this.props.updateFlowData(a),t||this.closeUpdateNodeAttributes()}}},{key:"closeUpdateNodeAttributes",value:function(){this.toggleUpdateNodeModal(!1),this.setState({selectedNode:null})}},{key:"closeUpdateArrowAttributes",value:function(){this.toggleUpdateArrowModal(!1),this.setState({selectedArrow:null,selectedArrowArgumentTypes:null})}},{key:"validateDiagram",value:function(){return this.state.pipeline.definition.facets&&this.state.pipeline.definition.facets.length>0?this.state.pipeline.definition.facets.map(this.validateFacet.bind(this)).reduce((function(e,t){return e&&t}),!0):(this.setState({snackbarMessage:"Error! Pipeline is empty",snackbarOpen:!0,snackbarVariant:"error"}),!1)}},{key:"validateFacet",value:function(e){var t=0,a=0,n=[],r=e.chain_group,s=e.facet_group,o=e.facet_type,i=e.facet_id,l=Au().getModels().filter((function(e){return e.facet_id===i}))[0],c=this.getComponent(r,s,o),u=c.facet_arguments,d=c.in_arrow_arguments,p=c.out_arrow_arguments,m=c.facet_requirement.min_parent_count,h=!0,f=c.facet_requirement.min_parent_count,g=c.facet_requirement.min_child_count;isNaN(f)?(f=parseInt(f),e.parents.length!==f&&(h=!1,n.push("Must have ".concat(f," parent ").concat(1===f?"facet.":"facets.")))):(f=parseInt(f),e.parents.length<f&&(h=!1,n.push("Must have at least ".concat(f," parent facets.")))),isNaN(g)?(g=parseInt(g),e.children.length!==g&&(h=!1,n.push("Must have ".concat(g," child ").concat(1===g?"facet.":"facets.")))):(g=parseInt(g),e.children.length<g&&(h=!1,n.push("Must have at least ".concat(g," child facets."))));var b=this.state.pipeline.definition.arrows.filter((function(e){return e.source===i})),v=this.state.pipeline.definition.arrows.filter((function(e){return e.destination===i}));if(d.length>0)for(t=0;t<v.length;t++){var _=!1,E=v[t].arguments;Object.keys(E).map((function(e){var t=E[e];return d.filter((function(t){return t.name===e}))[0].options.map((function(e){return t===e&&(_=!0),""})),""})),_||n.push("Missing attributes for in arrow.")}if(p.length>0)for(t=0;t<b.length;t++){_=!1;var S=b[t].arguments;Object.keys(S).map((function(e){""!==(S[e]?S[e]:"")&&(_=!0)})),_||n.push("Missing attributes for out arrow.")}if(m.length>0)if(v.length>0)for(a=0;a<m.length;a++){var y=m[a],w=!1;for(t=0;t<v.length;t++){var k=v[t],j=this.state.pipeline.definition.facets.filter((function(e){return k.source===e.facet_id}))[0];if(j.chain_group===y.chain_group&&j.facet_group===y.facet_group&&j.facet_type&&y.facet_type){w=!0;break}}w||(h=!1,n.push("Missing required parent ".concat(y.chain_group,"/").concat(y.facet_group,"/").concat(y.facet_type,".")))}else for(var D=0;D<m.length;D++)h=!1,n.push("Missing required parent ".concat(m[D].chain_group,"/").concat(m[D].facet_group,"/").concat(m[D].facet_type,"."));var O=Object.keys(u);for(t=0;t<O.length;t++){var N=O[t];u[N].is_required&&(void 0!==e.arguments[N]&&""!==e.arguments[N]||"dataset_id"===N||(n.push("Missing value for attribute ".concat(ja(N),".")),h=!1))}return n.length>0&&!0===h&&(h=!1),this.setValidityOfNode(l,h,n)}},{key:"setValidityOfNode",value:function(e,t,a){return e.valid=t,e.errorMessages=a,e.fireEvent({node:e},"validatedNode"),t}},{key:"setUpdatedNodeName",value:function(e,t){return e.name=t,e.fireEvent({node:e},"updatedFacetName"),t}},{key:"showEditor",value:function(e){var t=this,a=e.facet_id,n=this.state.pipeline.definition.facets.filter((function(e){return e.facet_id===a}))[0];this.setState(Object(Ot.a)(Object(Ot.a)({},this.state),{},{selectedNode:n}),(function(){t.toggleUpdateNodeModal(!0)}))}},{key:"onUpdateModel",value:function(e){this.props.updateFlowData({attributes:e,nodeId:this.selectedNodeId}),this.toggleUpdateNodeModal(!1)}},{key:"updateTitle",value:function(e,t){var a=this.state.pipeline;a.name=e,a.modifiedAt=ka(),this.state.projectName!==t&&this.props.renameProject(this.state.projectId,t),this.props.updateFlowData(a),this.setState(Object(Ot.a)(Object(Ot.a)({},this.state),{},{pipeline:a,projectName:t}))}},{key:"updatePipelineArgument",value:function(e,t){var a=this.state.pipeline;a.definition.arguments=Object(Dt.a)({},e,t),this.props.updateFlowData(a),this.setState(Object(Ot.a)(Object(Ot.a)({},this.state),{},{pipeline:a}))}},{key:"backClickHandler",value:function(){this.props.history.push("/dashboard")}},{key:"updateSchedule",value:function(e){var t=this.state.pipeline;t.schedule=e,t.modifiedAt=ka(),this.props.updateFlowData(t),this.setState({scheduleOpened:!1})}},{key:"closeScheduleDialog",value:function(){this.setState({scheduleOpened:!1})}},{key:"getUpdateArrowComponent",value:function(){var e=this;if(this.state.selectedArrow){var t=this.state.selectedArrow.arguments;return n.createElement(zi,{open:this.state.editArrowModalOpened,attributes:t,attributesTypes:this.state.selectedArrowArgumentTypes,facetTypeTitle:"",chainGroupTitle:"",facetGroupTitle:"",title:"",facetName:"",onSubmit:function(t){e.updateArrowAttributes(t)},onCancel:function(){e.closeUpdateArrowAttributes()},createNewDatasetDialogIsOpened:this.state.createNewDatasetDialogOpened,newDatasetName:this.state.newlyAddedDatasetName,facetDocumentation:this.getComponent("","",""),handleNamingFacet:function(){return e.handleSubmitFacetName("")},nodeDetails:"",pipelineInfo:""})}}},{key:"getUpdateNodeComponent",value:function(e){var t=this;if(null!==this.state.selectedNode){var a=this.state.selectedNode,r=a.chain_group,s=a.facet_group,o=a.facet_type,i=a.custom_facet_type,l=a.name,c=a.arguments?a.arguments:{},u=("API"===i?this.getComponent("INPUT","CONNECTOR","API"):this.getComponent(r,s,o)).facet_arguments,d="".concat(ja(r)," / ").concat(ja(s)," / ").concat(ja(o));return n.createElement(zi,{user:this.props.email,facetType:o,customFacetType:i,projectId:this.state.projectId,datasets:e,dashboards:this.props.data.dashboards,open:this.state.editNodeModalOpened,attributes:c,attributesTypes:u,title:d,facetName:l,chainGroupTitle:ja(r),facetGroupTitle:ja(s),facetTypeTitle:ja(o),onSubmit:function(e,a,n){a&&t.props.getDatasets(t.state.projectId),t.updateNodeAttributes(e,n)},onCancel:function(){t.closeUpdateNodeAttributes()},handleCreateNewDataset:function(){t.handleCreateNewDataset()},createNewDatasetDialogIsOpened:this.state.createNewDatasetDialogOpened,newDatasetName:this.state.newlyAddedDatasetName,newDatasetFileName:this.state.newlyAddedDatasetFileName,clearNewDataset:function(){t.setState({newlyAddedDatasetName:"",newlyAddedDatasetFileName:""})},facetDocumentation:"API"===i?this.getComponent("INPUT","CONNECTOR","API"):this.getComponent(r,s,o),getColumnNames:function(){return t.state.columnNames},handleNamingFacet:function(e){return t.handleSubmitFacetName(e)},nodeDetails:a,pipelineInfo:this.state.pipeline})}}},{key:"handleCreateNewDataset",value:function(){this.setState({createNewDatasetDialogOpened:!0})}},{key:"getScheduleDialog",value:function(){var e=this;if(this.state.scheduleOpened)return n.createElement(sl,{open:this.state.scheduleOpened,settings:this.state.pipeline.schedule,onSubmit:function(t){e.updateSchedule(t)},onCancel:function(){e.closeScheduleDialog()},pastScheduledActions:this.state.pastScheduledActions,upcomingScheduledActions:this.state.upcomingScheduledActions})}},{key:"getVisualizeDialog",value:function(){var e=this;if(this.state.visualizationOpened)return n.createElement(cl,{status:this.state.browseStatus,open:this.state.visualizationOpened,url:this.state.iFrameURL,loading:this.state.browseURLLoading,isMetabase:this.state.isMetabase,onClose:function(){e.setState({visualizationOpened:!1})}})}},{key:"handleZoomIn",value:function(){var e=this.state.zoomScale;e+=.1,this.setState({zoomScale:e}),function(){var e=Tu().getModel();e.setZoomLevel(1.1*e.getZoomLevel()),xu()}()}},{key:"handleZoomOut",value:function(){var e=this.state.zoomScale;e>1?(e-=.1,this.setState({zoomScale:e}),Fu()):Fu()}},{key:"handleZoomToFit",value:function(){this.setState({zoomScale:1}),function(){var e=Tu(),t=e.getModel(),a=e.getCanvas();if(a){var n=0,r=0,s=9999,o=9999;Array.from(a.getElementsByClassName("node")).map((function(e){var t=e,a=t.offsetWidth,i=t.offsetHeight,l=t.offsetLeft,c=t.offsetTop;return n=Math.max(n,Math.abs(l)+a),r=Math.max(r,Math.abs(c)+i),s=Math.min(s,l),o=Math.min(o,c),e})),n-=s,r-=o;var i=a.clientWidth/n,l=a.clientHeight/r,c=i<l?i:l;c=Math.min(c,1),t.setZoomLevel(100*c),t.setOffset(.5*(a.clientWidth-n*c),.5*(a.clientHeight-r*c)),e.repaintCanvas()}}()}},{key:"getCenterContent",value:function(){var e=this;return n.createElement("div",{className:rm.a.dropArea,onDrop:function(t){var a=JSON.parse(t.dataTransfer.getData("node-data")),n=Tu().getRelativeMousePoint(t);e.addNodeCommand(a,n)},onDragOver:function(e){e.preventDefault()}},n.createElement("div",{className:"drop-area-bg",style:{transform:"scale("+this.state.zoomScale+")"}}),n.createElement("div",{className:"undo-buttons"},n.createElement(fa.a,{color:"primary",disableRipple:!0,disabled:!this._commandManager.canPerformUndo(),onClick:function(){e._commandManager.undo()}},n.createElement(nu.a,{fontSize:"inherit"})),n.createElement(fa.a,{color:"primary",disableRipple:!0,disabled:!this._commandManager.canPerformRedo(),onClick:function(){return e._commandManager.redo()}},n.createElement(su.a,{fontSize:"inherit"}))),n.createElement("div",{className:"buttons"},n.createElement(fa.a,{color:"primary",disableRipple:!0,onClick:function(){return e.handleZoomIn()}},n.createElement(Xc.a,{fontSize:"inherit"})),n.createElement(fa.a,{color:"primary",disableRipple:!0,onClick:function(){return e.handleZoomOut()}},n.createElement($c.a,{fontSize:"inherit"})),n.createElement(fa.a,{color:"primary",disableRipple:!0,onClick:function(){return e.handleZoomToFit()}},n.createElement(tu.a,{fontSize:"inherit"}))),n.createElement(Nt.CanvasWidget,{className:rm.a.rootCanvas,engine:this._engine}))}},{key:"addNodeCommand",value:function(e,t){var a=this,n=new ou((function(n){return n?a._addNode(null,null,n.attributes,n.parents,n.children,n.node,n.arrows):a._addNode(e,t)}),(function(e){var t=[],n=[],r=[],s=a.state.pipeline.definition.facets.filter((function(t){return t.facet_id===e.facet_id})),o=a.state.pipeline.definition.arrows.filter((function(t){return t.source===e.facet_id||t.destination===e.facet_id}));return s.length>0&&(t=s[0].arguments,n=s[0].parents,r=s[0].children),a._deleteNode(e),{attributes:t,node:e,children:r,parents:n,arrows:o}}));this._commandManager.addCommand(n)}},{key:"deleteNodeCommand",value:function(e){var t=this,a=new ou((function(){var a=[],n=[],r=[],s=t.state.pipeline.definition.facets.filter((function(t){return t.facet_id===e.facet_id})),o=t.state.pipeline.definition.arrows.filter((function(t){return t.source===e.facet_id||t.destination===e.facet_id}));return s.length>0&&(a=s[0].arguments,n=s[0].parents,r=s[0].children),t._deleteNode(e),{attributes:a,node:e,children:r,parents:n,arrows:o}}),(function(e){return t._addNode(null,null,e.attributes,e.parents,e.children,e.node,e.arrows)}));this._commandManager.addCommand(a)}},{key:"_addNode",value:function(e,t,a,n,r,s,o){var i,l,c=this,u=0,d=0,p=function(e,t,a){var n,r;return a?(n=a.facet_id,r=a,Gc.addNode(r),a.linksRef.length>0&&(a.linksRef.map((function(e){if(e.isConnectedToANode){var t=e.getSourcePort(),a=e.getTargetPort();e.clearPort(t),e.clearPort(a),e.setSourcePort(t),e.setTargetPort(a),Gc.addLink(e)}return e})),a.linksRef=[])):(n=Ou.toString(),r=Mu(e.facet_info.name,n,e.facet_info.facet_type,e.facet_info.facet_group,e.facet_info.chain_group,e.facet_info.custom_facet_type,e.facet_info.custom_facet_group,e.facet_info.custom_chain_group),Gc.addNode(r),t&&r.setPosition(t),Ou++),Du["facet_"+n]=r,{facet_group:r.facet_group,facet_type:r.facet_type,chain_group:r.chain_group,custom_facet_group:r.custom_facet_group,custom_facet_type:r.custom_facet_type,custom_chain_group:r.custom_chain_group,arguments:{},facet_id:n}}(e,t,s);s?i=s:(l=p.facet_id,(i=Du["facet_".concat(l)]).registerListener({editNode:function(e){c.showEditor(e.node)},deleteNode:function(e){c.deleteNodeCommand(e.node)},visualize:function(e){c._visualize(e.node)},selectionChanged:function(e){c._selectionChangedEventHandler()}}));var m=[];o&&(m=o);var h=this.state.pipeline;if(n){p.parents=n;var f=h.definition.facets;for(u=0;u<n.length;u++)for(d=0;d<f.length;d++)f[d].facet_id===n[u]&&f[d].children.push(p.facet_id)}else p.parents=[];if(r){p.children=r;var f=h.definition.facets;for(u=0;u<r.length;u++)for(d=0;d<f.length;d++)f[d].facet_id===r[u]&&f[d].parents.push(p.facet_id)}else p.children=[];return a&&(p.arguments=a),(f=h.definition.facets)?f.push(p):(f=[p],h.definition.facets=f),h.definition.arrows?h.definition.arrows=[].concat(Object(jt.a)(h.definition.arrows),Object(jt.a)(m)):h.definition.arrows=m,this._engine.repaintCanvas(),this.setState(Object(Ot.a)(Object(Ot.a)({},this.state),{},{pipeline:h})),h.pipeline_id=this.state.pipeline.pipeline_id,h.name=this.state.pipeline.name,this.props.updateFlowData(h),this.forceUpdate(),i}},{key:"getInfoContent",value:function(){var e=this;return n.createElement(Qc,{onFlowDiagramModeChanged:function(t){e.state.pipeline.pipeline_id;("interactive"!==t||e.validateDiagram())&&(e.setState({modeChangePending:!0}),"interactive"===t||e.setState({modeChangePending:!1}))},validateDiagram:this.validateDiagram.bind(this),modeChangePending:this.state.modeChangePending,response:this.props.data.response,onRun:function(){return e.onRunClick()},onSchedule:function(){return e.onScheduleClick()},title:this.state.pipeline.name,flowDiagramMode:this.state.mode,projectName:this.state.projectName,pipelineRunning:this.state.pipelineRunning||this.state.loadingLogs,pipelineLogs:this.state.pipelineLogs,pipelineLoaded:this.state.pipelineLoaded&&this.state.sessionCreated,facetDocLoaded:this.props.facetDocLoaded,editRunFlowRunning:this.state.editRunFlowRunning,onSaveTitle:function(t,a){return e.updateTitle(t,a)},pipelineSpecs:this.state.pipelineSpecs,pipelineInfo:this.state.pipeline,updatePipelineArg:function(t,a){e.updatePipelineArgument(t,a)}})}},{key:"handleFlowDiagramModeChanged",value:function(e){Au().setLocked("interactive"===e),this.setState({mode:e,modeChangePending:!1})}},{key:"getCreateNewDatasetDialog",value:function(){var e=this;return n.createElement(sc,{open:this.state.createNewDatasetDialogOpened,uploadStatus:this.props.data.uploadStatus,projectId:this.state.projectId,projectName:this.state.projectName,handleDialogClose:function(){return e.handleCreateNewDatasetDialogClose()},handleSubmit:function(t,a){return e.handleCreateNewDatasetDialogSubmit(t,a)},handleSubmitOverwrite:function(t,a){return e.handleCreateNewDatasetDialogSubmitOverwrite(t,a)},handleCancel:function(){return e.handleCreateNewDatasetDialogClose()},newDatasetNameExists:this.state.newlyAddedDatasetNameExists,dismissAlert:function(){return e.handleDismissDatasetNameExists()}})}},{key:"getCreateSessionDialog",value:function(){var e=this;return n.createElement(lc,{open:this.state.createSessionDialogOpened,handleCreate:function(){e.toggleCreateSessionDialog(!1)}})}},{key:"getStatusSnackbar",value:function(){var e=this;return n.createElement(Hu,{snackbarOpen:this.state.snackbarOpen,snackbarType:this.state.snackbarVariant,snackbarMsg:this.state.snackbarMessage,onSnackbarClose:function(){return e.handleSessionSnackbarClose()}})}},{key:"handleSessionSnackbarClose",value:function(){this.setState({snackbarOpen:!1})}},{key:"handleCreateNewDatasetDialogSubmit",value:function(e,t){var a=this,n=!1;this.props.data.datasets.map((function(t){return t.name===e&&t.project_id===a.state.projectId&&(n=!0),""})),!1!==n?this.setState({newlyAddedDatasetNameExists:!0}):(this.props.createDataset(this.state.projectId,e,t),this.setState({newlyAddedDatasetName:e,newlyAddedDatasetFileName:t.name,newlyAddedDatasetNameExists:!1}),this.handleCreateNewDatasetDialogClose())}},{key:"handleCreateNewDatasetDialogClose",value:function(){this.setState({createNewDatasetDialogOpened:!1})}},{key:"handleDismissDatasetNameExists",value:function(){this.setState({newlyAddedDatasetNameExists:!1})}},{key:"handleCreateNewDatasetDialogSubmitOverwrite",value:function(e,t){var a=this,n="",r="";this.props.data.datasets.map((function(t){return t.name===e&&t.project_id===a.state.projectId&&(n=t.dataset_id,r=t.name),""})),""!==n&&(this.props.editDataset(this.state.projectId,n,r,t),this.setState({newlyAddedDatasetName:r,newlyAddedDatasetFileName:t.name,newlyAddedDatasetNameExists:!1}),this.handleCreateNewDatasetDialogClose())}},{key:"fetchSuggestions",value:function(){var e=this;this.state.pipeline.definition.arrows.length>0&&zo({project_id:this.state.projectId,pipeline_id:this.state.pipeline.pipeline_id,source_facet_id:this.state.pipeline.definition.arrows[0].source,destination_facet_id:this.state.pipeline.definition.arrows[0].destination}).then((function(t){var a=[];t.column_names.forEach((function(e){a.push({name:e})})),e.setState({columnNames:a})})).catch((function(t){501===t?Ei(e.state.projectId).then((function(t){zo({project_id:e.state.projectId,pipeline_id:e.state.pipeline.pipeline_id,source_facet_id:e.state.pipeline.definition.arrows[0].source,destination_facet_id:e.state.pipeline.definition.arrows[0].destination}).then((function(t){var a=[];t.column_names.forEach((function(e){a.push({name:e})})),e.setState({columnNames:a})}))})).catch((function(t){e.setState({snackbarMessage:"Something went wrong. Please try again",snackbarOpen:!0,snackbarVariant:"error",mode:"edit"})})):zo({project_id:e.state.projectId,pipeline_id:e.state.pipeline.pipeline_id,source_facet_id:e.state.pipeline.definition.arrows[0].source,destination_facet_id:e.state.pipeline.definition.arrows[0].destination}).then((function(t){var a=[];t.column_names.forEach((function(e){a.push({name:e})})),e.setState({columnNames:a})}))}))}},{key:"render",value:function(){var e=this;if(this.state){var t="Loading...",a=!1;this.state.pipelineLoaded?this.props.data.datasetsLoaded?this.props.facetDocLoaded?(t="Getting pipeline ready...",(this.autoLayoutApplied=!0)&&(a=!0)):t="Loading Facets documentation...":t="Loading Datasets...":t="Loading Pipeline nodes...",!0===a&&setTimeout((function(){!0,e._isMounted&&e.setState({loadingDone:!0})}),2e3),!this.autoLayoutApplied&&this.props.facetDocLoaded&&this.props.data.datasetsLoaded&&this.state.pipelineLoaded&&this.state.sessionCreated&&this.state.pipeline.definition.facets&&this.state.pipeline.definition.facets.length>0&&(this.autoLayoutApplied=!0,Lu());var r=this.props.data.datasets.filter((function(t){return t.project_id===e.state.projectId}));this.state.pipeline.definition.facets&&this.state.pipeline.definition.facets.length,!0===this.state.iFrameLoadingDone&&!0===this.state.iFrameContentLoaded&&setTimeout((function(){e.setState({clearIframeLoader:!0})}),1500);return Object.keys(this.state.peekContent).length>0&&this.sortPeek(this.state.peekContent.rows),n.createElement(am,{_type:"sub-page",_page:"Flow",_uploadProgress:this.props.uploadProgress,_handleGoBack:function(t){return e.handleGoBack(t)},_filterSidebar:n.createElement(n.Fragment,null,n.createElement(jc,{components:this.props.componentList,facetDocLoaded:this.props.facetDocLoaded&&this.state.sessionCreated,uploadProgress:this.props.uploadProgress,backLink:"/dashboard/project/".concat(this.state.pipeline.project_id)})),_content:n.createElement(n.Fragment,null,!this.hideAutoLayoutLoading&&n.createElement(hl,{loadingTxt:t,fadeOut:this.state.loadingDone,history:this.props.history,backLink:"/dashboard/project/".concat(this.state.projectId)}),n.createElement("div",{className:this.state.mode},this.getCenterContent(),this.getUpdateNodeComponent(r),this.getUpdateArrowComponent(),this.getScheduleDialog(),this.getVisualizeDialog(),this.getCreateNewDatasetDialog(),this.getStatusSnackbar(),this.visualizationElementRender(),this.peekElementRender())),_rightSidebar:n.createElement(n.Fragment,null,this.getInfoContent()),_logoutHandler:this.props.logout})}}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.projectId,n=e.projects.filter((function(e){return e.project_id===a})),r="";n.length>0&&(r=n[0].name);var s=t.pipeline;if(t.pipeline.definition.facets){var o=t.pipeline.definition.facets,i=!1,l=!1,c=o.map((function(a){if("OUTPUT"===a.chain_group&&"DATASET"===a.facet_group&&"EXPORTED"===a.facet_type&&Object.keys(a.arguments).length>0)if(""===a.arguments.dataset_id&&""!==a.arguments.dataset_name){var n=e.data.datasets.filter((function(e){return e.project_id===t.projectId&&e.name===a.arguments.dataset_name}));n.length>0?(a.arguments.dataset_id=n[0].dataset_id,a.arguments.overwrite=!0,i=!0):(a.arguments.dataset_id="",a.arguments.overwrite=!1)}else a.arguments.dataset_id||(a.arguments.dataset_id="",a.arguments.overwrite=!1);if("OUTPUT"===a.chain_group&&"DASHBOARD"===a.facet_group&&"DASH"===a.facet_type&&Object.keys(a.arguments).length>0)if(""===a.arguments.dashboard_id&&""!==a.arguments.dashboard_name){var r=e.data.dashboards.filter((function(e){return e.project_id===t.projectId&&e.name===a.arguments.dashboard_name}));r.length>0?(a.arguments.dashboard_id=r[0].dashboard_id,a.arguments.overwrite=!0,l=!0):(a.arguments.dashboard_id="",a.arguments.overwrite=!1)}else a.arguments.dashboard_id||(a.arguments.dashboard_id="",a.arguments.overwrite=!1);return a}));(i||l)&&c.length>0&&(s.definition.facets=c,e.updateFlowData(s))}return Object(Ot.a)(Object(Ot.a)({},t),{},{projectName:r,pipeline:s})}}]),a}(n.Component),om=Object(d.c)((function(e){return{email:e.userReducerState.email,data:e.flowReducerState,facetDocLoaded:e.facetReducerState.facetDocLoaded,componentList:e.facetReducerState.componentList,projects:e.flowReducerState.projects,uploadProgress:e.flowReducerState.uploadProgress}}),(function(e){return{logout:function(){e(qe())},deleteNode:function(t){e(function(e){return{type:F,payload:e}}(t))},sendAppData:function(t){e({type:T,payload:t})},getFacetDoc:function(){e({type:V,payload:null})},fireReturnToProject:function(t){e(yt(t))},cleanSession:function(){e(wt())},updateFlowData:function(t){e(Xe(t))},renameProject:function(t,a){return e(at(t,a))},createDataset:function(t,a,n){return e(ct(t,a,n))},getDatasets:function(t){return e(ot(t))},getDashboards:function(t){return e(lt(t))},editDataset:function(t,a,n,r){return e(gt(t,a,n,r))},getSuggestions:function(t){return e(St(t))}}}))(sm),im=a(136);function lm(e){var t=e.handleSubmit,a=e.handleSubmitOverwrite,s=e.handleCancel,o=e.open,i=e.isSaveInProgress,l=e.datasetId,c=e.datasetName,u=e.newDatasetNameExists,d=e.dismissOverwriteAlert,p=r.a.useState("overwrite"),m=Object(Ht.a)(p,2),h=m[0],f=m[1],g=r.a.useState(""),b=Object(Ht.a)(g,2),v=b[0],_=b[1],E=r.a.useState(""),S=Object(Ht.a)(E,2),y=S[0],w=S[1],k=r.a.useState(""),j=Object(Ht.a)(k,2),D=j[0],O=j[1],N=r.a.useState(!1),C=Object(Ht.a)(N,2),P=C[0],I=C[1],x=function(){I(!0);var e=!1;"overwrite"===h&&(e=!0),a(l,e,v,D)},F="";return F=!0===u?c+" => "+v:c,r.a.createElement(Wa,{_open:o,_onClose:function(){return f("overwrite"),_(""),O(""),w(""),void s()},_type:"share",_icon:!1,_title:"Save Dataset",_subtitle:F,_size:"xs",_align:"left",_content:r.a.createElement(r.a.Fragment,null,!0===u?r.a.createElement(n.Fragment,null,r.a.createElement(aa,{alertType:"warning",alertContent:r.a.createElement(n.Fragment,null,r.a.createElement(Pt.a,null,r.a.createElement("span",null,"Dataset with same name already exists."),r.a.createElement("br",null),r.a.createElement("strong",null,v)),r.a.createElement(Pt.a,{mt:3},"Please note:",r.a.createElement("br",null)," All flows which contain this dataset will be reflected by this change."),r.a.createElement(Pt.a,{mt:3},r.a.createElement("strong",null,"Are you sure you want to continue and overwrite dataset?"))),alertButtons:r.a.createElement(n.Fragment,null,r.a.createElement(At.a,{onClick:function(){return d()},variant:"contained",color:"default",className:"button",disabled:P},"No, go back"),r.a.createElement(At.a,{variant:"contained",color:"primary",className:"button",onClick:function(){return x},disabled:P},P&&r.a.createElement("span",{className:"btn-spinner alternate"}),P?"Overwriting...":"Yes, overwrite"))})):r.a.createElement(Pt.a,{my:2},r.a.createElement(ga.a,{className:"radio-btn-holder with-label",component:"fieldset"},r.a.createElement(dc.a,{component:"div"},"Choose one of following options:"),r.a.createElement(pc.a,{"aria-label":"clone-type",name:"clone-type",value:h,onChange:function(e){f(e.target.value),_(""),O(""),w("")}},r.a.createElement(Yi.a,{value:"overwrite",control:r.a.createElement(qi.a,{color:"primary",size:"small"}),label:"Overwrite current Dataset"}),r.a.createElement(Yi.a,{value:"create-new",control:r.a.createElement(qi.a,{color:"primary",size:"small"}),label:"Create new Dataset"})))),!1===u&&"create-new"===h&&r.a.createElement(Pt.a,{mb:2},r.a.createElement(Na,{_label:"Name of new Dataset",_placeholder:"Enter name for new Dataset",_type:"text",_autoComplete:"new-password",_value:v,_onChange:function(e){_(e.target.value)},_characterCounter:40,_autoFocus:!0,_fullWidth:!0,_error:y}))),_actions:r.a.createElement(n.Fragment,null,r.a.createElement(ua,{_variant:"text",_color:"default",_label:"Cancel",_type:"button",_fullWidth:!1,_loading:!1,_onClick:function(){return s()}}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Save",_type:"button",_fullWidth:!1,_loading:i,_disabled:i,_onClick:function(){return function(){if("create-new"===h&&""===v)w("When creating new dataset, Name of new Dataset is required!");else{w("");var e=!1;"overwrite"===h&&(e=!0),t(l,e,v,D)}}()}}))})}var cm=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1,title:"",columnNames:[],columnNameSelected:"",uTypeSelected:"",uFormatSelected:"",isLoading:!1,colNameError:"",friendlyLabel:""},e.handleColumnNameSelect=function(t){if(null!==t&&void 0!==t&&""!==t){var a=t;e.setState({columnNameSelected:a,colNameError:""})}else e.setState({columnNameSelected:""})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=[];Object.keys(this.props.columnNames).sort().map((function(a){var n=e.props.columnNames[a],r=ja(n);return t.push({colKey:n,colVal:r}),{colKey:n,colVal:r}}));var a=ja(this.props.title);this.setState({title:this.props.title,friendlyLabel:a,columnNames:t})}},{key:"handleClose",value:function(){this.setState({title:"",uTypeSelected:"",isLoading:!1}),this.props.onCancel()}},{key:"handleSubmit",value:function(){var e=this;if("DEDUPLICATION"!==this.state.title&&""===this.state.columnNameSelected)this.setState({colNameError:"Column Name is required"});else{this.setState({isLoading:!0,colNameError:""});var t=this.state.columnNameSelected,a=this.state.uTypeSelected,n=this.state.uFormatSelected,r="";Object.keys(this.state.columnNames).map((function(a){return t===e.state.columnNames[a].colVal?r=e.state.columnNames[a].colKey:""})),this.props.onSubmit(r,a,n)}}},{key:"prepareUniformizationOption",value:function(){var e=this;return r.a.createElement(Pt.a,{mb:2},r.a.createElement(Ri.a,{container:!0,spacing:3},r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(Ga,{_required:!0,_error:this.state.colNameError,_label:"Select Column Name",_placeholder:"Type to search columns...",_value:this.state.columnNameSelected,_isMultiple:!1,_selectOptions:this.state.columnNames.sort(),_fullWidth:!0,_keyValue:"colKey",_nameValue:"colVal",_onChange:function(t,a){return e.handleColumnNameSelect(a)}}),r.a.createElement(ga.a,{className:"radio-btn-holder with-label",component:"fieldset",margin:"normal"},r.a.createElement(pc.a,{"aria-label":"clone-type",name:"clone-type"},r.a.createElement(dc.a,{component:"div"},"Type:"),Object.keys(this.props.uniformizationPreferences).length>0&&Object.keys(this.props.uniformizationPreferences.uniformization_types).map((function(t){var a=e.props.uniformizationPreferences.uniformization_types[t];return r.a.createElement(Yi.a,{value:a,key:t,control:r.a.createElement(qi.a,{color:"primary",size:"small",onClick:function(t){return e.setState({uTypeSelected:t.target.value})}}),label:ja(a)})}))))),r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(ga.a,{className:"radio-btn-holder with-label",component:"fieldset"},r.a.createElement(pc.a,{"aria-label":"clone-type",name:"clone-type"},r.a.createElement(dc.a,{component:"div"},"Format:"),""!==this.state.uTypeSelected?Object.keys(this.props.uniformizationPreferences).length>0&&Object.keys(this.props.uniformizationPreferences.uniformization_formats[this.state.uTypeSelected.toLowerCase()]).map((function(t){var a=e.props.uniformizationPreferences.uniformization_formats[e.state.uTypeSelected.toLowerCase()][t];return r.a.createElement(Yi.a,{value:a,key:t,control:r.a.createElement(qi.a,{color:"primary",size:"small",onClick:function(t){return e.setState({uFormatSelected:t.target.value})}}),label:ja(a)})})):r.a.createElement("div",{className:"default-color"},"Choose Uniformization Type first."))))))}},{key:"prepareOptionContent",value:function(e){var t=this;return"DEDUPLICATION"===e?r.a.createElement(Pt.a,{mb:2},r.a.createElement(Ri.a,{container:!0,spacing:3},r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement("span",{className:"default-color"},"Deduplication doesn't require any parameter. You are free to proceed, submit.")))):r.a.createElement(Pt.a,{mb:2},r.a.createElement(Ri.a,{container:!0,spacing:3},r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(Ga,{_required:!0,_error:this.state.colNameError,_label:"Select Column Name",_placeholder:"Type to search columns...",_value:this.state.columnNameSelected,_isMultiple:!1,_selectOptions:this.state.columnNames.sort(),_fullWidth:!0,_keyValue:"colKey",_nameValue:"colVal",_onChange:function(e,a){return t.handleColumnNameSelect(a)}}))))}},{key:"render",value:function(){var e=this,t=this.state,a=t.title,s=t.isLoading;return r.a.createElement(Wa,{_open:this.props.open,_onClose:function(){return e.handleClose()},_type:"share",_icon:!1,_title:this.state.friendlyLabel,_subtitle:"Data Prep",_size:"xs",_align:"left",_content:r.a.createElement(r.a.Fragment,null,"UNIFORMIZATION"===this.props.title?this.prepareUniformizationOption():this.prepareOptionContent(a)),_actions:r.a.createElement(n.Fragment,null,r.a.createElement(ua,{_variant:"text",_color:"default",_label:"Cancel",_type:"button",_fullWidth:!1,_loading:!1,_onClick:function(){return e.handleClose()}}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Submit",_type:"button",_fullWidth:!1,_loading:s,_disabled:s,_onClick:function(){return e.handleSubmit()}}))})}}]),a}(n.Component),um=a(281),dm=a.n(um),pm=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).hideAutoLayoutLoadingTimeout=-1,e.datasetName="",e.loadingRetryCounter=0,e.state={isLoaded:!1,metabaseSessionActive:!1,projectId:"",projectName:"",datasetId:"",datasetName:"",datasetHeader:[],iFrameURL:"",iFrameContentLoaded:!1,iframeKey:0,metabaseContent:"",tabValue:0,dataPrepOptions:[],isDataprepDialogOpen:!1,uniformizationPreferences:{},selectedDataprepName:"",snackbarOpen:!1,snackbarMessage:null,snackbarType:"",hideAutoLayoutLoading:!1,loadingDone:!1,loadingTxt:"",statusState:"",statusTxt:"",statusDatetime:"",saveDialogOpen:!1,isSaveInProgress:!1,newDatasetNameExists:!1,goBackAnchor:null,updateOrSave:""},e.checkMetabaseSession=function(){var t=Object(im.a)(cr.a.mark((function t(a,n){return cr.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loadingTxt:"Session expired. Re-connecting..."}),t.next=3,Ei(n).then((function(t){e.initialLoading(a,n,t)}));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.handleReloadIFrame=function(){setTimeout((function(){e.setState({loadingTxt:"Finalizing view...",loadingDone:!0})}),4500)},e.handleGoBack=function(t){"update"===e.state.updateOrSave?e.setGoBackAnchorEl(t.currentTarget):e.props.history.push("/dashboard/project/".concat(e.state.projectId))},e.handleGoBackPopupClose=function(){e.setState({goBackAnchor:null})},e.handleGoBackPopupCloseAndExit=function(){e.setState({goBackAnchor:null}),e.props.history.push("/dashboard/project/".concat(e.state.projectId))},e.handleGoBackPopupSaveAndExit=function(){_i(e.state.datasetId,0,e.datasetName).then((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Saved Dataset succesfully")),snackbarType:"success",snackbarOpen:!0}),e.props.history.push("/dashboard/project/".concat(e.state.projectId))})).catch((function(t){501===t?Ei(e.state.projectId).then((function(t){_i(e.state.datasetId,0,e.datasetName).then((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Saved Dataset succesfully")),snackbarType:"success",snackbarOpen:!0}),e.props.history.push("/dashboard/project/".concat(e.state.projectId))})).catch((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Please try again")),snackbarType:"error",snackbarOpen:!0}),e.props.history.push("/dashboard/project/".concat(e.state.projectId))}))})).catch((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Please try again")),snackbarType:"error",snackbarOpen:!0}),e.props.history.push("/dashboard/project/".concat(e.state.projectId))})):_i(e.state.datasetId,0,e.datasetName).then((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Saved Dataset succesfully")),snackbarType:"success",snackbarOpen:!0}),e.props.history.push("/dashboard/project/".concat(e.state.projectId))})).catch((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Please try again")),snackbarType:"error",snackbarOpen:!0}),e.props.history.push("/dashboard/project/".concat(e.state.projectId))}))}))},e.handleDataPrepDialogOpen=function(t){e.setState({selectedDataprepName:t,isDataprepDialogOpen:!0})},e.handleDataprepDialogSubmit=function(t,a,s){var o=e.state.datasetId,i=e.state.projectId,l=e.state.selectedDataprepName,c=ka();vi(o,0,l,t,a,s).then((function(t){e.setState({isDataprepDialogOpen:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Dataset has been updated succesfully")),snackbarType:"success",snackbarOpen:!0,loadingTxt:"Re-loading dataset...",hideAutoLayoutLoading:!1,loadingDone:!0,iFrameContentLoaded:!1,iframeKey:e.state.iframeKey+1,statusState:"success",statusTxt:e.state.selectedDataprepName,statusDatetime:c,updateOrSave:"update"})})).catch((function(u){501===u?Ei(i).then((function(i){vi(o,0,l,t,a,s).then((function(t){e.setState({isDataprepDialogOpen:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Dataset has been updated succesfully")),snackbarType:"success",snackbarOpen:!0,loadingTxt:"Re-loading dataset...",hideAutoLayoutLoading:!1,loadingDone:!0,iFrameContentLoaded:!1,iframeKey:e.state.iframeKey+1,statusState:"success",statusTxt:e.state.selectedDataprepName,statusDatetime:c,updateOrSave:"update"})})).catch((function(t){e.setState({isDataprepDialogOpen:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Please try again")),snackbarType:"error",snackbarOpen:!0,statusState:"error",statusTxt:e.state.selectedDataprepName,statusDatetime:c})}))})).catch((function(t){e.setState({isDataprepDialogOpen:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Please try again")),snackbarType:"error",snackbarOpen:!0,statusState:"error",statusTxt:e.state.selectedDataprepName,statusDatetime:c})})):vi(o,0,l,t,a,s).then((function(t){e.setState({isDataprepDialogOpen:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Dataset has been updated succesfully")),snackbarType:"success",snackbarOpen:!0,loadingTxt:"Re-loading dataset...",hideAutoLayoutLoading:!1,loadingDone:!0,iFrameContentLoaded:!1,iframeKey:e.state.iframeKey+1,statusState:"success",statusTxt:e.state.selectedDataprepName,statusDatetime:c,updateOrSave:"update"})})).catch((function(t){e.setState({isDataprepDialogOpen:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Please try again")),snackbarType:"error",snackbarOpen:!0,statusState:"error",statusTxt:e.state.selectedDataprepName,statusDatetime:c})}))}))},e.handleDataprepDialogCancel=function(){e.setState({isDataprepDialogOpen:!1})},e.handleSnackbarClose=function(){e.setState({snackbarOpen:!1})},e.handleSaveDialogOpen=function(){e.setState({saveDialogOpen:!0})},e.handleSaveDialogClose=function(){e.setState({saveDialogOpen:!1})},e.handleSaveDataset=function(t,a,s,o){e.setState({isSaveInProgress:!0});var i=!1;if(!1===a)Jo(e.state.projectId).then((function(a){a.map((function(t){return t.name===s&&t.project_id===e.state.projectId&&(e.setState({newDatasetNameExists:!0}),i=!0,t.dataset_id),""})),!1===i?_i(t,0,s).then((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Saved Dataset succesfully")),snackbarType:"success",snackbarOpen:!0,updateOrSave:"save"})})).catch((function(a){501===a?Ei(e.state.projectId).then((function(a){_i(t,0,s).then((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Saved Dataset succesfully")),snackbarType:"success",snackbarOpen:!0,updateOrSave:"save"})})).catch((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Please try again")),snackbarType:"error",snackbarOpen:!0})}))})).catch((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Please try again")),snackbarType:"error",snackbarOpen:!0})})):_i(t,0,s).then((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Saved Dataset succesfully")),snackbarType:"success",snackbarOpen:!0,updateOrSave:"save"})})).catch((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Please try again")),snackbarType:"error",snackbarOpen:!0})}))})):e.setState({isSaveInProgress:!1})})).catch((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Please try again")),snackbarType:"error",snackbarOpen:!0})}));else{var l=e.datasetName;_i(t,0,l).then((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Saved Dataset succesfully")),snackbarType:"success",snackbarOpen:!0,updateOrSave:"save"})})).catch((function(a){501===a?Ei(e.state.projectId).then((function(a){_i(t,0,l).then((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Saved Dataset succesfully")),snackbarType:"success",snackbarOpen:!0,updateOrSave:"save"})})).catch((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Please try again")),snackbarType:"error",snackbarOpen:!0})}))})).catch((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Please try again")),snackbarType:"error",snackbarOpen:!0})})):_i(t,0,l).then((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Saved Dataset succesfully")),snackbarType:"success",snackbarOpen:!0,updateOrSave:"save"})})).catch((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Please try again")),snackbarType:"error",snackbarOpen:!0})}))}))}},e.handleDismissOverwriteDataset=function(){e.setState({newDatasetNameExists:!1})},e.handleSaveOverwriteDataset=function(t,a,s,o){e.setState({isSaveInProgress:!0});var i=!1;!1===a&&Jo(e.state.projectId).then((function(a){a.map((function(t){return t.name===s&&t.project_id===e.state.projectId&&(e.setState({newDatasetNameExists:!0}),i=!0,t.dataset_id),""})),!0===i&&_i(t,0,s).then((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Saved Dataset succesfully")),snackbarType:"success",snackbarOpen:!0,updateOrSave:"save"})})).catch((function(a){501===a?Ei(e.state.projectId).then((function(a){_i(t,0,s).then((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Saved Dataset succesfully")),snackbarType:"success",snackbarOpen:!0,updateOrSave:"save"})})).catch((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Please try again")),snackbarType:"error",snackbarOpen:!0})}))})).catch((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Please try again")),snackbarType:"error",snackbarOpen:!0})})):_i(t,0,s).then((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Saved Dataset succesfully")),snackbarType:"success",snackbarOpen:!0,updateOrSave:"save"})})).catch((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Please try again")),snackbarType:"error",snackbarOpen:!0})}))}))})).catch((function(t){e.setState({saveDialogOpen:!1,newDatasetNameExists:!1,isSaveInProgress:!1,snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Please try again")),snackbarType:"error",snackbarOpen:!0})}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(im.a)(cr.a.mark((function e(){var t,a,n,r=this;return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.match.params.id,a="","",n="","",this.setState({loadingTxt:"Loading Dataset info..."}),this.props.fireReturnToProject("dataset"),pi(t).then((function(e){n=e.dataset.name,r.datasetName=n,a=e.dataset.project_id,r.initialLoading(t,a,r.props.metabaseLoginId)}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=this;(function(e,t){var a={dataset_id:e,project_id:t};return new Promise((function(e,t){Ye.post("/finish-browse-dataset",a).then((function(a){200===a.status?e(a.data.url):t(a.status)})).catch((function(e){t(e)}))}))})(this.state.datasetId,this.state.projectId).then((function(t){var a="";if(e.props.history.location.pathname){a=e.props.history.location.pathname;var n="";e.state.projectId&&(n=e.state.projectId),"/dashboard/projects"!==a&&"/dashboard/profile"!==a||Si(n).then((function(t){e.props.cleanSession()})).catch((function(t){e.props.cleanSession()}))}})).catch((function(t){var a="";if(e.props.history.location.pathname){a=e.props.history.location.pathname;var n="";e.state.projectId&&(n=e.state.projectId),"/dashboard/projects"!==a&&"/dashboard/profile"!==a||Si(n).then((function(t){e.props.cleanSession()})).catch((function(t){e.props.cleanSession()}))}}))}},{key:"initialLoading",value:function(){var e=Object(im.a)(cr.a.mark((function e(t,a,s){var o,i,l,c,u,d=this;return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=t,i=a,l=s,c="","",u="",{},this.setState({loadingTxt:"Fetching Dataset content..."}),""!==l||void 0!==l?Yo(i).then((function(e){c=e.project.name,d.setState({loadingTxt:"Building Dataset component..."}),fi(o,i).then((function(e){var t=(u=e).split("--"),a=t[0].split("/"),n=(a[a.length-1],t[1].split("/"));n[n.length-1];d.setState({loadingTxt:"Working on details...",iFrameURL:f+""+u});var r=[];bi(o).then((function(e){e.column_names&&Object.keys(e.column_names).map((function(t){return r.push(e.column_names[t]),""}))})).catch((function(e){bi(o).then((function(e){e.column_names&&Object.keys(e.column_names).map((function(t){return r.push(e.column_names[t]),""}))})).catch((function(e){}))})),d.setState({loadingTxt:"Preparing Dataset view..."}),gi().then((function(e){var t={};t.uniformization_types=e.data.uniformization_types,t.uniformization_formats=e.data.uniformization_formats,d.setState({projectId:i,projectName:c,datasetId:o,datasetName:"",datasetHeader:r,dataPrepOptions:e.data.options,uniformizationPreferences:t,loadingTxt:"Finalizing view...",loadingDone:!0})})).catch((function(e){gi().then((function(e){var t={};t.uniformization_types=e.data.uniformization_types,t.uniformization_formats=e.data.uniformization_formats,d.setState({projectId:i,projectName:c,datasetId:o,datasetName:"",datasetHeader:r,dataPrepOptions:e.data.options,uniformizationPreferences:t,loadingTxt:"Finalizing view...",loadingDone:!0})})).catch((function(e){}))}))})).catch((function(e){e.response?501===e.response.status?d.loadingRetryCounter<2?(d.loadingRetryCounter++,d.checkMetabaseSession(o,i)):(d.setState({snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Redirecting back to Datasets...")),snackbarType:"error",snackbarOpen:!0,statusState:"error",loadingDone:!0,iFrameContentLoaded:!0}),setTimeout((function(){d.props.history.push("/dashboard/project/".concat(i))}),3e3)):fi(o,i).then((function(e){var t=(u=e).split("--"),a=t[0].split("/"),n=(a[a.length-1],t[1].split("/"));n[n.length-1];d.setState({loadingTxt:"Working on details...",iFrameURL:f+""+u});var r=[];bi(o).then((function(e){e.column_names&&Object.keys(e.column_names).map((function(t){return r.push(e.column_names[t]),""}))})).catch((function(e){bi(o).then((function(e){e.column_names&&Object.keys(e.column_names).map((function(t){return r.push(e.column_names[t]),""}))})).catch((function(e){}))})),d.setState({loadingTxt:"Preparing Dataset view..."}),gi().then((function(e){var t={};t.uniformization_types=e.data.uniformization_types,t.uniformization_formats=e.data.uniformization_formats,d.setState({projectId:i,projectName:c,datasetId:o,datasetName:"",datasetHeader:r,dataPrepOptions:e.data.options,uniformizationPreferences:t,loadingTxt:"Finalizing view...",loadingDone:!0})})).catch((function(e){gi().then((function(e){var t={};t.uniformization_types=e.data.uniformization_types,t.uniformization_formats=e.data.uniformization_formats,d.setState({projectId:i,projectName:c,datasetId:o,datasetName:"",datasetHeader:r,dataPrepOptions:e.data.options,uniformizationPreferences:t,loadingTxt:"Finalizing view...",loadingDone:!0})})).catch((function(e){}))}))})).catch((function(e){d.setState({snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Redirecting back to Datasets...")),snackbarType:"error",snackbarOpen:!0,statusState:"error",loadingDone:!0,iFrameContentLoaded:!0}),setTimeout((function(){d.props.history.push("/dashboard/project/".concat(i))}),3e3)})):fi(o,i).then((function(e){var t=(u=e).split("--"),a=t[0].split("/"),n=(a[a.length-1],t[1].split("/"));n[n.length-1];d.setState({loadingTxt:"Working on details...",iFrameURL:f+""+u});var r=[];bi(o).then((function(e){e.column_names&&Object.keys(e.column_names).map((function(t){return r.push(e.column_names[t]),""}))})).catch((function(e){bi(o).then((function(e){e.column_names&&Object.keys(e.column_names).map((function(t){return r.push(e.column_names[t]),""}))})).catch((function(e){}))})),d.setState({loadingTxt:"Preparing Dataset view..."}),gi().then((function(e){var t={};t.uniformization_types=e.data.uniformization_types,t.uniformization_formats=e.data.uniformization_formats,d.setState({projectId:i,projectName:c,datasetId:o,datasetName:"",datasetHeader:r,dataPrepOptions:e.data.options,uniformizationPreferences:t,loadingTxt:"Finalizing view...",loadingDone:!0})})).catch((function(e){gi().then((function(e){var t={};t.uniformization_types=e.data.uniformization_types,t.uniformization_formats=e.data.uniformization_formats,d.setState({projectId:i,projectName:c,datasetId:o,datasetName:"",datasetHeader:r,dataPrepOptions:e.data.options,uniformizationPreferences:t,loadingTxt:"Finalizing view...",loadingDone:!0})})).catch((function(e){}))}))})).catch((function(e){d.setState({snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Redirecting back to Datasets...")),snackbarType:"error",snackbarOpen:!0,statusState:"error",loadingDone:!0,iFrameContentLoaded:!0}),setTimeout((function(){d.props.history.push("/dashboard/project/".concat(i))}),3e3)}))}))})):this.loadingRetryCounter<3?(this.loadingRetryCounter++,this.checkMetabaseSession(o,i)):(this.setState({snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Redirecting back to Datasets...")),snackbarType:"error",snackbarOpen:!0,statusState:"error",loadingDone:!0,iFrameContentLoaded:!0}),setTimeout((function(){d.props.history.push("/dashboard/project/".concat(i))}),3e3));case 9:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"setGoBackAnchorEl",value:function(e){this.setState({goBackAnchor:e})}},{key:"onChangeTabs",value:function(e){this.setState({tabValue:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.projectId,s=t.projectName,o=t.iFrameURL,i=t.iFrameContentLoaded,l=t.dataPrepOptions,c=t.tabValue,u=t.iframeKey,d=t.loadingTxt,p=t.hideAutoLayoutLoading,m=t.loadingDone,h=t.statusState,f=t.statusTxt,g=t.statusDatetime,b=!1;return i&&m&&(b=!0),r.a.createElement(n.Fragment,null,r.a.createElement(am,{_type:"sub-page",_page:"Dataset",_uploadProgress:this.props.uploadProgress,_handleGoBack:function(t){return e.handleGoBack(t)},_content:r.a.createElement(r.a.Fragment,null,!p&&r.a.createElement(hl,{loadingTxt:d,fadeOut:b,history:this.props.history,backLink:"/dashboard/project/".concat(a)}),r.a.createElement("div",{className:dm.a.centralPanel},r.a.createElement("iframe",{title:"iKigai",key:u,width:"100%",height:"100%",className:dm.a.metabaseIframe,onLoad:function(){m&&e.setState({iFrameContentLoaded:!0})},src:o,sandbox:"allow-same-origin allow-scripts allow-popups allow-forms"}))),_rightSidebar:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"info-drawer-root"},r.a.createElement("div",{className:"info-drawer-section"},r.a.createElement("div",{className:"info-drawer-title"},r.a.createElement("span",{className:"title"},"Info")),r.a.createElement("div",{className:"info-drawer-title-group"},r.a.createElement("div",{className:"info-drawer-title-title"},"Dataset name:"),r.a.createElement("div",{className:"info-drawer-title-subtitle clip-txt"},this.datasetName)),r.a.createElement("div",{className:"info-drawer-title-group"},r.a.createElement("div",{className:"info-drawer-title-title"},"Project name:"),r.a.createElement("div",{className:"info-drawer-title-subtitle clip-txt"},s))),r.a.createElement("div",{className:"info-drawer-section"},r.a.createElement("div",{className:"info-drawer-title"},r.a.createElement("span",{className:"title"},"Actions")),r.a.createElement("div",{className:"prexel-act-h"},r.a.createElement("div",{hidden:0!==c},r.a.createElement(Pt.a,{my:2},l.map((function(t){return r.a.createElement(ga.a,{margin:"dense",key:t,fullWidth:!0},r.a.createElement(ua,{_variant:"contained",_color:"default",_label:ja(t),_type:"button",_align:"left",_fullWidth:!0,_loading:!1,_onClick:function(){return e.handleDataPrepDialogOpen(t)}}))}))))),r.a.createElement(Pt.a,null,r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Save changes",_type:"button",_align:"left",_fullWidth:!0,_loading:!1,_startIcon:r.a.createElement(xc.a,null),_onClick:function(){return e.handleSaveDialogOpen()}}))),r.a.createElement("div",{className:"info-drawer-section status-section-dataset"},r.a.createElement("div",{className:"info-drawer-title"},r.a.createElement("span",{className:"title"},"Status")),""!==f&&r.a.createElement(Pt.a,{mt:2,className:"status-holder"},r.a.createElement("div",{className:"success"===h?"status-row fade-in success":"status-row fade-in failed"},r.a.createElement("div",{className:"status-icon"},"success"===h?r.a.createElement(Lc.a,{fontSize:"small"}):r.a.createElement(zc.a,{fontSize:"small"})),r.a.createElement("div",{className:"status-data"},r.a.createElement("div",{className:"status-timestamp clip-txt"},g),r.a.createElement("div",{className:"status-user clip-txt"},ja(f)),r.a.createElement("div",{className:"status-run_type clip-txt"}),r.a.createElement("div",{className:"status-message clip-txt"}))))))),_logoutHandler:this.props.logout}),this.state.isDataprepDialogOpen&&""!==this.state.selectedDataprepName&&this.state.datasetHeader&&r.a.createElement(cm,{open:this.state.isDataprepDialogOpen,title:this.state.selectedDataprepName,columnNames:this.state.datasetHeader,uniformizationPreferences:this.state.uniformizationPreferences,onSubmit:function(t,a,n){return e.handleDataprepDialogSubmit(t,a,n)},onCancel:this.handleDataprepDialogCancel}),r.a.createElement(Hu,{snackbarOpen:this.state.snackbarOpen,snackbarType:this.state.snackbarType,snackbarMsg:this.state.snackbarMessage,onSnackbarClose:this.handleSnackbarClose}),r.a.createElement(lm,{open:this.state.saveDialogOpen,isSaveInProgress:this.state.isSaveInProgress,datasetId:this.state.datasetId,datasetName:this.datasetName,handleCancel:this.handleSaveDialogClose,handleSubmit:function(t,a,n,r){return e.handleSaveDataset(t,a,n,r)},newDatasetNameExists:this.state.newDatasetNameExists,dismissOverwriteAlert:function(){return e.handleDismissOverwriteDataset()},handleSubmitOverwrite:function(t,a,n,r){return e.handleSaveOverwriteDataset(t,a,n,r)}}),r.a.createElement(sd.a,{open:null!==this.state.goBackAnchor,anchorEl:this.state.goBackAnchor,onClose:function(){return e.handleGoBackPopupClose()},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"center"}},r.a.createElement("div",{className:dm.a.gobackPopupContainer},r.a.createElement("div",{className:"goback-popup-title"},"Are you sure?"),r.a.createElement("div",{className:"goback-popup-content-txt"},r.a.createElement("div",null,"It seems you made some changes to this dataset."),r.a.createElement("div",null,"Do you want to save changes before leaving?")),r.a.createElement("div",{className:"goback-popup-buttons"},r.a.createElement(ua,{_variant:"contained",_color:"default",_label:"No, just Exit",_type:"button",_fullWidth:!1,_loading:!1,_onClick:function(){return e.handleGoBackPopupCloseAndExit()}}),r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Yes, Save and Exit",_type:"button",_fullWidth:!1,_loading:!1,_onClick:function(){return e.handleGoBackPopupSaveAndExit()}})))))}}]),a}(n.Component),mm=Object(d.c)((function(e){return{data:e.flowReducerState,email:e.userReducerState.email,metabaseLogin:e.flowReducerState.metabaseLogin,metabaseLoginId:e.flowReducerState.metabaseLoginId,uploadProgress:e.flowReducerState.uploadProgress}}),(function(e){return{logout:function(){e(qe())},enterSession:function(t){e(Et(t))},fireReturnToProject:function(t){e(yt(t))},cleanSession:function(){e(wt())}}}))(pm),hm=a(359),fm=a.n(hm),gm=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).loadingRetryCounter=0,e.state={dashId:"",projectId:"",projectName:"",browseStatus:"",sessionCreated:!1,createSessionDialogOpened:!1,snackbarOpen:!1,snackbarType:"",snackbarMessage:null,visualizationOpened:!1,dashLoaded:!1,dashurl:"",loadingTxt:"Loading...",iFrameContentLoaded:!1,statusDatetime:"",statusTxt:"",dashData:{},hideAutoLayoutLoading:!1},e.checkSession=function(){var t=Object(im.a)(cr.a.mark((function t(a,n){return cr.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loadingTxt:"Session expired. Re-connecting..."}),t.next=3,Ei(n).then((function(t){e.initialLoading(a,n)}));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.handleSnackbarClose=function(){e.setState({snackbarOpen:!1})},e.handleGoBack=function(t){e.props.history.push("/dashboard/project/".concat(e.state.projectId))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(im.a)(cr.a.mark((function e(){var t,a,s,o=this;return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.match.params.id,a="",s="",this.setState({loadingTxt:"Loading Dashboard...",dashId:t}),this.props.fireReturnToProject("dash"),mi(t).then((function(e){a=e.dashboard.project_id,o.setState({dashData:e.dashboard}),Yo(a).then((function(e){s=e.project.name,o.setState({projectName:s})})),o.props.getDatasets(a),o.initialLoading(t,a)})).catch((function(){o.setState({snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Please try again")),snackbarType:"error",snackbarOpen:!0})}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initialLoading",value:function(){var e=Object(im.a)(cr.a.mark((function e(t,a){var s,o,i=this;return cr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=t,o=a,this.setState({projectId:o}),Ni(o,t).then((function(e){i.setState({loadingTxt:"Working on details..."}),setTimeout((function(){i.setState({loadingTxt:"Finalizing view...",dashLoaded:!0,dashurl:e.url})}),3e3)})).catch((function(e){i.loadingRetryCounter<3&&501===e?(i.loadingRetryCounter++,i.checkSession(s,o)):(i.setState({snackbarMessage:r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"msg"},"Something went wrong. Please try again")),snackbarType:"error",snackbarOpen:!0,dashLoaded:!0,iFrameContentLoaded:!0}),setTimeout((function(){i.props.history.push("/dashboard/project/".concat(a))}),3e3))}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=this;ji(this.state.dashId,this.state.projectId).then((function(t){var a="";if(e.props.history.location.pathname){a=e.props.history.location.pathname;var n="";e.state.projectId&&(n=e.state.projectId),"/dashboard/projects"!==a&&"/dashboard/profile"!==a||Si(n).then((function(t){e.props.cleanSession()})).catch((function(t){e.props.cleanSession()}))}})).catch((function(e){}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.dashurl,s=t.loadingTxt,o=t.dashLoaded,i=t.dashData,l=t.iFrameContentLoaded,c=t.projectName,u=this.props.data,d=u.datasets,p=u.datasetsLoaded;if(this.state){var m=!1;return l&&o&&(m=!0),r.a.createElement(n.Fragment,null,r.a.createElement(am,{_type:"sub-page",_page:"Dashboard",_uploadProgress:this.props.uploadProgress,_handleGoBack:function(t){return e.handleGoBack(t)},_content:r.a.createElement(r.a.Fragment,null,!this.state.hideAutoLayoutLoading&&r.a.createElement(hl,{loadingTxt:s,fadeOut:m,history:this.props.history,backLink:"/dashboard/project/".concat(this.state.projectId)}),r.a.createElement("div",{className:fm.a.dashCentralPanel},r.a.createElement("iframe",{title:"iKigai",key:0,width:"100%",height:"100%",className:fm.a.metabaseIframe,onLoad:function(){o&&e.setState({iFrameContentLoaded:!0})},src:a,sandbox:"allow-same-origin allow-scripts allow-popups allow-forms"}))),_rightSidebar:r.a.createElement("div",{className:"info-drawer-root"},r.a.createElement("div",{className:"info-drawer-section"},r.a.createElement("div",{className:"info-drawer-title"},r.a.createElement("span",{className:"title"},"Info")),r.a.createElement("div",{className:"info-drawer-title-group"},r.a.createElement("div",{className:"info-drawer-title-title"},"Project name:"),r.a.createElement("div",{className:"info-drawer-title-subtitle clip-txt"},c)),r.a.createElement("div",{className:"info-drawer-title-group"},r.a.createElement("div",{className:"info-drawer-title-title"},"Dashboard Id:"),r.a.createElement("div",{className:"info-drawer-title-subtitle clip-txt"},i.dashboard_id)),r.a.createElement("div",{className:"info-drawer-title-group"},r.a.createElement("div",{className:"info-drawer-title-title"},"Dashboard name:"),r.a.createElement("div",{className:"info-drawer-title-subtitle clip-txt"},i.name)),r.a.createElement("div",{className:"info-drawer-title-group"},r.a.createElement("div",{className:"info-drawer-title-title"},"Datasets Linked:"),i.dataset_id&&p&&i.dataset_id.map((function(e,t){return r.a.createElement("div",{className:"info-drawer-title-subtitle clip-txt",key:"dash-assoc-data-"+t},d.filter((function(t){return t.dataset_id===e}))[0].name)}))))),_logoutHandler:this.props.logout}),r.a.createElement(Hu,{snackbarOpen:this.state.snackbarOpen,snackbarType:this.state.snackbarType,snackbarMsg:this.state.snackbarMessage,onSnackbarClose:this.handleSnackbarClose}))}}}]),a}(n.Component),bm=Object(d.c)((function(e){return{data:e.flowReducerState,email:e.userReducerState.email,metabaseLogin:e.flowReducerState.metabaseLogin,metabaseLoginId:e.flowReducerState.metabaseLoginId,uploadProgress:e.flowReducerState.uploadProgress}}),(function(e){return{logout:function(){e(qe())},enterSession:function(t){e(Et(t))},getDatasets:function(t){return e(ot(t))},fireReturnToProject:function(t){e(yt(t))},cleanSession:function(){e(wt())}}}))(gm),vm=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={open:!1},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return n.createElement(n.Fragment,null,n.createElement(am,{_appData:this.props.data,_historyData:this.props.history,_matchData:this.props.match,_email:this.props.email,_uploadProgress:this.props.uploadProgress,_logoutHandler:this.props.logout}))}}]),a}(n.Component),_m=Object(d.c)((function(e){return{data:e.flowReducerState,flowsLoadedError:e.flowReducerState.flowsLoaded,flowsLoaded:e.flowReducerState.flowsLoadedError,uploadProgress:e.flowReducerState.uploadProgress,email:e.userReducerState.email}}),(function(e){return{logout:function(){return e(qe())},deleteDataset:function(t){return e(mt(t))}}}))(vm),Em=a(1071),Sm=a(363),ym=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(Pd.a,null,r.a.createElement("h1",{className:this.props.classes.title},"Hello there!"),r.a.createElement("div",{className:this.props.classes.gridRoot},r.a.createElement(Ri.a,{item:!0,xs:6},r.a.createElement(Ri.a,{container:!0,justify:"flex-start"},r.a.createElement(kl.a,{to:"/dashboard",className:this.props.classes.link},r.a.createElement(Sm.a,{className:this.props.classes.root},r.a.createElement(Dp.a,{variant:"h5",component:"h3"},"Dashboard")))))))}}]),a}(n.Component),wm=Object(Em.a)((function(e){return console.log(e),{link:{width:"100%"},gridRoot:{flexGrow:1,marginTop:e.spacing(10)},title:{marginTop:20,marginBottom:20,textAlign:"center"},root:{padding:e.spacing(5,2)}}}))(ym),km=(Object(d.c)((function(e){}),(function(e){}))(wm),a(1148)),jm=a(1149),Dm=a(1150),Om=a(99),Nm=a.n(Om),Cm=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).loadingInProgress=!1,e.state={emailValidation:!1,passwordValidation:!1,emailValue:"",passwordValue:"",emailErrorMsg:"",passErrorMsg:"",showPassword:!0},e.handleEmailChange=function(t){e.setState({emailValue:t.target.value})},e.handlePassChange=function(t){e.setState({passwordValue:t.target.value})},e.handleClickShowPassword=function(t){!0===e.state.showPassword?e.setState({showPassword:!1}):e.setState({showPassword:!0})},e.handleSignInFormSubmit=function(t){e.loadingInProgress=!0,t.preventDefault();var a=!1,n=!1;setTimeout((function(){""!==e.state.emailValue?!0===Zl.validate(e.state.emailValue)?(e.setState({emailValidation:!1,emailErrorMsg:""}),a=!0):(e.setState({emailValidation:!0,emailErrorMsg:"Invalid email"}),e.loadingInProgress=!1):(e.setState({emailValidation:!0,emailErrorMsg:"Email is required"}),e.loadingInProgress=!1),""!==e.state.passwordValue?(e.setState({passwordValidation:!1,passErrorMsg:""}),n=!0):(e.setState({passwordValidation:!0,passErrorMsg:"Password is required"}),e.loadingInProgress=!1),!0===a&&!0===n?(e.props.authenticate(e.state.emailValue,e.state.passwordValue),!1===e.props.isLoggedIn&&(e.loadingInProgress=!1)):e.loadingInProgress=!1}),1e3)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;""===this.state.emailErrorMsg&&""===this.state.passErrorMsg||(this.loadingInProgress=!1);var t=this.state,a=t.emailValue,s=t.passwordValue,o=t.emailErrorMsg,i=t.passErrorMsg,l=t.showPassword,c=this.props,u=c.loginSubmitErrorMsg;return c.isLoggedIn&&this.props.history.push("/dashboard"),r.a.createElement(n.Fragment,null,!0===this.loadingInProgress&&r.a.createElement("div",{className:Nm.a.mask}),r.a.createElement(Pd.a,{className:Nm.a.mainContainer,component:"main",maxWidth:"xs"},r.a.createElement(km.a,null),r.a.createElement("div",{className:Nm.a.box},r.a.createElement("div",{className:Nm.a.logoHolder},r.a.createElement(ml,null)),r.a.createElement(Pt.a,{mb:1},r.a.createElement(Dp.a,{component:"h1",variant:"h5",className:Nm.a.mainTitle},"Sign in"),r.a.createElement(jm.a,{className:Nm.a.subtitleDivider,variant:"middle"})),r.a.createElement(Dp.a,{className:Nm.a.subtitle,component:"div",variant:"caption"},"Welcome back! ",r.a.createElement("br",null)," Sign in to access IkigaiLabs dashboard"),r.a.createElement("form",{className:Nm.a.loginForm,autoComplete:"off",noValidate:!0,onSubmit:function(t){return e.handleSignInFormSubmit(t)}},r.a.createElement(Na,{_label:"Email",_placeholder:"Enter Your Email address",_type:"search",_autoComplete:"new-username",_value:a,_onChange:function(t){return e.handleEmailChange(t)},_error:o,_required:!0,_fullWidth:!0,_autoFocus:!0}),r.a.createElement(Na,{_label:"Password",_placeholder:"Enter Your Password",_type:l?"password":"text",_autoComplete:"new-password",_value:s,_onChange:function(t){return e.handlePassChange(t)},_error:i,_required:!0,_fullWidth:!0,_endIcon:{_withButton:!0,_icon:r.a.createElement(n.Fragment,null,l?r.a.createElement(Fd.a,{fontSize:"small"}):r.a.createElement(pu.a,{fontSize:"small"})),_position:"end",_edge:"end",_size:"small",_onClick:function(t){return e.handleClickShowPassword(t)}}}),""!==u&&r.a.createElement(Pt.a,{mt:4,mb:4},r.a.createElement("div",{className:Nm.a.submitError},u)),r.a.createElement(Pt.a,{mt:4},r.a.createElement(Ri.a,{container:!0,spacing:2},r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(ua,{_variant:"contained",_color:"primary",_label:"Sign In",_type:"submit",_fullWidth:!0,_loading:this.loadingInProgress})))))),r.a.createElement(Pt.a,{className:Nm.a.loginCopyright},r.a.createElement(Dp.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Dm.a,{color:"inherit",href:"http://ikigailabs.io/"},"IkigaiLabs.io")," ",(new Date).getFullYear(),"."))))}}]),a}(n.Component),Pm=Object(d.c)((function(e){return{loginSubmitErrorMsg:e.userReducerState.loginResponse,isLoggedIn:e.userReducerState.isLoggedIn}}),(function(e){return{authenticate:function(t,a){return e(function(e,t){return{type:S,payload:{email:e,password:t}}}(t,a))}}}))(Cm),Im=new(a(340));Im.is().min(8).is().max(100).has().uppercase().has().lowercase().has().digits().has().not().spaces();var xm=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).timer=void 0,e.state={emailValidation:!0,passwordValidation:!0,passwordValidation2:!0,emailValue:"",passwordValue:"",passwordValue2:"",emailErrorMsg:"",passErrorMsg:"",passErrorMsg2:"",showPassword:!0,showPassword2:!0,signupSubmitState:!1,signupSubmitErrorMsg:"",signupSubmitErrorState:!1,signupSubmitSuccessState:!1,signupSubmitSuccessMsg:"",timeRemainingInSeconds:10,licenseDialog:!1,licenseChecked:!1,licenseErrorMsg:"",licenseError:!1},e.handleEmailChange=function(t){e.setState({emailValue:t.target.value})},e.handlePassChange=function(t){e.setState({passwordValue:t.target.value})},e.handlePassChange2=function(t){e.setState({passwordValue2:t.target.value})},e.handleClickShowPassword=function(){!0===e.state.showPassword?e.setState({showPassword:!1}):e.setState({showPassword:!0})},e.handleClickShowPassword2=function(){!0===e.state.showPassword2?e.setState({showPassword2:!1}):e.setState({showPassword2:!0})},e.handleSignUpFormSubmit=function(t){e.setState({signupSubmitState:!0}),t.preventDefault();var a=!1,n=!1,r=!1,s=!1;setTimeout((function(){""!==e.state.emailValue?!0===Zl.validate(e.state.emailValue)?(e.setState({emailValidation:!0,emailErrorMsg:""}),a=!0):e.setState({emailValidation:!1,emailErrorMsg:"Invalid email"}):e.setState({emailValidation:!1,emailErrorMsg:"Email is required"}),""!==e.state.passwordValue?!0===Im.validate(e.state.passwordValue)?(e.setState({passwordValidation:!0,passErrorMsg:""}),n=!0):(e.setState({passwordValidation:!1,passErrorMsg:"Password must contain uppercase and lowercase letter, number and be 8 - 16 characters long"}),n=!1):e.setState({passwordValidation:!1,passErrorMsg:"Password is required"}),""!==e.state.passwordValue2?e.state.passwordValue2===e.state.passwordValue?(e.setState({passwordValidation2:!0,passErrorMsg2:""}),r=!0):e.setState({passwordValidation2:!1,passErrorMsg2:"Passwords are not equal"}):e.setState({passwordValidation2:!1,passErrorMsg2:"Confirm password is required"}),!0===e.state.licenseChecked?(e.setState({licenseErrorMsg:"",licenseError:!1}),s=!0):(e.setState({licenseErrorMsg:"You must accept Ikigai Labs License Agreement in order to continue",licenseError:!0}),s=!1),!0===a&&!0===n&&!0===r&&!0===s&&(console.log("email: "+e.state.emailValue+", pass: "+e.state.passwordValue),pr(e.state.emailValue,e.state.passwordValue).then((function(t){200===t.status?(e.setState({signupSubmitErrorMsg:""}),e.setState({signupSubmitErrorState:!1}),e.setState({signupSubmitSuccessMsg:"Email message with instructions has been sent. Check your email inbox"}),e.setState({signupSubmitSuccessState:!0}),e.timer=setInterval((function(){e.decrementTimeRemaining()}),1e3)):401===t.status?(e.setState({signupSubmitErrorMsg:"You have entered an invalid username or password"}),e.setState({signupSubmitErrorState:!0}),e.setState({signupSubmitSuccessState:!1})):404===t.status?(e.setState({signupSubmitErrorMsg:"Error 404: Something went wrong!"}),e.setState({signupSubmitErrorState:!0}),e.setState({signupSubmitSuccessState:!1})):(e.setState({signupSubmitErrorMsg:"The username "+e.state.emailValue+" already exists. Please use a different username/email."}),e.setState({signupSubmitErrorState:!0}),e.setState({signupSubmitSuccessState:!1}))})).catch((function(t){404===t.status?(e.setState({signupSubmitErrorMsg:"Error 404: Something went wrong!"}),e.setState({signupSubmitErrorState:!0}),e.setState({signupSubmitSuccessState:!1})):401===t.status?(e.setState({signupSubmitErrorMsg:"You have entered an invalid username or password"}),e.setState({signupSubmitErrorState:!0}),e.setState({signupSubmitSuccessState:!1})):(e.setState({signupSubmitErrorMsg:"Error: Please contact IkigaiLabs support. Thank You for understanding."}),e.setState({signupSubmitErrorState:!0}),e.setState({signupSubmitSuccessState:!1}))}))),e.setState({signupSubmitState:!1})}),1e3)},e.decrementTimeRemaining=function(){e.state.timeRemainingInSeconds>0?e.setState({timeRemainingInSeconds:e.state.timeRemainingInSeconds-1}):(clearInterval(e.timer),e.setState({timeRemainingInSeconds:10}),e.props.history.push("/login"))},e.handleLicenseDialog=function(t){e.setState({licenseDialog:t})},e.handleLicenseAccept=function(){e.setState({licenseChecked:!0,licenseError:!1}),e.handleLicenseDialog(!1)},e.handleLicenseCheckbox=function(t){e.setState({licenseChecked:t.target.checked}),!0===t.target.checked&&e.setState({licenseError:!1})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.emailValue,s=t.passwordValue,o=t.passwordValue2,i=t.emailValidation,l=t.passwordValidation,c=t.passwordValidation2,u=t.emailErrorMsg,d=t.passErrorMsg,p=t.passErrorMsg2,m=t.showPassword,h=t.showPassword2,f=t.signupSubmitState,g=t.signupSubmitErrorMsg,b=t.signupSubmitErrorState,v=t.signupSubmitSuccessState,_=t.signupSubmitSuccessMsg,E=t.timeRemainingInSeconds,S=t.licenseError,y=t.licenseErrorMsg;return this.props.isLoggedIn&&this.props.history.push("/dashboard"),r.a.createElement(n.Fragment,null,!0===f&&r.a.createElement("div",{className:"mask"}),r.a.createElement(Pd.a,{className:"main-container",component:"main",maxWidth:"xs"},r.a.createElement(km.a,null),r.a.createElement("div",{className:"paper-box"},r.a.createElement(Dp.a,{className:"login-logo",component:"h2",variant:"caption"},r.a.createElement("span",null,"Ikigai"),r.a.createElement("span",null,"Labs")),r.a.createElement(Pt.a,{mt:4,mb:1},r.a.createElement(Dp.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement(jm.a,{variant:"middle",className:"subtitle-divider"})),r.a.createElement(Dp.a,{className:"subtitle",component:"div",variant:"caption"},"Create account"),!1===v?r.a.createElement("form",{className:"login-form",autoComplete:"off",noValidate:!0,onSubmit:this.handleSignUpFormSubmit},i?r.a.createElement(ba.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Email",placeholder:"Enter Your Email address",type:"search",autoComplete:"new-username",autoFocus:!0,value:a,onChange:this.handleEmailChange,InputLabelProps:{shrink:!0}}):r.a.createElement("div",null,r.a.createElement(ba.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Email",placeholder:"Enter Your Email address",type:"search",autoComplete:"new-username",autoFocus:!0,value:a,onChange:this.handleEmailChange,InputLabelProps:{shrink:!0},error:!0}),r.a.createElement(Ft.a,{className:"input-error",error:!0},r.a.createElement(Mt.a,null),r.a.createElement("span",null,u))),l?r.a.createElement(ba.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Password",placeholder:"Enter Your Password",type:m?"password":"text",autoComplete:"new-password",value:s,onChange:this.handlePassChange,InputLabelProps:{shrink:!0},InputProps:{endAdornment:r.a.createElement(ha.a,{position:"end"},r.a.createElement(fa.a,{edge:"end","aria-label":"toggle password visibility",onClick:this.handleClickShowPassword,onMouseDown:function(e){e.preventDefault()},size:"small"},m?r.a.createElement(Fd.a,{fontSize:"small"}):r.a.createElement(pu.a,{fontSize:"small"})))}}):r.a.createElement("div",null,r.a.createElement(ba.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Password",placeholder:"Enter Your Password",type:m?"password":"text",autoComplete:"new-password",value:s,onChange:this.handlePassChange,InputLabelProps:{shrink:!0},error:!0,InputProps:{endAdornment:r.a.createElement(ha.a,{position:"end"},r.a.createElement(fa.a,{edge:"end","aria-label":"toggle password visibility",onClick:this.handleClickShowPassword,onMouseDown:function(e){e.preventDefault()},size:"small"},m?r.a.createElement(Fd.a,{fontSize:"small"}):r.a.createElement(pu.a,{fontSize:"small"})))}}),r.a.createElement(Ft.a,{className:"input-error",error:!0},r.a.createElement(Mt.a,null),r.a.createElement("span",null,d))),c?r.a.createElement(ba.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Confirm password",placeholder:"Confirm Your Password",type:h?"password":"text",autoComplete:"new-password",value:o,onChange:this.handlePassChange2,InputLabelProps:{shrink:!0},InputProps:{endAdornment:r.a.createElement(ha.a,{position:"end"},r.a.createElement(fa.a,{edge:"end","aria-label":"toggle password visibility",onClick:this.handleClickShowPassword2,onMouseDown:function(e){e.preventDefault()},size:"small"},h?r.a.createElement(Fd.a,{fontSize:"small"}):r.a.createElement(pu.a,{fontSize:"small"})))}}):r.a.createElement("div",null,r.a.createElement(ba.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,placeholder:"Confirm password",type:h?"password":"text",autoComplete:"new-password",value:o,onChange:this.handlePassChange2,InputLabelProps:{shrink:!0},error:!0,InputProps:{endAdornment:r.a.createElement(ha.a,{position:"end"},r.a.createElement(fa.a,{edge:"end","aria-label":"toggle password visibility",onClick:this.handleClickShowPassword2,onMouseDown:function(e){e.preventDefault()},size:"small"},h?r.a.createElement(Fd.a,{fontSize:"small"}):r.a.createElement(pu.a,{fontSize:"small"})))}}),r.a.createElement(Ft.a,{className:"input-error",error:!0},r.a.createElement(Mt.a,null),r.a.createElement("span",null,p))),r.a.createElement(Pt.a,{mt:2,mb:2},r.a.createElement("div",{className:!0===S?"license-box has-error":"license-box"},r.a.createElement(Hi.a,{value:"",color:"primary",checked:this.state.licenseChecked,onChange:function(t){return e.handleLicenseCheckbox(t)}}),r.a.createElement("div",{className:"license-label-box"},r.a.createElement("span",{className:"label-txt"},"I have read and agree to the terms of "),r.a.createElement(Dm.a,{href:"#",color:"primary",onClick:function(){return e.handleLicenseDialog(!0)}},"Ikigai Labs License Agreement"))),!0===S&&r.a.createElement(Ri.a,{container:!0,spacing:2,className:"has-txt-centered"},r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(Pt.a,{mt:2},r.a.createElement(Ft.a,{className:"input-error",error:!0},r.a.createElement(Mt.a,null),r.a.createElement("span",null,y)))))),!0===b&&r.a.createElement(Pt.a,{mt:4,mb:4},r.a.createElement("div",{className:"submit-error has-txt-centered"},g)),r.a.createElement(Pt.a,{mt:4},r.a.createElement(Ri.a,{container:!0,spacing:2,className:"has-txt-centered"},r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(At.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"button"},!0===f&&r.a.createElement("span",{className:"btn-spinner"}),r.a.createElement("span",null,"Get Started"))),r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(kl.a,{to:"/login"},"Already have an account? Sign in"))))):r.a.createElement(n.Fragment,null,r.a.createElement(Pt.a,{mt:4,mb:4},r.a.createElement("div",{className:"submit-success has-txt-centered"},_)),r.a.createElement(Pt.a,{mt:4,mb:4},r.a.createElement("span",null,"Redirecting to Sign in page in "),r.a.createElement("strong",null,E)))),r.a.createElement(Pt.a,{className:"login-copyright"},r.a.createElement(Dp.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Dm.a,{color:"inherit",href:"http://ikigailabs.io/"},"IkigaiLabs.io")," ",(new Date).getFullYear(),"."))),r.a.createElement(Aa.a,{"aria-labelledby":"customized-dialog-title",open:this.state.licenseDialog,className:"dialog",fullWidth:!0,maxWidth:"md",disableBackdropClick:!0},r.a.createElement(Ma.a,{className:"dialog-content"},r.a.createElement("div",null,r.a.createElement(Pt.a,{className:"dialog-title default-color",mb:2},"Ikigai Labs Beta License Agreement"),r.a.createElement(Pt.a,{mt:2,mb:2,className:"license-dialog-content"},r.a.createElement("p",null,"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 ",r.a.createElement("strong",null,"IMPORTANT-READ CAREFULLY:")," THIS IS A LEGAL AGREEMENT BETWEEN YOU, YOUR EMPLOYEES, AGENTS AND CONTRACTORS, AND ANY OTHER ENTITY ON WHOSE BEHALF YOU ACCEPT THIS AGREEMENT (COLLECTIVELY, \u201c",r.a.createElement("strong",null,"YOU"),"\u201d) AND IKIGAI LABS, INC. located at 2 Embarcadero Center, 8th Floor, San Francisco, CA 94111, United States (\u201c",r.a.createElement("strong",null,"iKIGA LABS"),"\u201d) FOR THE IKIGAI LABS SOFTWARE AS A SERVICE PRODUCT ACCOMPANYING THIS AGREEMENT, WHICH MAY INCLUDE source code, algorithms or other code, including the underlying structure, schema, functions, methods of operation and ideas relating to the SOFTWARE AS A SERVICE PRODUCT Offering, associated MEDIA, PRINTED MATERIALS AND ONLINE OR ELECTRONIC DOCUMENTATION (COLLECTIVELY \u201c",r.a.createElement("strong",null,"SAAS OFFERING"),"\u201d).\xa0 BEFORE ACCESSING THE SAAS OFFERING YOU MUST READ, ACKNOWLEDGE AND ACCEPT THE TERMS AND CONDITIONS OF THIS IKIGAI LABS BETA LICENSE AGREEMENT (\u201c",r.a.createElement("strong",null,"AGREEMENT"),"\u201d). BY PRESSING THE \u201cI ACCEPT\u201d BUTTON, YOU CREATE A BINDING AGREEMENT AND BY USING, DOWNLOADING, OR OTHERWISE ACCESSING ANY PART OF THE SAAS OFFERING, YOU ARE REAFFIRMING THAT YOU AGREE TO BE BOUND BY THIS AGREEMENT AND ACCEPT WITHOUT LIMITATION OR QUALIFICATION ALL OF ITS TERMS AND CONDITIONS.\xa0 IF YOU DO NOT ACCEPT THE TERMS AND CONDITIONS OF THE AGREEMENT, DO NOT ACCESS THE SAAS OFFERING IN ANY WAY.\xa0 If you are acquiring the SAAS OFFERING on behalf of an entity, you represent and warrant that you have the legal capacity to bind such entity to this Agreement. \xa0\xa0"),r.a.createElement("ol",null,r.a.createElement("li",null,r.a.createElement("strong",null,"Scope of Agreement"),". You may test and evaluate the SaaS Offering under the terms and conditions of this Agreement for a period of 6 months from the date You accept this Agreement (\u201c",r.a.createElement("strong",null,"Evaluation Period"),"\u201d). You may conduct internal, non-commercial testing and evaluation of the Saas Offering solely for the purpose of assessing whether You desire to enter into a business relationship with Ikigai Labs (the \u201c",r.a.createElement("strong",null,"Purpose"),"\u201d).\xa0 This is solely an evaluation license and in no event are You permitted to use the SaaS Offering in a production environment.\xa0 Nothing herein obligates either party to proceed with any other transaction between them, including but not limited to licensing the SaaS Offering. Ikigai Labs is not obligated to make the SaaS Offering available as a commercial product.\xa0")),r.a.createElement("ol",{start:2},r.a.createElement("li",null,r.a.createElement("strong",null,"License Grant and Restrictions"),".",r.a.createElement("ol",{type:"a",className:"ol-level-2"},r.a.createElement("li",null,r.a.createElement("u",null,"License Grant"),". Subject to the terms and conditions set forth herein, Ikigai Labs hereby grants You and Your Users a personal, nonexclusive, nontransferable, nonsublicensable, royalty-free license to (i) use and \xa0access the SaaS Offering solely for the Purpose, and during the Evaluation Period. \u201c",r.a.createElement("strong",null,"User"),"\u201d means the individual(s) in Your company who are authorized by You and Ikigai Labs to use or access the SaaS Offering subject to such individual\u2019s acceptance of this Agreement. You shall ensure that Users take reasonable security precautions to prevent the SaaS Offering from being seen or accessed by unauthorized individuals.\xa0"),r.a.createElement("li",null,r.a.createElement("u",null,"Restrictions"),". You will not use, download, install, or access the SaaS Offering except as expressly authorized by this Agreement.\xa0 Without limiting the generality of the foregoing, You will not: (i) sell, resell, distribute, bundle or make the SaaS Offering available in any form to any third party; (ii) copy, modify, merge, disclose, reverse engineer, decompile, disassemble, translate, or otherwise attempt to derive the design, source code or underlying algorithms, file formats or programming or interoperability interfaces of the SaaS Offering unless applicable law prohibits such reverse engineering restrictions; (iii) create any derivative work based upon, the SaaS Offering; (iv) sublicense or otherwise transfer or dispose of, or assign, share, rent, lease, grant a security interest in, or otherwise transfer the SaaS Offering or Your right to use the SaaS Offering; or (v) use the SaaS Offering for any commercial purposes.\xa0 There are no implied rights under this Agreement."),r.a.createElement("li",null,r.a.createElement("u",null,"Proprietary Rights"),". You acknowledge and agree that Ikigai Labs is the exclusive owner of all right, title, and interest in and to the SaaS Offering (including without limitation, any software or documentation associated with the SaaS Offering and all updates, corrections, modifications, and new versions thereof) and all intellectual property rights related thereto or inherent therein, including without limitation copyright, patent, trade secret and trademark rights (collectively, \u201c",r.a.createElement("strong",null,"Ikigai Labs Property"),"\u201d).\xa0 You will treat Ikigai Labs Property as proprietary and confidential information of Ikigai Labs subject to the terms and conditions of this Agreement.\xa0 You do not acquire title to the Ikigai Labs Property or any intellectual property or other rights related thereto, whether by implication, estoppel or otherwise, except for the limited evaluation license granted hereunder."),r.a.createElement("li",null,r.a.createElement("u",null,"Open Source"),". If any open source software is incorporated into the SaaS Offering, Your rights with regard to the open source software will be governed by the applicable open source license."),r.a.createElement("li",null,r.a.createElement("u",null,"Proprietary Notices"),". You will not remove any copyright, patent, trademark or other proprietary or restrictive notice or legend contained or included in the SaaS Offering and You will reproduce and copy all such notices and legends on all copies of any such SaaS Offering that Ikigai Labs expressly and in writing permits you to make.")))),r.a.createElement("ol",{start:3},r.a.createElement("li",null,r.a.createElement("strong",null,"Evaluation and Feedback"),".",r.a.createElement("ol",{type:"a",className:"ol-level-2"},r.a.createElement("li",null,r.a.createElement("u",null,"Evaluation"),". You will cooperate and consult with Ikigai Labs in the evaluation of the SaaS Offering based on Your operation, use, and testing of the SaaS Offering.\xa0"),r.a.createElement("li",null,r.a.createElement("u",null,"Feedback"),". You (i) will promptly provide feedback to Ikigai Labs based on the evaluation results for the SaaS Offering including, without limitation, any flaws, errors, bugs or other problems You find in the SaaS Offering; and (ii) may provide to Ikigai Labs Your suggested improvements or modifications of the SaaS Offering, and all related know-how, created under this Agreement regarding improvement or modification of the SaaS Offering, during the course of or as a result of this Agreement (collectively, \u201c",r.a.createElement("strong",null,"Feedback"),"\u201d).\xa0 Ikigai Labs owns all right, title, and interest in and to the Feedback, all improvements or modifications of the SaaS Offering by whomsoever made, and all intellectual property rights inherent therein or related to the foregoing.\xa0 You hereby assign to Ikigai Labs all right, title and interest in and to the Feedback.\xa0 You will do all acts reasonably required to perfect and enforce such rights.\xa0 All such Feedback will be deemed to be Ikigai Labs\u2019s Confidential Information and will be subject to the restrictions set forth herein."))),r.a.createElement("li",null,r.a.createElement("strong",null,"Term and Termination"),".",r.a.createElement("ol",{type:"a",className:"ol-level-2"},r.a.createElement("li",null,r.a.createElement("u",null,"Term"),". This Agreement will terminate upon the expiration of the Evaluation Period unless terminated earlier in accordance with this section (\u201c",r.a.createElement("strong",null,"Term"),"\u201d)."),r.a.createElement("li",null,r.a.createElement("u",null,"Termination"),". Either party may terminate this Agreement at any time by giving notice to the other party.\xa0"),r.a.createElement("li",null,r.a.createElement("u",null,"Effect of Termination"),". Upon expiration or termination of this Agreement for any reason, You will immediately and permanently discontinue all use of the SaaS Offering, return to Ikigai Labs the SaaS Offering and all property (of whatever description or nature) belonging to Ikigai Labs or destroy the same, and certify to Ikigai Labs, in writing, that all copies and partial copies thereof have been returned or completely destroyed and are no longer being used."),r.a.createElement("li",null,r.a.createElement("u",null,"Survival"),". Section c (Proprietary Rights), Section 3.b (Feedback), Section 4c (Effect of Termination), Section 4(d) (Survival), Section 5 (Confidentiality), Section 6 (No Warranties; Disclaimer), Section 7 (Limitation of Liability), and Section 9 (Miscellaneous) will survive any expiration or termination of this Agreement."))),r.a.createElement("li",null,r.a.createElement("strong",null,"Confidentiality"),".",r.a.createElement("ol",{type:"a",className:"ol-level-2"},r.a.createElement("li",null,r.a.createElement("u",null,"Confidential Information"),". All information marked as confidential, or that a reasonable person could infer as confidential from the circumstances, including business, technical, financial or other information disclosed by Ikigai Labs to You pursuant to this Agreement, is Ikigai Labs\u2019 confidential information (collectively, \u201c",r.a.createElement("strong",null,"Confidential Information"),"\u201d).\xa0 The SaaS Offering, and all Feedback, including without limitation, any security vulnerability or run-time errors identified by the SaaS Offering or You while using the SaaS Offering will be deemed to be Ikigai Labs\u2019s Confidential Information.\xa0 You will not disclose any information about the SaaS Offering, its design and performance specifications, its code, and the existence of the evaluation and its results to any third party, except as expressly authorized in writing by Ikigai Labs. You will hold in confidence and will not use or disclose to any third party any Ikigai Labs Confidential Information.\xa0 You may only disclose Ikigai Labs\u2019 Confidential Information to Users who have a legitimate \u201cneed to know,\u201d have been advised of the obligations of confidentiality under this Agreement and are bound to You in writing to obligations of confidentiality no less stringent than those set out in this Agreement. \xa0You may only use Ikigai Labs\u2019 Confidential Information as necessary to perform Your obligations or exercise Your rights under this Agreement and for no other purpose. You will be liable for any breach of this Agreement by Users."),r.a.createElement("li",null,r.a.createElement("u",null,"Exclusions"),". You will not be obligated under this section with respect to Confidential Information that You can document: (i) is or has become readily publicly available without restriction through no fault attributable to You or Your personnel, (ii) is received, without restriction, from a third party lawfully in possession of such information and lawfully empowered to disclose such information, or (iii) was rightfully in Your possession without restriction prior to its disclosure by Ikigai Labs."),r.a.createElement("li",null,r.a.createElement("u",null,"Injunctive Relief"),". Due to the unique nature of Ikigai Labs\u2019 Confidential Information, any breach by You of this Section\xa05 will cause Ikigai Labs irreparable harm for which recovery of damages would be inadequate and Ikigai Labs will be entitled to injunctions and other appropriate equitable relief, without the requirement of posting a bond, in addition to whatever remedies it may have at law."))),r.a.createElement("li",null,r.a.createElement("strong",null,"NO WARRANTIES; DISCLAIMER"),". THE SAAS OFFERING IS PROVIDED \u201cAS IS.\u201d IKIGAI LABS MAKES NO WARRANTIES OF ANY KIND WITH RESPECT TO THE SAAS OFFERING, EXPRESS OR IMPLIED, AND EXPRESSLY DISCLAIMS ANY IMPLIED WARRANTIES, INCLUDING WITHOUT LIMITATION THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NONINFRINGEMENT AND ANY IMPLIED OBLIGATION TO INDEMNIFY FOR INFRINGEMENT.\xa0 IKIGAI LABS DOES NOT WARRANT THAT THE OPERATION OF THE SAAS OFFERING WILL BE UNINTERRUPTED, FAULT-TOLERANT, OR ERROR-FREE, THAT ANY SAAS OFFERING ERRORS WILL BE CORRECTED, THAT THE SAAS OFFERING WILL EVER BE COMPLETED OR COMMERCIALLY AVAILABLE, THAT THE SAAS OFFERING WILL SATISFY YOUR REQUIREMENTS OR THAT THE SAAS OFFERING WILL OPERATE IN COMBINATION WITH OTHER SOFTWARE OR HARDWARE OR WITH YOUR INFORMATION TECHNOLOGY ENVIRONMENT. \xa0IKIGAI LABS MAY CHANGE THE SAAS OFFERING AND THE TECHNICAL SPECIFICATIONS, AND ANY OTHER INFORMATION AND MATERIALS AVAILABLE IN CONNECTION WITH YOUR USE OF THE SAAS OFFERING AT ANY TIME AND WITHOUT NOTICE. IKIGAI LABS IS NOT RESPONSIBLE FOR ANY MISUSE OF THE SAAS OFFERING BY YOU OR USERS, INCLUDING WITHOUT LIMITATION ANY WILLFUL OR MALICIOUS ACTS BY YOU OR A USER, OR ANY OTHER ACT OR OMISSION BY YOU OR A USER IN VIOLATION OF THE TERMS OF THIS AGREEMENT OR USE OF THE SAAS OFFERING OTHER THAN AS PROVIDED IN THIS AGREEMENT."),r.a.createElement("li",null,r.a.createElement("strong",null,"LIMITATION OF LIABILITY"),". IN NO EVENT WILL IKIGAI LABS BE LIABLE FOR ANY DAMAGES TO YOU, INCLUDING LOSS OF OR BREACH OF DATA, LOST PROFITS, LOSS OF GOODWILL OR OTHER SPECIAL, INCIDENTAL, CONSEQUENTIAL, OR INDIRECT DAMAGES ARISING FROM THE USE OF THE SAAS OFFERING OR ACCOMPANYING MATERIALS, HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY.\xa0 THIS LIMITATION WILL APPLY EVEN IF IKIGAI LABS HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\xa0 IN NO EVENT WILL IKIGAI LABS\u2019 AGGREGATE LIABILITY TO YOU UNDER THIS AGREEMENT EXCEED $100. THE PARTIES ACKNOWLEDGE THAT THIS IS A REASONABLE ALLOCATION OF RISK.\xa0")),r.a.createElement("ol",{start:8},r.a.createElement("li",null,r.a.createElement("strong",null,"DATA"),". You have the sole responsibility for adequate protection and backup of Your data used in connection with the SaaS Offering, and You will not have any claim against Ikigai Labs for lost data, BREACH OF DATA, work delays, or lost profits resulting from the use of the SaaS Offering.")),r.a.createElement("ol",{start:9},r.a.createElement("li",null,r.a.createElement("strong",null,"Miscellaneous"),".",r.a.createElement("ol",{type:"a",className:"ol-level-2"},r.a.createElement("li",null,r.a.createElement("u",null,"Assignment"),". You may not assign or otherwise transfer any of Your rights or obligations under this Agreement to any third party (whether by operation of law or otherwise) without the prior written consent of Ikigai Labs.\xa0 Any attempted or purported assignment or delegation by You without such required consent will be deemed null and void and deemed a material breach of this Agreement."),r.a.createElement("li",null,r.a.createElement("u",null,"Entire Agreement; Severability; and Waiver"),". This Agreement sets forth the entire agreement and understanding of the parties relating to the subject matter herein and merges and supercedes all prior or contemporaneous oral or written discussions between them.\xa0 If any provision of this Agreement is held by a court of competent jurisdiction to be illegal, invalid, or unenforceable, that provision will be limited or eliminated to the minimum extent necessary so that this Agreement otherwise remains in full force and effect and enforceable.\xa0 No waiver of any of the provisions of this Agreement will be deemed or constitute a waiver of any other provision, whether or not similar, nor will any waiver constitute a continuing waiver.\xa0"),r.a.createElement("li",null,r.a.createElement("u",null,"Modification"),". Ikigai Labs may modify the terms and conditions of this Agreement from time to time by providing You an updated copy of this Agreement. You understand that Ikigai Labs reserves the right to make such modifications.\xa0 Your continued access to or use of the SaaS Offering after any such modification will constitute Your consent to the modification."),r.a.createElement("li",null,r.a.createElement("u",null,"Governing Law"),". This Agreement is governed by the law of California, U.S.A without regard to its conflict of laws\u2019 provisions and any legal action or proceeding relating to this Agreement will be brought exclusively in the state or federal courts located in Santa Clara County. Notwithstanding the foregoing, Ikigai Labs will at all times have the right to commence proceedings in any other court of its choice with the appropriate jurisdiction for interim injunctive relief. In any judicial proceeding arising out of this Agreement, the prevailing party will be entitled to recover all reasonable expenses associated with such proceeding (including, without limitation, reasonable costs and fees of attorneys and other professionals).\xa0"),r.a.createElement("li",null,r.a.createElement("u",null,"Independent Contractors"),". The parties are independent contractors, and nothing in this Agreement will be construed to create a joint venture or partnership or otherwise give rise to fiduciary obligations between the parties. Neither party has the right or authority to assume or create any obligations or to make any representation, warranties or commitments on behalf of the other party, whether express or implied, or to bind the other party in any respect whatsoever."),r.a.createElement("li",null,r.a.createElement("u",null,"No Export"),". Under no circumstances will You remove or export from the United States or allow the export or re-export of the SaaS Offering or anything related thereto, or any direct product thereof, in violation of any restrictions, laws or regulations of the United States Department of Commerce, the United States Department of Treasury Office of Foreign Assets Control, or any other United States or foreign agency or authority."),r.a.createElement("li",null,r.a.createElement("u",null,"Government End-Users"),". Elements of the SaaS Offering are commercial computer software. If the user or licensee of the SaaS Offering is an agency, department, or other entity of the United States Government, the use, duplication, reproduction, release, modification, disclosure, or transfer of the SaaS Offering or any related documentation of any kind, including technical data and manuals, is restricted by a license agreement or by the terms of this Agreement in accordance with Federal Acquisition Regulation 12.212 for civilian purposes and Defense Federal Acquisition Regulation Supplement 227.7202 for military purposes. The SaaS Offering was developed fully at private expense.\xa0 All other use is prohibited."),r.a.createElement("li",null,r.a.createElement("u",null,"Notice"),". You will deliver all notices to Ikigai Labs required or permitted under this Agreement in writing and (i) personally, (ii) by certified, registered or express U.S. mail, postage prepaid, or (iii) by Federal Express or other similar commercial delivery service, to the following address: WeWork c/o Vinayak Ramesh, 2 Embarcadero Center, 8th Floor, San Francisco, CA 94111 United States, Attention: Vinayak Ramesh.\xa0 Ikigai Labs will deliver notices to You to the physical or email address You provide upon Your registration.\xa0 A printed version of this Agreement and of any notices given in electronic form will be admissible in judicial or administrative proceedings based upon or relating to this Agreement to the same extent and subject to the same conditions as other business documents and records originally generated and maintained in printed form.")))),r.a.createElement("p",null,"\xa0")))),r.a.createElement(za.a,{className:"footer"},r.a.createElement(At.a,{color:"default",className:"button",onClick:function(){return e.handleLicenseDialog(!1)}},"Cancel"),r.a.createElement(At.a,{variant:"contained",color:"primary",className:"button",onClick:function(){return e.handleLicenseAccept()}},"I accept"))))}}]),a}(n.Component),Fm=(Object(d.c)((function(e){return{isLoggedIn:e.userReducerState.isLoggedIn}}),(function(e){return{}}))(xm),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).timer=void 0,e.state={emailValidation:!0,emailValue:"",emailErrorMsg:"",fpassSubmitErrorState:!1,fpassSubmitErrorMsg:"",fpassSubmitSuccessState:!1,fpassSubmitSuccessMsg:"",fpassSubmitState:!1,timeRemainingInSeconds:10},e.handleEmailChange=function(t){e.setState({emailValue:t.target.value})},e.handleFPassFormSubmit=function(t){e.setState({fpassSubmitState:!0}),t.preventDefault();var a=!1;setTimeout((function(){""!==e.state.emailValue?!0===Zl.validate(e.state.emailValue)?(e.setState({emailValidation:!0,emailErrorMsg:""}),a=!0):e.setState({emailValidation:!1,emailErrorMsg:"Invalid email"}):e.setState({emailValidation:!1,emailErrorMsg:"Email is required"}),!0===a&&hr(e.state.emailValue).then((function(t){200===t.status?(e.setState({fpassSubmitErrorMsg:""}),e.setState({fpassSubmitErrorState:!1}),e.setState({fpassSubmitSuccessMsg:"Email message with instructions has been sent"}),e.setState({fpassSubmitSuccessState:!0}),e.timer=setInterval((function(){e.decrementTimeRemaining()}),1e3)):401===t.status?(e.setState({fpassSubmitErrorMsg:"You have entered an invalid email/username"}),e.setState({fpassSubmitErrorState:!0})):404===t.status?(e.setState({fpassSubmitErrorMsg:"Error 404: Something went wrong!"}),e.setState({fpassSubmitErrorState:!0})):(e.setState({fpassSubmitErrorMsg:"Email not found"}),e.setState({fpassSubmitErrorState:!0}))})).catch((function(t){404===t.response.status?(e.setState({fpassSubmitErrorMsg:"Error 404: Something went wrong!"}),e.setState({fpassSubmitErrorState:!0})):401===t.response.status?(e.setState({fpassSubmitErrorMsg:"You have entered an invalid email/username"}),e.setState({fpassSubmitErrorState:!0})):(e.setState({fpassSubmitErrorMsg:"Email not found"}),e.setState({fpassSubmitErrorState:!0}))})),e.setState({fpassSubmitState:!1})}),1e3)},e.decrementTimeRemaining=function(){e.state.timeRemainingInSeconds>0?e.setState({timeRemainingInSeconds:e.state.timeRemainingInSeconds-1}):(clearInterval(e.timer),e.setState({timeRemainingInSeconds:10}),e.props.history.push("/reset-password?e="+e.state.emailValue))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.emailValue,a=e.emailValidation,s=e.emailErrorMsg,o=e.fpassSubmitErrorState,i=e.fpassSubmitErrorMsg,l=e.fpassSubmitSuccessState,c=e.fpassSubmitSuccessMsg,u=e.fpassSubmitState,d=e.timeRemainingInSeconds;return r.a.createElement(n.Fragment,null,!0===u&&r.a.createElement("div",{className:"mask"}),r.a.createElement(Pd.a,{className:"main-container",component:"main",maxWidth:"xs"},r.a.createElement(km.a,null),r.a.createElement("div",{className:"paper-box"},r.a.createElement(Dp.a,{className:"login-logo",component:"h2",variant:"caption"},r.a.createElement("span",null,"Ikigai"),r.a.createElement("span",null,"Labs")),r.a.createElement(Pt.a,{mt:4,mb:1},r.a.createElement(Dp.a,{component:"h1",variant:"h5"},"Forgot Password"),r.a.createElement(jm.a,{variant:"middle",className:"subtitle-divider"})),r.a.createElement(Dp.a,{className:"subtitle",component:"div",variant:"caption"},"Lost your password? ",r.a.createElement("br",null),"Please enter your username or email address. You will receive a link to create a new password via email."),!1===l?r.a.createElement("form",{className:"login-form",autoComplete:"off",noValidate:!0,onSubmit:this.handleFPassFormSubmit},a?r.a.createElement(ba.a,{id:"fpass-email",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Email",InputLabelProps:{shrink:!0},placeholder:"Enter Your Email address",type:"search",autoComplete:"new-username",autoFocus:!0,value:t,onChange:this.handleEmailChange}):r.a.createElement("div",null,r.a.createElement(ba.a,{id:"fpass-email",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Email",InputLabelProps:{shrink:!0},placeholder:"Enter Your Email address",type:"search",autoComplete:"new-username",autoFocus:!0,value:t,onChange:this.handleEmailChange,error:!0}),r.a.createElement(Ft.a,{className:"input-error",error:!0},r.a.createElement(Mt.a,null),r.a.createElement("span",null,s))),!0===o&&r.a.createElement(Pt.a,{mt:4,mb:4},r.a.createElement("div",{className:"submit-error has-txt-centered"},i)),r.a.createElement(Pt.a,{mt:4},r.a.createElement(Ri.a,{container:!0,spacing:2,className:"has-txt-centered"},r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(At.a,{type:"submit",variant:"contained",color:"primary",className:"button",fullWidth:!0},!0===u&&r.a.createElement("span",{className:"btn-spinner"}),r.a.createElement("span",null,"Send reset email")),r.a.createElement("div",null,r.a.createElement("br",null)),r.a.createElement(kl.a,{to:"/login"},"or go back to Sign in page"))))):r.a.createElement(r.a.Fragment,null,r.a.createElement(Pt.a,{mt:4,mb:4},r.a.createElement("div",{className:"submit-success has-txt-centered"},c)),r.a.createElement(Pt.a,{mt:4,mb:4},r.a.createElement("span",null,"Redirecting to Reset password page in "),r.a.createElement("strong",null,d)))),r.a.createElement(Pt.a,{className:"login-copyright"},r.a.createElement(Dp.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Dm.a,{color:"inherit",href:"http://ikigailabs.io/"},"IkigaiLabs.io")," ",(new Date).getFullYear(),"."))))}}]),a}(n.Component)),Tm=(Object(d.c)((function(e){return{}}),(function(e){return{}}))(Fm),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={codeValidation:!0,codeValue:"",codeErrorMsg:"",userEmail:"",confirmCodeSubmitErrorMsg:"",confirmCodeSubmitErrorState:!1},e.getUserEmail=function(t){e.setState({userEmail:t})},e.preparePageContent=function(){var t=e.state,a=t.codeValue,n=t.codeValidation,s=t.codeErrorMsg,o=t.userEmail,i=t.confirmCodeSubmitErrorMsg,l=t.confirmCodeSubmitErrorState;return""!==e.state.userEmail?r.a.createElement(Pd.a,{className:"main-container",component:"main",maxWidth:"xs"},r.a.createElement(km.a,null),r.a.createElement("div",{className:"paper-box"},r.a.createElement(Dp.a,{className:"login-logo",component:"h2",variant:"caption"},r.a.createElement("span",null,"Ikigai"),r.a.createElement("span",null,"Labs")),r.a.createElement(Pt.a,{mt:4,mb:1},r.a.createElement(Dp.a,{component:"h1",variant:"h5"},"Complete registration"),r.a.createElement(jm.a,{variant:"middle",className:"subtitle-divider"})),r.a.createElement(Dp.a,{className:"subtitle",component:"div",variant:"caption"},"Please enter confirmation code you received on your email"),r.a.createElement(Pt.a,{mt:1,mb:1},r.a.createElement("strong",null,o)),r.a.createElement("form",{className:"login-form",autoComplete:"off",noValidate:!0,onSubmit:e.handleSConfirmFormSubmit},n?r.a.createElement(ba.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Confirmation code",InputLabelProps:{shrink:!0},placeholder:"Enter Confirmation code",type:"search",autoComplete:"new-username",autoFocus:!0,value:a,onChange:e.handleCodeChange}):r.a.createElement("div",null,r.a.createElement(ba.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Confirmation code",InputLabelProps:{shrink:!0},placeholder:"Enter Confirmation code",type:"search",autoComplete:"new-username",autoFocus:!0,value:a,onChange:e.handleCodeChange,error:!0}),r.a.createElement(Ft.a,{className:"input-error",error:!0},r.a.createElement(Mt.a,null),r.a.createElement("span",null,s))),!0===l&&r.a.createElement(Pt.a,{mt:4,mb:4},r.a.createElement("div",{className:"submit-error has-txt-centered"},i)),r.a.createElement(Pt.a,{mt:4},r.a.createElement(Ri.a,{container:!0,spacing:2,className:"has-txt-centered"},r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(At.a,{type:"submit",variant:"contained",color:"primary",className:"button",fullWidth:!0},"Confirm")),r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(kl.a,{to:"/login"},"or go back to Sign in page")))))),r.a.createElement(Pt.a,{className:"login-copyright"},r.a.createElement(Dp.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Dm.a,{color:"inherit",href:"http://ikigailabs.io/"},"IkigaiLabs.io")," ",(new Date).getFullYear(),"."))):r.a.createElement(Pd.a,{className:"main-container",component:"main",maxWidth:"xs"},r.a.createElement(km.a,null),r.a.createElement("div",{className:"paper-box"},r.a.createElement(Dp.a,{className:"login-logo",component:"h2",variant:"caption"},"IkigaiLabs"),r.a.createElement(Pt.a,{mt:4,mb:1},r.a.createElement(Dp.a,{component:"h1",variant:"h5"},"Complete registration"),r.a.createElement(jm.a,{variant:"middle",className:"subtitle-divider"})),r.a.createElement(Dp.a,{className:"subtitle",component:"div",variant:"caption"},"Please enter confirmation code you received on your email"),r.a.createElement(Pt.a,{mt:4},r.a.createElement("div",{className:"submit-error has-txt-left"},r.a.createElement(Pt.a,{mb:1},"Something went wrong, there are two possibilities:"),r.a.createElement("ol",{className:"error-list"},r.a.createElement("li",null,"Confirmation code has expired"),r.a.createElement("li",null,"You haven't used link from email to reach this page")))),r.a.createElement(Pt.a,{mt:4,mb:2},r.a.createElement(kl.a,{to:"/SignUp"},"Don't have an account? Sign Up"))),r.a.createElement(Pt.a,{className:"login-copyright"},r.a.createElement(Dp.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Dm.a,{color:"inherit",href:"http://ikigailabs.io/"},"IkigaiLabs.io")," ",(new Date).getFullYear(),".")))},e.handleCodeChange=function(t){e.setState({codeValue:t.target.value})},e.handleSConfirmFormSubmit=function(t){t.preventDefault();var a=!1;""!==e.state.codeValue?(a=!0,e.setState({codeValidation:!0,codeErrorMsg:""})):(a=!1,e.setState({codeValidation:!1,codeErrorMsg:"Confirmation code is required"})),!0===a&&mr(e.state.userEmail,e.state.codeValue).then((function(t){200===t.status?(e.setState({confirmCodeSubmitErrorMsg:""}),e.setState({confirmCodeSubmitErrorState:!1}),e.props.history.push("/dashboard")):401===t.status?(e.setState({confirmCodeSubmitErrorMsg:"Unable to complete registration."}),e.setState({confirmCodeSubmitErrorState:!0})):404===t.status?(e.setState({confirmCodeSubmitErrorMsg:"Error: Something went wrong."}),e.setState({confirmCodeSubmitErrorState:!0})):(e.setState({confirmCodeSubmitErrorMsg:"Unable to complete registration."}),e.setState({confirmCodeSubmitErrorState:!0}))})).catch((function(t){404===t.response.status?(e.setState({confirmCodeSubmitErrorMsg:"Unable to complete registration."}),e.setState({confirmCodeSubmitErrorState:!0})):401===t.response.status?(e.setState({confirmCodeSubmitErrorMsg:"Error: Something went wrong."}),e.setState({confirmCodeSubmitErrorState:!0})):(e.setState({confirmCodeSubmitErrorMsg:"Unable to complete registration."}),e.setState({confirmCodeSubmitErrorState:!0}))}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({userEmail:""});var e=window.location.search;if(""!==e){var t=new URLSearchParams(e);if(""!==t){var a=t.get("e");if(""!==a){var n=encodeURIComponent(a).replace("%20","+"),r=decodeURIComponent(n);this.getUserEmail(r)}}}}},{key:"render",value:function(){return this.preparePageContent()}}]),a}(n.Component)),Am=(Object(d.c)((function(e){}),(function(e){}))(Tm),new(a(340)));Am.is().min(8).is().max(100).has().uppercase().has().lowercase().has().digits().has().not().spaces();var Lm=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).timer=void 0,e.state={codeValidation:!0,codeValue:"",codeErrorMsg:"",userEmail:"",verificationCodeSubmitErrorMsg:"",verificationCodeSubmitErrorState:!1,passwordValidation:!0,passwordValidation2:!0,passwordValue:"",passwordValue2:"",passErrorMsg:"",passErrorMsg2:"",showPassword:!0,showPassword2:!0,resetpassSubmitErrorMsg:"",resetpassSubmitErrorState:!1,resetpassSubmitSuccessState:!1,resetpassSubmitSuccessMsg:"",rpassSubmitState:!1,timeRemainingInSeconds:10},e.getUserEmail=function(t){e.setState({userEmail:t})},e.handlePassChange=function(t){e.setState({passwordValue:t.target.value})},e.handlePassChange2=function(t){e.setState({passwordValue2:t.target.value})},e.handleClickShowPassword=function(){!0===e.state.showPassword?e.setState({showPassword:!1}):e.setState({showPassword:!0})},e.handleClickShowPassword2=function(){!0===e.state.showPassword2?e.setState({showPassword2:!1}):e.setState({showPassword2:!0})},e.decrementTimeRemaining=function(){e.state.timeRemainingInSeconds>0?e.setState({timeRemainingInSeconds:e.state.timeRemainingInSeconds-1}):(clearInterval(e.timer),e.setState({timeRemainingInSeconds:10}),e.props.history.push("/login"))},e.preparePageContent=function(){var t=e.state,a=t.codeValue,s=t.codeValidation,o=t.codeErrorMsg,i=t.userEmail,l=t.verificationCodeSubmitErrorMsg,c=t.verificationCodeSubmitErrorState,u=t.passwordValidation,d=t.passwordValidation2,p=t.passwordValue,m=t.passwordValue2,h=t.passErrorMsg,f=t.passErrorMsg2,g=t.showPassword,b=t.showPassword2,v=t.resetpassSubmitErrorMsg,_=t.resetpassSubmitErrorState,E=t.resetpassSubmitSuccessState,S=t.resetpassSubmitSuccessMsg,y=t.rpassSubmitState,w=t.timeRemainingInSeconds;return""!==e.state.userEmail?r.a.createElement(n.Fragment,null,!0===y&&r.a.createElement("div",{className:"mask"}),r.a.createElement(Pd.a,{className:"main-container",component:"main",maxWidth:"xs"},r.a.createElement(km.a,null),r.a.createElement("div",{className:"paper-box"},r.a.createElement(Dp.a,{className:"login-logo",component:"h2",variant:"caption"},r.a.createElement("span",null,"Ikigai"),r.a.createElement("span",null,"Labs")),r.a.createElement(Pt.a,{mt:4,mb:1},r.a.createElement(Dp.a,{component:"h1",variant:"h5"},"Reset password"),r.a.createElement(jm.a,{variant:"middle",className:"subtitle-divider"})),r.a.createElement(Dp.a,{className:"subtitle",component:"div",variant:"caption"},"Please enter verification code you received on your email"),r.a.createElement(Pt.a,{mt:1,mb:1},r.a.createElement("strong",null,i)),!1===E?r.a.createElement("form",{className:"login-form",autoComplete:"off",noValidate:!0,onSubmit:e.handleSConfirmFormSubmit},s?r.a.createElement(ba.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Verification code",InputLabelProps:{shrink:!0},placeholder:"Enter verification code",type:"search",autoComplete:"new-username",autoFocus:!0,value:a,onChange:e.handleCodeChange}):r.a.createElement("div",null,r.a.createElement(ba.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Verification code",InputLabelProps:{shrink:!0},placeholder:"Enter verification code",type:"search",autoComplete:"new-username",autoFocus:!0,value:a,onChange:e.handleCodeChange,error:!0}),r.a.createElement(Ft.a,{className:"input-error",error:!0},r.a.createElement(Mt.a,null),r.a.createElement("span",null,o))),u?r.a.createElement(ba.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"New password",InputLabelProps:{shrink:!0},placeholder:"Enter new password",type:g?"password":"text",autoComplete:"new-password",value:p,onChange:e.handlePassChange,InputProps:{endAdornment:r.a.createElement(ha.a,{position:"end"},r.a.createElement(fa.a,{edge:"end","aria-label":"toggle password visibility",onClick:e.handleClickShowPassword,onMouseDown:function(e){e.preventDefault()},size:"small"},g?r.a.createElement(Fd.a,{fontSize:"small"}):r.a.createElement(pu.a,{fontSize:"small"})))}}):r.a.createElement("div",null,r.a.createElement(ba.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"New password",InputLabelProps:{shrink:!0},placeholder:"Enter new password",type:g?"password":"text",autoComplete:"new-password",value:p,onChange:e.handlePassChange,error:!0,InputProps:{endAdornment:r.a.createElement(ha.a,{position:"end"},r.a.createElement(fa.a,{edge:"end","aria-label":"toggle password visibility",onClick:e.handleClickShowPassword,onMouseDown:function(e){e.preventDefault()},size:"small"},g?r.a.createElement(Fd.a,{fontSize:"small"}):r.a.createElement(pu.a,{fontSize:"small"})))}}),r.a.createElement(Ft.a,{className:"input-error",error:!0},r.a.createElement(Mt.a,null),r.a.createElement("span",null,h))),d?r.a.createElement(ba.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Confirm password",InputLabelProps:{shrink:!0},placeholder:"Enter new password again",type:b?"password":"text",autoComplete:"new-password",value:m,onChange:e.handlePassChange2,InputProps:{endAdornment:r.a.createElement(ha.a,{position:"end"},r.a.createElement(fa.a,{edge:"end","aria-label":"toggle password visibility",onClick:e.handleClickShowPassword2,onMouseDown:function(e){e.preventDefault()},size:"small"},b?r.a.createElement(Fd.a,{fontSize:"small"}):r.a.createElement(pu.a,{fontSize:"small"})))}}):r.a.createElement("div",null,r.a.createElement(ba.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Confirm password",InputLabelProps:{shrink:!0},placeholder:"Enter new password again",type:b?"password":"text",autoComplete:"new-password",value:m,onChange:e.handlePassChange2,error:!0,InputProps:{endAdornment:r.a.createElement(ha.a,{position:"end"},r.a.createElement(fa.a,{edge:"end","aria-label":"toggle password visibility",onClick:e.handleClickShowPassword2,onMouseDown:function(e){e.preventDefault()},size:"small"},b?r.a.createElement(Fd.a,{fontSize:"small"}):r.a.createElement(pu.a,{fontSize:"small"})))}}),r.a.createElement(Ft.a,{className:"input-error",error:!0},r.a.createElement(Mt.a,null),r.a.createElement("span",null,f))),!0===_&&r.a.createElement(Pt.a,{mt:4,mb:4},r.a.createElement("div",{className:"submit-error has-txt-centered"},v)),!0===c&&r.a.createElement(Pt.a,{mt:4,mb:4},r.a.createElement("div",{className:"submit-error has-txt-centered"},l)),r.a.createElement(Pt.a,{mt:4},r.a.createElement(Ri.a,{container:!0,spacing:2,className:"has-txt-centered"},r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(At.a,{type:"submit",variant:"contained",color:"primary",className:"button",fullWidth:!0},!0===y&&r.a.createElement("span",{className:"btn-spinner"}),r.a.createElement("span",null,"Reset"))),r.a.createElement(Ri.a,{item:!0,xs:12},r.a.createElement(kl.a,{to:"/login"},"or go back to Sign in page"))))):r.a.createElement(n.Fragment,null,r.a.createElement(Pt.a,{mt:4,mb:4},r.a.createElement("div",{className:"submit-success has-txt-centered"},S)),r.a.createElement(Pt.a,{mt:4,mb:4},r.a.createElement("span",null,"Redirecting to Sign in page in "),r.a.createElement("strong",null,w)))),r.a.createElement(Pt.a,{className:"login-copyright"},r.a.createElement(Dp.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Dm.a,{color:"inherit",href:"http://ikigailabs.io/"},"IkigaiLabs.io")," ",(new Date).getFullYear(),".")))):r.a.createElement(Pd.a,{className:"main-container",component:"main",maxWidth:"xs"},r.a.createElement(km.a,null),r.a.createElement("div",{className:"paper-box"},r.a.createElement(Dp.a,{className:"login-logo",component:"h2",variant:"caption"},r.a.createElement("span",null,"Ikigai"),r.a.createElement("span",null,"Labs")),r.a.createElement(Pt.a,{mt:4,mb:1},r.a.createElement(Dp.a,{component:"h1",variant:"h5"},"Reset password"),r.a.createElement(jm.a,{variant:"middle",className:"subtitle-divider"})),r.a.createElement(Dp.a,{className:"subtitle",component:"div",variant:"caption"},"Please enter verification code you received on your email"),r.a.createElement(Pt.a,{mt:4},r.a.createElement("div",{className:"submit-error has-txt-left"},r.a.createElement(Pt.a,{mb:1},"Something went wrong, there are two possibilities:"),r.a.createElement("ol",{className:"error-list"},r.a.createElement("li",null,'You haven\'t submited "Forgot password" form'),r.a.createElement("li",null,"Verification code has expired")))),r.a.createElement(Pt.a,{mt:4,mb:2},r.a.createElement(kl.a,{to:"/forgot-password"},'Go to "Forgot password" page'))),r.a.createElement(Pt.a,{className:"login-copyright"},r.a.createElement(Dp.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Dm.a,{color:"inherit",href:"http://ikigailabs.io/"},"IkigaiLabs.io")," ",(new Date).getFullYear(),".")))},e.handleCodeChange=function(t){e.setState({codeValue:t.target.value})},e.handleSConfirmFormSubmit=function(t){e.setState({rpassSubmitState:!0}),t.preventDefault();var a=!1,n=!1,r=!1;setTimeout((function(){""!==e.state.codeValue?(a=!0,e.setState({codeValidation:!0,codeErrorMsg:""})):(a=!1,e.setState({codeValidation:!1,codeErrorMsg:"Verification code is required"})),""!==e.state.passwordValue?!0===Am.validate(e.state.passwordValue)?(e.setState({passwordValidation:!0,passErrorMsg:""}),n=!0):(e.setState({passwordValidation:!1,passErrorMsg:"Password must contain uppercase and lowercase letter, number and be 8 - 16 characters long"}),n=!1):e.setState({passwordValidation:!1,passErrorMsg:"Password is required"}),""!==e.state.passwordValue2?e.state.passwordValue2===e.state.passwordValue?(e.setState({passwordValidation2:!0,passErrorMsg2:""}),r=!0):(e.setState({passwordValidation2:!1,passErrorMsg2:"Passwords are not equal"}),r=!1):e.setState({passwordValidation2:!1,passErrorMsg2:"Confirm password is required"}),!0===a&&!0===n&&!0===r&&fr(e.state.userEmail,e.state.codeValue,e.state.passwordValue).then((function(t){200===t.status?(e.setState({verificationCodeSubmitErrorMsg:""}),e.setState({verificationCodeSubmitErrorState:!1}),e.setState({resetpassSubmitSuccessMsg:"Congratulations. You have successfully created new password."}),e.setState({resetpassSubmitSuccessState:!0}),e.timer=setInterval((function(){e.decrementTimeRemaining()}),1e3)):401===t.status?(e.setState({verificationCodeSubmitErrorMsg:"Unable to reset password."}),e.setState({verificationCodeSubmitErrorState:!0})):404===t.status?(e.setState({verificationCodeSubmitErrorMsg:"Error: Something went wrong."}),e.setState({verificationCodeSubmitErrorState:!0})):(e.setState({verificationCodeSubmitErrorMsg:"Unable to reset password."}),e.setState({verificationCodeSubmitErrorState:!0}))})).catch((function(t){404===t.response.status?(e.setState({verificationCodeSubmitErrorMsg:"Unable to reset password."}),e.setState({verificationCodeSubmitErrorState:!0})):401===t.response.status?(e.setState({verificationCodeSubmitErrorMsg:"Error: Something went wrong."}),e.setState({verificationCodeSubmitErrorState:!0})):(e.setState({verificationCodeSubmitErrorMsg:"Unable to reset password."}),e.setState({verificationCodeSubmitErrorState:!0}))})),e.setState({rpassSubmitState:!1})}),1e3)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({userEmail:""});var e=window.location.search;if(""!==e){var t=new URLSearchParams(e);if(""!==t){var a=t.get("e");if(""!==a){var n=encodeURIComponent(a).replace("%20","+"),r=decodeURIComponent(n);this.getUserEmail(r)}}}}},{key:"render",value:function(){return this.preparePageContent()}}]),a}(n.Component),Mm=(Object(d.c)((function(e){return{}}),(function(e){return{}}))(Lm),a(576)),zm=function(e){var t=e.component,a=e.loggedin,n=e.redirectTo,s=Object(Mm.a)(e,["component","loggedin","redirectTo"]);return r.a.createElement(ad.b,Object.assign({},s,{render:function(e){return!0===a?r.a.createElement(t,e):r.a.createElement(ad.a,{to:n})}}))};console.log("process.env.NODE_ENV: production");var Rm=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={winWidth:0,winHeight:0,internetSnackbarAppearance:"",internetSnackbarOpen:!1,internetSnackbarDuration:"",internetSnackbarType:"",internetSnackbarMsg:"",showProgress:!1},e.windowDimensions=function(){e.setState({winWidth:window.innerWidth,winHeight:window.innerHeight})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;Ye.interceptors.response.use((function(e){return e}),(function(t){t.response&&(401===t.response.status&&e.props.softLogout());return Promise.reject(t)})),this.props.checkForLoginCookie(),console.log(Ye.interceptors.response),window.addEventListener("resize",this.windowDimensions),this.windowDimensions()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.windowDimensions)}},{key:"getMobileResizeMessage",value:function(){if(this.state.winWidth<1024)return r.a.createElement("div",{className:"mobile-wrap-container"},r.a.createElement("div",{className:"mobile-wrap"},r.a.createElement("div",{className:"logo"},r.a.createElement("span",{className:"ikigai"},"Ikigai"),r.a.createElement("span",{className:"labs"},"Labs")),r.a.createElement("div",{className:"icon-holder-wrap"},r.a.createElement("div",{className:"icon-holder"},r.a.createElement("i",{className:"zmdi zmdi-smartphone-android"})),r.a.createElement("div",{className:"icon-holder"},r.a.createElement("i",{className:"zmdi small zmdi-long-arrow-right"})),r.a.createElement("div",{className:"icon-holder"},r.a.createElement("i",{className:"zmdi zmdi-desktop-windows"}))),r.a.createElement("div",{className:"txt-holder"},r.a.createElement("div",null,"Please use a device with a larger screen "),r.a.createElement("div",null," or maximize your browser window"),r.a.createElement("div",null,"Thank you")),r.a.createElement("div",{className:"copyright"},r.a.createElement("span",null,"Copyright \xa9 IkigaiLabs, "),r.a.createElement("span",null,(new Date).getFullYear()))))}},{key:"render",value:function(){return this.props.checkForLoginComplete?r.a.createElement("div",null,this.getMobileResizeMessage(),r.a.createElement(ad.d,null,r.a.createElement(ad.b,{path:"/login",component:Pm}),r.a.createElement(zm,{path:"/dashboard",loggedin:this.props.isLoggedIn,redirectTo:"/login",component:_m}),r.a.createElement(zm,{path:"/flow/:id",loggedin:this.props.isLoggedIn,redirectTo:"/login",component:om}),r.a.createElement(zm,{path:"/dash/:id",loggedin:this.props.isLoggedIn,redirectTo:"/login",component:bm}),r.a.createElement(zm,{path:"/dataset/:id",loggedin:this.props.isLoggedIn,redirectTo:"/login",component:mm}),r.a.createElement(ad.b,{path:"/",component:Pm}))):r.a.createElement("div",{className:"loader-wrapper"},r.a.createElement("div",{className:"loader"}),r.a.createElement("div",{className:"loader-txt"},"Loading..."))}}]),a}(n.Component),Vm=Object(d.c)((function(e){return{checkForLoginComplete:e.userReducerState.checkForLoginCookieComplete,isLoggedIn:e.userReducerState.isLoggedIn}}),(function(e){return{checkForLoginCookie:function(){return e({type:v,payload:null})},softLogout:function(){return e({type:Se,payload:null})}}}))(Rm);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(d.a,{store:Fo},r.a.createElement(ir.a,{history:Xa},r.a.createElement(Vm,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},112:function(e,t,a){e.exports={drawerHolder:"Navigation_drawerHolder__rCAJO",goBack:"Navigation_goBack__1uWfx",goBackIcon:"Navigation_goBackIcon__3KnKs",minimized:"Navigation_minimized__2RgId",toggleNavButton:"Navigation_toggleNavButton__14A0b",filterSidebar:"Navigation_filterSidebar__1VVGc",pureBg:"Navigation_pureBg__nfL9P",infoDrawerHolder:"Navigation_infoDrawerHolder__mCPEo",logoutBtn:"Navigation_logoutBtn__1DYvD"}},147:function(e,t,a){e.exports={dialog:"Dialog_dialog__3RbPw",header:"Dialog_header__2eU25",title:"Dialog_title__1QKvc",subtitle:"Dialog_subtitle__2sQu4",content:"Dialog_content__4Eh_w",footer:"Dialog_footer__Ci00Z",center:"Dialog_center__24gh9",delete:"Dialog_delete__3pZYF"}},187:function(e,t,a){e.exports={alert:"Alert_alert__1VWlY",title:"Alert_title__2V9p7",descr:"Alert_descr__H5g0z",buttons:"Alert_buttons__3EK_h","MuiAlert-standardWarning":"Alert_MuiAlert-standardWarning__1hup9","MuiAlert-message":"Alert_MuiAlert-message__1yVeh"}},274:function(e,t,a){e.exports={inputHolder:"Input_inputHolder__3ZZk3",input:"Input_input__1H8Oh",startIcon:"Input_startIcon__2fdZj","has-startIcon":"Input_has-startIcon__3BZ0C","of-filter-type":"Input_of-filter-type__1dF-K"}},275:function(e,t,a){e.exports={inputChipHolder:"ChipInput_inputChipHolder__1WPvy",inputChip:"ChipInput_inputChip__1Nbyh",startIcon:"ChipInput_startIcon__2LNKq","has-startIcon":"ChipInput_has-startIcon__GBhMJ","of-filter-type":"ChipInput_of-filter-type__32JDV"}},277:function(e,t,a){e.exports={navMenuHolderScrollbar:"SideMenu_navMenuHolderScrollbar__3E0DF",minimized:"SideMenu_minimized__1JIUg",navMenuHolder:"SideMenu_navMenuHolder__3dEmA",navMenu:"SideMenu_navMenu__2DjF0"}},278:function(e,t,a){e.exports={breadcrumb:"Breadcrumb_breadcrumb__3v2a7",path:"Breadcrumb_path__1-3ne",title:"Breadcrumb_title__mnwb8"}},280:function(e,t,a){e.exports={rootCanvas:"FlowComponent_rootCanvas__vdyw5",dropArea:"FlowComponent_dropArea__2cYwP",interactiveFrame:"FlowComponent_interactiveFrame__7Jy6p"}},281:function(e,t,a){e.exports={centralPanel:"DatasetComponent_centralPanel__1Gwsv",metabaseIframe:"DatasetComponent_metabaseIframe__YKjqB",gobackPopupContainer:"DatasetComponent_gobackPopupContainer__2XzwN"}},352:function(e,t,a){},358:function(e,t,a){e.exports={header:"Header_header__1j_1J",buttonsHolder:"Header_buttonsHolder__YLjcI"}},359:function(e,t,a){e.exports={dashCentralPanel:"DashComponent_dashCentralPanel__E_npk",metabaseIframe:"DashComponent_metabaseIframe__3yBBG"}},527:function(e,t,a){e.exports={button:"Button_button__1iUsX",left:"Button_left__18cVi",warning:"Button_warning__2AZvW",btnSpinner:"Button_btnSpinner__3ht6S",load3:"Button_load3__FZ__I",alternate:"Button_alternate__3KKLt","on-error":"Button_on-error__2z7Fa",spin:"Button_spin__1P5gG"}},528:function(e,t,a){e.exports={textDivider:"Divider_textDivider__25ESA"}},530:function(e,t,a){e.exports={autocompleteHolder:"Autocomplete_autocompleteHolder__3VsvL",autocomplete:"Autocomplete_autocomplete__1iwuZ",startIcon:"Autocomplete_startIcon__3WCwh","has-startIcon":"Autocomplete_has-startIcon__2Yq5y","of-filter-type":"Autocomplete_of-filter-type__3WD8O"}},534:function(e,t,a){e.exports={loginLogo:"Logo_loginLogo__jYFKW",small:"Logo_small__mzSWB",normal:"Logo_normal__35MV7",big:"Logo_big__1sLH7",primary:"Logo_primary__2jpfJ",white:"Logo_white__3OP3z",minimized:"Logo_minimized__10BGt"}},535:function(e,t,a){e.exports={interactiveWrap:"Preview_interactiveWrap__3sxwk",show:"Preview_show__2MUL4"}},536:function(e,t,a){},538:function(e,t,a){e.exports={peekWrap:"Peek_peekWrap__3vf-L",show:"Peek_show__D6OXR",max:"Peek_max__3_HR4"}},558:function(e,t,a){e.exports={buttonGroup:"ButtonGroup_buttonGroup__12m5e",primary:"ButtonGroup_primary__1b9kQ",secondary:"ButtonGroup_secondary__1RHb6"}},559:function(e,t,a){e.exports={grid:"Grid_grid__1QJlK"}},566:function(e,t,a){e.exports={contentArea:"Content_contentArea__c6vZz",minimized:"Content_minimized__3KTYE",dataset:"Content_dataset__1M-r3"}},567:function(e,t,a){e.exports={contentArea:"ContentOverlay_contentArea__2x-Qo",minimized:"ContentOverlay_minimized__wgKmx",dataset:"ContentOverlay_dataset__10P9z"}},596:function(e,t,a){e.exports=a(1069)},601:function(e,t,a){},635:function(e,t,a){},69:function(e,t,a){e.exports={customNode:"Node_customNode__29gWY",buttonGroup:"Node_buttonGroup__30jSo",customNodeCard:"Node_customNodeCard__2NJ6k",circlePort:"Node_circlePort__1zKjQ",error:"Node_error__29EoI",customNodeName:"Node_customNodeName__F8txa",facetNameHolder:"Node_facetNameHolder__1fYXr",facetName:"Node_facetName__u_wiJ",customNodeHeader:"Node_customNodeHeader__2ktKq",customNodeChainGroup:"Node_customNodeChainGroup__B2afJ",customNodeTitle:"Node_customNodeTitle__2WhCb",errorList:"Node_errorList__vhPs6",errorMessage:"Node_errorMessage__2o-6d",errorMessageTitle:"Node_errorMessageTitle__15nb7",nodeErrorIcon:"Node_nodeErrorIcon__raDwi"}},73:function(e,t,a){e.exports={itemBox:"ItemBox_itemBox__2-6bN",uploading:"ItemBox_uploading__35Ub0",uploadingDatabox:"ItemBox_uploadingDatabox__1x2Ol",clicked:"ItemBox_clicked__2whGR",header:"ItemBox_header__fMuMc",icon:"ItemBox_icon__fBzvr",type:"ItemBox_type__1o8dO",menu:"ItemBox_menu__1vFnP",content:"ItemBox_content__1vGky",link:"ItemBox_link__6lcLF",title:"ItemBox_title__2oHLb",faded1:"ItemBox_faded1__357d2",newSection:"ItemBox_newSection__1W0St"}},754:function(e,t){},782:function(e,t,a){},806:function(e,t,a){},820:function(e,t,a){},821:function(e,t,a){},822:function(e,t,a){},823:function(e,t,a){},824:function(e,t,a){},99:function(e,t,a){e.exports={mainContainer:"Login_mainContainer__1_CTT",box:"Login_box__1n5IH",mask:"Login_mask__2Er-S",mainTitle:"Login_mainTitle__dix-Q",subtitle:"Login_subtitle__3XYas",subtitleDivider:"Login_subtitleDivider__EZt1P",loginForm:"Login_loginForm__3Op2V",submitError:"Login_submitError__282da",loginCopyright:"Login_loginCopyright__-wSbQ","license-box":"Login_license-box__1kt2G","label-txt":"Login_label-txt__AKual","license-label-box":"Login_license-label-box__1-_oY","has-error":"Login_has-error__3DWHS","MuiIconButton-root":"Login_MuiIconButton-root__1M9Bb","license-dialog-content":"Login_license-dialog-content__1wrRq","ol-level-2":"Login_ol-level-2__2QrEY"}}},[[596,1,2]]]);
//# sourceMappingURL=main.10080558.chunk.js.map